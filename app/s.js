"use strict";var dr=Object.defineProperty;var st=Object.getOwnPropertySymbols;var xr=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable;var at=(t,e,r)=>e in t?dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lt=(t,e)=>{for(var r in e||(e={}))xr.call(e,r)&&at(t,r,e[r]);if(st)for(var r of st(e))hr.call(e,r)&&at(t,r,e[r]);return t};var gr=require("os"),U=require("electron"),J=require("path"),Ne=require("./5.js"),St=require("./x.js"),wr=require("crypto"),bt=require("zlib"),pr=require("util"),ie=require("fs"),ge=require("fs/promises"),Oe=require("./q.js");function yr(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var _t=yr(gr),mr=(t,e)=>{var r,i;for(r in e)i=e[r],t.on(r,i);return t},kt;kt=Ne.http();var me=new Proxy({},{get:(t,e)=>r=>{var i;return r=lt({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,type:"toolbar",webPreferences:{preload:J.join(Ne.preload,"o.js"),webSecurity:!1}},r),i=new U.BrowserWindow(r),i.setFullScreenable(!1),i.setVisibleOnAllWorkspaces(!0),i.loadURL(kt+"#"+e),i.once("ready-to-show",()=>i.show()),i.focus(),i}}),Ut;({main:Ut}=me);var oe=(t=!0)=>{var e,r,i,n;if(r=U.BrowserWindow.getAllWindows(),r.length){for(e of r)if(e.webContents.getURL().endsWith("/#main")){n=e,n.isMinimized()&&n.restore();break}}else n=Ut({resizable:!1,height:606,width:426});!t&&!n.isVisible()||(i=()=>{n.show(),n.setAlwaysOnTop(!0,"pop-up-menu"),n.moveTop(),n.focus()},i(),setTimeout(i,1e3))};var Et,Bt,Ot,vr,ke;_t.default.platform();({Menu:Et,Tray:Bt,app:Ot,globalShortcut:vr}=require("electron"));ke=void 0;var Sr=()=>{var t;ke=new Bt(J.join(Ne.png,"trayTemplate.png")),t=Et.buildFromTemplate([{label:"\u663E\u793A\u754C\u9762",click:oe,accelerator:"CmdOrCtrl+Shift+R"},{type:"separator"},{accelerator:"CmdOrCtrl+Shift+Q",label:"\u9000\u51FA",click:()=>Ot.quit()}]),ke.on("click",()=>{oe()}),ke.setContextMenu(t)};var Pt;Pt=t=>{var e,r,i,n,o,u,w,g;t&&(t.devToolsWebContents||({webContents:o}=t,e=new U.BrowserWindow({minimizable:!1,maximizable:!1}),[n,r]=t.getSize(),[w,g]=t.getPosition(),{width:u,height:i}=U.screen.getPrimaryDisplay().workArea,o.setDevToolsWebContents(e.webContents),o.openDevTools({mode:"detach"}),n>r?(g=0,n=0,r+=20,i-=r):(w=0,r=0,u-=n),e.setPosition(n,r),t.setPosition(w,g),e.setSize(u,i),t.focus()))};var br=()=>{U.globalShortcut.register("CmdOrCtrl+Alt+I",()=>Pt(U.BrowserWindow.getFocusedWindow()))},Te=t=>{U.BrowserWindow.getAllWindows().forEach(e=>{var r,i;if(i=e.webContents.getURL(),i){if({hash:r}=new URL(i),r=r.slice(1),r.startsWith("camera"))return;if(r.startsWith("main")){t?e[t]():e.hide();return}}e.close(),e.destroy()})},_r=()=>{U.BrowserWindow.getAllWindows().forEach(t=>{var e,r;if(r=t.webContents.getURL(),r&&({hash:e}=new URL(r),e=e.slice(1),e.startsWith("main"))){t.hide();return}t.close(),t.destroy()})};var At,V;({count_down:At}=me);V=void 0;var Tt=()=>{var t;if(V){V.focus();return}t=240,V=At({width:t,height:t,transparent:!0,resizable:!1,hasShadow:!1}),V.on("close",()=>{V=void 0}),V.moveTop(),V.setAlwaysOnTop(!0,"screen-saver"),V.webContents.on("did-finish-load",()=>{V.setAlwaysOnTop(!0,"screen-saver"),V.focus()})},kr={close:()=>{V!=null&&V.close()}},Le;try{Le=new TextDecoder}catch{}var x,Y,s=0,F={},S,Q,W=0,H=0,z,G,N=[],v,ot={useRecords:!1,mapsAsObjects:!0};class It{}const Mt=new It;Mt.name="MessagePack 0xC1";var fe=!1;class we{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,r){if(x)return Lt(()=>(qe(),this?this.unpack(e,r):we.prototype.unpack.call(ot,e,r)));Y=r>-1?r:e.length,s=0,H=0,Q=null,z=null,x=e;try{v=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw x=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof we){if(F=this,this.structures)return S=this.structures,be();(!S||S.length>0)&&(S=[])}else F=ot,(!S||S.length>0)&&(S=[]);return be()}unpackMultiple(e,r){let i,n=0;try{fe=!0;let o=e.length,u=this?this.unpack(e,o):Ie.unpack(e,o);if(r){for(r(u);s<o;)if(n=s,r(be())===!1)return}else{for(i=[u];s<o;)n=s,i.push(be());return i}}catch(o){throw o.lastPosition=n,o.values=i,o}finally{fe=!1,qe()}}_mergeStructures(e,r){e=e||[];for(let i=0,n=e.length;i<n;i++){let o=e[i];o&&(o.isShared=!0,i>=32&&(o.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in r||[])if(i>=0){let n=e[i],o=r[i];o&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[i]=n),e[i]=o)}return this.structures=e}decode(e,r){return this.unpack(e,r)}}function be(){try{if(!F.trusted&&!fe){let e=S.sharedLength||0;e<S.length&&(S.length=e)}let t=I();if(z&&(s=z.postBundlePosition),s==Y)S.restoreStructures&&ft(),S=null,x=null,G&&(G=null);else if(s>Y){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!fe)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw S.restoreStructures&&ft(),qe(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function ft(){for(let t in S.restoreStructures)S[t]=S.restoreStructures[t];S.restoreStructures=null}function I(){let t=x[s++];if(t<160)if(t<128){if(t<64)return t;{let e=S[t&63]||F.getStructures&&Dt()[t&63];return e?(e.read||(e.read=We(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,F.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[jt()]=I();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(I(),I());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=I();return e}else if(t<192){let e=t-160;if(H>=s)return Q.slice(s-W,(s+=e)-W);if(H==0&&Y<140){let r=e<16?Je(e):Ct(e);if(r!=null)return r}return $e(e)}else{let e;switch(t){case 192:return null;case 193:return z?(e=I(),e>0?z[1].slice(z.position1,z.position1+=e):z[0].slice(z.position0,z.position0-=e)):Mt;case 194:return!1;case 195:return!0;case 196:return Re(x[s++]);case 197:return e=v.getUint16(s),s+=2,Re(e);case 198:return e=v.getUint32(s),s+=4,Re(e);case 199:return ne(x[s++]);case 200:return e=v.getUint16(s),s+=2,ne(e);case 201:return e=v.getUint32(s),s+=4,ne(e);case 202:if(e=v.getFloat32(s),F.useFloat32>2){let r=He[(x[s]&127)<<1|x[s+1]>>7];return s+=4,(r*e+(e>0?.5:-.5)>>0)/r}return s+=4,e;case 203:return e=v.getFloat64(s),s+=8,e;case 204:return x[s++];case 205:return e=v.getUint16(s),s+=2,e;case 206:return e=v.getUint32(s),s+=4,e;case 207:return F.int64AsNumber?(e=v.getUint32(s)*4294967296,e+=v.getUint32(s+4)):e=v.getBigUint64(s),s+=8,e;case 208:return v.getInt8(s++);case 209:return e=v.getInt16(s),s+=2,e;case 210:return e=v.getInt32(s),s+=4,e;case 211:return F.int64AsNumber?(e=v.getInt32(s)*4294967296,e+=v.getUint32(s+4)):e=v.getBigInt64(s),s+=8,e;case 212:if(e=x[s++],e==114)return gt(x[s++]&63);{let r=N[e];if(r)return r.read?(s++,r.read(I())):r.noBuffer?(s++,r()):r(x.subarray(s,++s));throw new Error("Unknown extension "+e)}case 213:return e=x[s],e==114?(s++,gt(x[s++]&63,x[s++])):ne(2);case 214:return ne(4);case 215:return ne(8);case 216:return ne(16);case 217:return e=x[s++],H>=s?Q.slice(s-W,(s+=e)-W):Er(e);case 218:return e=v.getUint16(s),s+=2,H>=s?Q.slice(s-W,(s+=e)-W):Br(e);case 219:return e=v.getUint32(s),s+=4,H>=s?Q.slice(s-W,(s+=e)-W):Or(e);case 220:return e=v.getUint16(s),s+=2,ct(e);case 221:return e=v.getUint32(s),s+=4,ct(e);case 222:return e=v.getUint16(s),s+=2,dt(e);case 223:return e=v.getUint32(s),s+=4,dt(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}const Ur=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function We(t,e){function r(){if(r.count++>2){let n=t.read=new Function("r","return function(){return {"+t.map(o=>Ur.test(o)?o+":r()":"["+JSON.stringify(o)+"]:r()").join(",")+"}}")(I);return t.highByte===0&&(t.read=ut(e,t.read)),n()}let i={};for(let n=0,o=t.length;n<o;n++){let u=t[n];i[u]=I()}return i}return r.count=0,t.highByte===0?ut(e,r):r}const ut=(t,e)=>function(){let r=x[s++];if(r===0)return e();let i=t<32?-(t+(r<<5)):t+(r<<5),n=S[i]||Dt()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=We(n,t)),n.read()};function Dt(){let t=Lt(()=>(x=null,F.getStructures()));return S=F._mergeStructures(t,S)}var $e=ve,Er=ve,Br=ve,Or=ve;function ve(t){let e;if(t<16&&(e=Je(t)))return e;if(t>64&&Le)return Le.decode(x.subarray(s,s+=t));const r=s+t,i=[];for(e="";s<r;){const n=x[s++];if((n&128)===0)i.push(n);else if((n&224)===192){const o=x[s++]&63;i.push((n&31)<<6|o)}else if((n&240)===224){const o=x[s++]&63,u=x[s++]&63;i.push((n&31)<<12|o<<6|u)}else if((n&248)===240){const o=x[s++]&63,u=x[s++]&63,w=x[s++]&63;let g=(n&7)<<18|o<<12|u<<6|w;g>65535&&(g-=65536,i.push(g>>>10&1023|55296),g=56320|g&1023),i.push(g)}else i.push(n);i.length>=4096&&(e+=D.apply(String,i),i.length=0)}return i.length>0&&(e+=D.apply(String,i)),e}function ct(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=I();return e}function dt(t){if(F.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[jt()]=I();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(I(),I());return e}}var D=String.fromCharCode;function Ct(t){let e=s,r=new Array(t);for(let i=0;i<t;i++){const n=x[s++];if((n&128)>0){s=e;return}r[i]=n}return D.apply(String,r)}function Je(t){if(t<4)if(t<2){if(t===0)return"";{let e=x[s++];if((e&128)>1){s-=1;return}return D(e)}}else{let e=x[s++],r=x[s++];if((e&128)>0||(r&128)>0){s-=2;return}if(t<3)return D(e,r);let i=x[s++];if((i&128)>0){s-=3;return}return D(e,r,i)}else{let e=x[s++],r=x[s++],i=x[s++],n=x[s++];if((e&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){s-=4;return}if(t<6){if(t===4)return D(e,r,i,n);{let o=x[s++];if((o&128)>0){s-=5;return}return D(e,r,i,n,o)}}else if(t<8){let o=x[s++],u=x[s++];if((o&128)>0||(u&128)>0){s-=6;return}if(t<7)return D(e,r,i,n,o,u);let w=x[s++];if((w&128)>0){s-=7;return}return D(e,r,i,n,o,u,w)}else{let o=x[s++],u=x[s++],w=x[s++],g=x[s++];if((o&128)>0||(u&128)>0||(w&128)>0||(g&128)>0){s-=8;return}if(t<10){if(t===8)return D(e,r,i,n,o,u,w,g);{let E=x[s++];if((E&128)>0){s-=9;return}return D(e,r,i,n,o,u,w,g,E)}}else if(t<12){let E=x[s++],P=x[s++];if((E&128)>0||(P&128)>0){s-=10;return}if(t<11)return D(e,r,i,n,o,u,w,g,E,P);let b=x[s++];if((b&128)>0){s-=11;return}return D(e,r,i,n,o,u,w,g,E,P,b)}else{let E=x[s++],P=x[s++],b=x[s++],T=x[s++];if((E&128)>0||(P&128)>0||(b&128)>0||(T&128)>0){s-=12;return}if(t<14){if(t===12)return D(e,r,i,n,o,u,w,g,E,P,b,T);{let R=x[s++];if((R&128)>0){s-=13;return}return D(e,r,i,n,o,u,w,g,E,P,b,T,R)}}else{let R=x[s++],L=x[s++];if((R&128)>0||(L&128)>0){s-=14;return}if(t<15)return D(e,r,i,n,o,u,w,g,E,P,b,T,R,L);let Z=x[s++];if((Z&128)>0){s-=15;return}return D(e,r,i,n,o,u,w,g,E,P,b,T,R,L,Z)}}}}}function xt(){let t=x[s++],e;if(t<192)e=t-160;else switch(t){case 217:e=x[s++];break;case 218:e=v.getUint16(s),s+=2;break;case 219:e=v.getUint32(s),s+=4;break;default:throw new Error("Expected string")}return ve(e)}function Re(t){return F.copyBuffers?Uint8Array.prototype.slice.call(x,s,s+=t):x.subarray(s,s+=t)}function ne(t){let e=x[s++];if(N[e])return N[e](x.subarray(s,s+=t));throw new Error("Unknown extension type "+e)}var ht=new Array(4096);function jt(){let t=x[s++];if(t>=160&&t<192){if(t=t-160,H>=s)return Q.slice(s-W,(s+=t)-W);if(!(H==0&&Y<180))return $e(t)}else return s--,I();let e=(t<<5^(t>1?v.getUint16(s):t>0?x[s]:0))&4095,r=ht[e],i=s,n=s+t-3,o,u=0;if(r&&r.bytes==t){for(;i<n;){if(o=v.getUint32(i),o!=r[u++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(o=x[i++],o!=r[u++]){i=1879048192;break}if(i===n)return s=i,r.string;n-=3,i=s}for(r=[],ht[e]=r,r.bytes=t;i<n;)o=v.getUint32(i),r.push(o),i+=4;for(n+=3;i<n;)o=x[i++],r.push(o);let w=t<16?Je(t):Ct(t);return w!=null?r.string=w:r.string=$e(t)}const gt=(t,e)=>{var r=I();let i=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let n=S[t];return n&&n.isShared&&((S.restoreStructures||(S.restoreStructures=[]))[t]=n),S[t]=r,r.read=We(r,i),r.read()};var Rt=typeof self=="object"?self:global;N[0]=()=>{};N[0].noBuffer=!0;N[101]=()=>{let t=I();return(Rt[t[0]]||Error)(t[1])};N[105]=t=>{let e=v.getUint32(s-4);G||(G=new Map);let r=x[s],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};G.set(e,n);let o=I();return n.used?Object.assign(i,o):(n.target=o,o)};N[112]=t=>{let e=v.getUint32(s-4),r=G.get(e);return r.used=!0,r.target};N[115]=()=>new Set(I());const zt=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");N[116]=t=>{let e=t[0],r=zt[e];if(!r)throw new Error("Could not find typed array for code "+e);return new Rt[r](Uint8Array.prototype.slice.call(t,1).buffer)};N[120]=()=>{let t=I();return new RegExp(t[0],t[1])};const Pr=[];N[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=s;return s+=e-t.length,z=Pr,z=[xt(),xt()],z.position0=0,z.position1=0,z.postBundlePosition=s,s=r,I()};N[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Lt(t){let e=Y,r=s,i=W,n=H,o=Q,u=G,w=z,g=new Uint8Array(x.slice(0,Y)),E=S,P=S.slice(0,S.length),b=F,T=fe,R=t();return Y=e,s=r,W=i,H=n,Q=o,G=u,z=w,x=g,fe=T,S=E,S.splice(0,S.length,...P),F=b,v=new DataView(x.buffer,x.byteOffset,x.byteLength),R}function qe(){x=null,G=null,S=null}const He=new Array(147);for(let t=0;t<256;t++)He[t]=+("1e"+Math.floor(45.15-t*.30103));var Ie=new we({useRecords:!1});const Ar=Ie.unpack;Ie.unpackMultiple;Ie.unpack;let Tr=new Float32Array(1);new Uint8Array(Tr.buffer,0,4);let Ue;try{Ue=new TextEncoder}catch{}let Fe,$t;const Me=typeof Buffer!="undefined",_e=Me?Buffer.allocUnsafeSlow:Uint8Array,qt=Me?Buffer:Uint8Array,wt=Me?4294967296:2144337920;let l,de,A,a=0,$,C=null;const Ir=61440,Mr=/[\u0080-\uFFFF]/,ae=Symbol("record-id");class Dr extends we{constructor(e){super(e);this.offset=0;let r,i,n,o,u=0,w=qt.prototype.utf8Write?function(f,y,d){return l.utf8Write(f,y,d)}:Ue&&Ue.encodeInto?function(f,y){return Ue.encodeInto(f,l.subarray(y)).written}:!1,g=this;e||(e={});let E=e&&e.sequential,P=e.structures||e.saveStructures,b=e.maxSharedStructures;if(b==null&&(b=P?32:0),b>8160)throw new Error("Maximum maxSharedStructure is 8160");let T=e.maxOwnStructures;T==null&&(T=P?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let R=b>32||T+b>64,L=b+64,Z=b+T+64;if(Z>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let q=[],se=0,X=0;this.pack=this.encode=function(f,y){if(l||(l=new _e(8192),A=new DataView(l.buffer,0,8192),a=0),$=l.length-10,$-a<2048?(l=new _e(l.length),A=new DataView(l.buffer,0,l.length),$=l.length-10,a=0):a=a+7&2147483640,r=a,o=g.structuredClone?new Map:null,g.bundleStrings&&typeof f!="string"?(C=[],C.size=1/0):C=null,n=g.structures,n){n.uninitialized&&(n=g._mergeStructures(g.getStructures()));let d=n.sharedLength||0;if(d>b)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let c=0;c<d;c++){let h=n[c];if(!h)continue;let _,m=n.transitions;for(let p=0,M=h.length;p<M;p++){let B=h[p];_=m[B],_||(_=m[B]=Object.create(null)),m=_}m[ae]=c+64}u=d}E||(n.nextId=d+64)}i&&(i=!1);try{if(O(f),C&&mt(r,O),g.offset=a,o&&o.idsToInsert){a+=o.idsToInsert.length*6,a>$&&te(a),g.offset=a;let d=jr(l.subarray(r,a),o.idsToInsert);return o=null,d}return y&Rr?(l.start=r,l.end=a,l):l.subarray(r,a)}finally{if(n){X<10&&X++;let d=n.sharedLength||b;if(n.length>d&&(n.length=d),se>1e4)n.transitions=null,X=0,se=0,q.length>0&&(q=[]);else if(q.length>0&&!E){for(let c=0,h=q.length;c<h;c++)q[c][ae]=0;q=[]}if(i&&g.saveStructures){let c=l.subarray(r,a);return g.saveStructures(n,u)===!1?(g._mergeStructures(g.getStructures()),g.pack(f)):(u=d,c)}}y&zr&&(a=r)}};const O=f=>{a>$&&(l=te(a));var y=typeof f,d;if(y==="string"){let c=f.length;if(C&&c>=4&&c<4096){if((C.size+=c)>Ir){let p,M=(C[0]?C[0].length*3+C[1].length:0)+10;a+M>$&&(l=te(a+M)),C.position?(l[a]=200,a+=3,l[a++]=98,p=a-r,a+=4,mt(r,O),A.setUint16(p+r-3,a-r-p)):(l[a++]=214,l[a++]=98,p=a-r,a+=4),C=["",""],C.size=0,C.position=p}let m=Mr.test(f);C[m?0:1]+=f,l[a++]=193,O(m?-c:c);return}let h;c<32?h=1:c<256?h=2:c<65536?h=3:h=5;let _=c*3;if(a+_>$&&(l=te(a+_)),c<64||!w){let m,p,M,B=a+h;for(m=0;m<c;m++)p=f.charCodeAt(m),p<128?l[B++]=p:p<2048?(l[B++]=p>>6|192,l[B++]=p&63|128):(p&64512)===55296&&((M=f.charCodeAt(m+1))&64512)===56320?(p=65536+((p&1023)<<10)+(M&1023),m++,l[B++]=p>>18|240,l[B++]=p>>12&63|128,l[B++]=p>>6&63|128,l[B++]=p&63|128):(l[B++]=p>>12|224,l[B++]=p>>6&63|128,l[B++]=p&63|128);d=B-a-h}else d=w(f,a+h,_);d<32?l[a++]=160|d:d<256?(h<2&&l.copyWithin(a+2,a+1,a+1+d),l[a++]=217,l[a++]=d):d<65536?(h<3&&l.copyWithin(a+3,a+2,a+2+d),l[a++]=218,l[a++]=d>>8,l[a++]=d&255):(h<5&&l.copyWithin(a+5,a+3,a+3+d),l[a++]=219,A.setUint32(a,d),a+=4),a+=d}else if(y==="number")if(f>>>0===f)f<64?l[a++]=f:f<256?(l[a++]=204,l[a++]=f):f<65536?(l[a++]=205,l[a++]=f>>8,l[a++]=f&255):(l[a++]=206,A.setUint32(a,f),a+=4);else if(f>>0===f)f>=-32?l[a++]=256+f:f>=-128?(l[a++]=208,l[a++]=f+256):f>=-32768?(l[a++]=209,A.setInt16(a,f),a+=2):(l[a++]=210,A.setInt32(a,f),a+=4);else{let c;if((c=this.useFloat32)>0&&f<4294967296&&f>=-2147483648){l[a++]=202,A.setFloat32(a,f);let h;if(c<4||(h=f*He[(l[a]&127)<<1|l[a+1]>>7])>>0===h){a+=4;return}else a--}l[a++]=203,A.setFloat64(a,f),a+=8}else if(y==="object")if(!f)l[a++]=192;else{if(o){let h=o.get(f);if(h){if(!h.id){let _=o.idsToInsert||(o.idsToInsert=[]);h.id=_.push(h)}l[a++]=214,l[a++]=112,A.setUint32(a,h.id),a+=4;return}else o.set(f,{offset:a-r})}let c=f.constructor;if(c===Object)nt(f,!0);else if(c===Array){d=f.length,d<16?l[a++]=144|d:d<65536?(l[a++]=220,l[a++]=d>>8,l[a++]=d&255):(l[a++]=221,A.setUint32(a,d),a+=4);for(let h=0;h<d;h++)O(f[h])}else if(c===Map){d=f.size,d<16?l[a++]=128|d:d<65536?(l[a++]=222,l[a++]=d>>8,l[a++]=d&255):(l[a++]=223,A.setUint32(a,d),a+=4);for(let[h,_]of f)O(h),O(_)}else{for(let h=0,_=Fe.length;h<_;h++){let m=$t[h];if(f instanceof m){let p=Fe[h];if(p.write){p.type&&(l[a++]=212,l[a++]=p.type,l[a++]=0),O(p.write.call(this,f));return}let M=l,B=A,K=a;l=null;let re;try{re=p.pack.call(this,f,ce=>(l=M,M=null,a+=ce,a>$&&te(a),{target:l,targetView:A,position:a-ce}),O)}finally{M&&(l=M,A=B,a=K,$=l.length-10)}re&&(re.length+a>$&&te(re.length+a),a=Cr(re,l,a,p.type));return}}nt(f,!f.hasOwnProperty)}}else if(y==="boolean")l[a++]=f?195:194;else if(y==="bigint"){if(f<BigInt(1)<<BigInt(63)&&f>=-(BigInt(1)<<BigInt(63)))l[a++]=211,A.setBigInt64(a,f);else if(f<BigInt(1)<<BigInt(64)&&f>0)l[a++]=207,A.setBigUint64(a,f);else if(this.largeBigIntToFloat)l[a++]=203,A.setFloat64(a,Number(f));else throw new RangeError(f+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");a+=8}else if(y==="undefined")this.encodeUndefinedAsNil?l[a++]=192:(l[a++]=212,l[a++]=0,l[a++]=0);else if(y==="function")O(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+y)},nt=this.useRecords===!1?this.variableMapSize?f=>{let y=Object.keys(f),d=y.length;d<16?l[a++]=128|d:d<65536?(l[a++]=222,l[a++]=d>>8,l[a++]=d&255):(l[a++]=223,A.setUint32(a,d),a+=4);let c;for(let h=0;h<d;h++)O(c=y[h]),O(f[c])}:(f,y)=>{l[a++]=222;let d=a-r;a+=2;let c=0;for(let h in f)(y||f.hasOwnProperty(h))&&(O(h),O(f[h]),c++);l[d+++r]=c>>8,l[d+r]=c&255}:e.progressiveRecords&&!R?(f,y)=>{let d,c=n.transitions||(n.transitions=Object.create(null)),h=a++-r,_;for(let m in f)if(y||f.hasOwnProperty(m)){if(d=c[m],d)c=d;else{let p=Object.keys(f),M=c;c=n.transitions;let B=0;for(let K=0,re=p.length;K<re;K++){let ce=p[K];d=c[ce],d||(d=c[ce]=Object.create(null),B++),c=d}h+r+1==a?(a--,je(c,p,B)):it(c,p,h,B),_=!0,c=M[m]}O(f[m])}if(!_){let m=c[ae];m?l[h+r]=m:it(c,Object.keys(f),h,0)}}:(f,y)=>{let d,c=n.transitions||(n.transitions=Object.create(null)),h=0;for(let m in f)(y||f.hasOwnProperty(m))&&(d=c[m],d||(d=c[m]=Object.create(null),h++),c=d);let _=c[ae];_?_>=96&&R?(l[a++]=((_-=96)&31)+96,l[a++]=_>>5):l[a++]=_:je(c,c.__keys__||Object.keys(f),h);for(let m in f)(y||f.hasOwnProperty(m))&&O(f[m])},te=f=>{let y;if(f>16777216){if(f-r>wt)throw new Error("Packed buffer would be larger than maximum buffer size");y=Math.min(wt,Math.round(Math.max((f-r)*(f>67108864?1.25:2),4194304)/4096)*4096)}else y=(Math.max(f-r<<2,l.length-1)>>12)+1<<12;let d=new _e(y);return A=new DataView(d.buffer,0,y),l.copy?l.copy(d,0,r,f):d.set(l.slice(r,f)),a-=r,r=0,$=d.length-10,l=d},je=(f,y,d)=>{let c=n.nextId;c||(c=64),c<L&&this.shouldShareStructure&&!this.shouldShareStructure(y)?(c=n.nextOwnId,c<Z||(c=L),n.nextOwnId=c+1):(c>=Z&&(c=L),n.nextId=c+1);let h=y.highByte=c>=96&&R?c-96>>5:-1;f[ae]=c,f.__keys__=y,n[c-64]=y,c<L?(y.isShared=!0,n.sharedLength=c-63,i=!0,h>=0?(l[a++]=(c&31)+96,l[a++]=h):l[a++]=c):(h>=0?(l[a++]=213,l[a++]=114,l[a++]=(c&31)+96,l[a++]=h):(l[a++]=212,l[a++]=114,l[a++]=c),d&&(se+=X*d),q.length>=T&&(q.shift()[ae]=0),q.push(f),O(y))},it=(f,y,d,c)=>{let h=l,_=a,m=$,p=r;l=de,a=0,r=0,l||(de=l=new _e(8192)),$=l.length-10,je(f,y,c),de=l;let M=a;if(l=h,a=_,$=m,r=p,M>1){let B=a+M-1;B>$&&te(B);let K=d+r;l.copyWithin(K+M,K+1,a),l.set(de.slice(0,M),K),a=B}else l[d+r]=de[0]}}useBuffer(e){l=e,A=new DataView(l.buffer,l.byteOffset,l.byteLength),a=0}clearSharedData(){this.structures&&(this.structures=[])}}$t=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,It];Fe=[{pack(t,e,r){let i=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:o,position:u}=e(6);n[u++]=214,n[u++]=255,o.setUint32(u,i)}else if(i>0&&i<17179869184){let{target:n,targetView:o,position:u}=e(10);n[u++]=215,n[u++]=255,o.setUint32(u,t.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),o.setUint32(u+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:n,targetView:o,position:u}=e(3);n[u++]=212,n[u++]=255,n[u++]=255}else{let{target:n,targetView:o,position:u}=e(15);n[u++]=199,n[u++]=12,n[u++]=255,o.setUint32(u,t.getMilliseconds()*1e6),o.setBigInt64(u+4,BigInt(Math.floor(i)))}}},{pack(t,e,r){let i=Array.from(t),{target:n,position:o}=e(this.structuredClone?3:0);this.structuredClone&&(n[o++]=212,n[o++]=115,n[o++]=0),r(i)}},{pack(t,e,r){let{target:i,position:n}=e(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:i,position:n}=e(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([t.source,t.flags])}},{pack(t,e){this.structuredClone?pt(t,16,e):yt(Me?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==qt&&this.structuredClone?pt(t,zt.indexOf(r.name),e):yt(t,e)}},{pack(t,e){let{target:r,position:i}=e(1);r[i]=193}}];function pt(t,e,r,i){let n=t.byteLength;if(n+1<256){var{target:o,position:u}=r(4+n);o[u++]=199,o[u++]=n+1}else if(n+1<65536){var{target:o,position:u}=r(5+n);o[u++]=200,o[u++]=n+1>>8,o[u++]=n+1&255}else{var{target:o,position:u,targetView:w}=r(7+n);o[u++]=201,w.setUint32(u,n+1),u+=4}o[u++]=116,o[u++]=e,o.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),u)}function yt(t,e){let r=t.byteLength;var i,n;if(r<256){var{target:i,position:n}=e(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=e(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:o}=e(r+5);i[n++]=198,o.setUint32(n,r),n+=4}i.set(t,n)}function Cr(t,e,r,i){let n=t.length;switch(n){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:n<256?(e[r++]=199,e[r++]=n):n<65536?(e[r++]=200,e[r++]=n>>8,e[r++]=n&255):(e[r++]=201,e[r++]=n>>24,e[r++]=n>>16&255,e[r++]=n>>8&255,e[r++]=n&255)}return e[r++]=i,e.set(t,r),r+=n,r}function jr(t,e){let r,i=e.length*6,n=t.length-i;for(e.sort((o,u)=>o.offset>u.offset?1:-1);r=e.pop();){let o=r.offset,u=r.id;t.copyWithin(o+i,o,n),i-=6;let w=o+i;t[w++]=214,t[w++]=105,t[w++]=u>>24,t[w++]=u>>16&255,t[w++]=u>>8&255,t[w++]=u&255,n=o}return t}function mt(t,e){A.setUint32(C.position+t,a-C.position-t);let r=C;C=null,e(r[0]),e(r[1])}let Ft=new Dr({useRecords:!1});Ft.pack;Ft.pack;const Rr=512,zr=1024,Ve="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vt=Ve.split(""),Vt=new Array(123);for(let t=0;t<Ve.length;t++)Vt[Ve.charCodeAt(t)]=t;const Nt=t=>{if(t<0)return`-${ntob(-t)}`;let e=t>>>0,r=t/4294967296>>>0,i="";for(;r>0;)i=vt[63&e]+i,e>>>=6,e|=(63&r)<<26,r>>>=6;let n="";do n=vt[63&e]+n,e>>>=6;while(e>0);return n+i},Wt=t=>{let e=0;const r=t.charAt(0)==="-"?1:0;for(let i=r;i<t.length;i++)e=e*64+Vt[t.charCodeAt(i)];return r?-e:e};var Jt="https://i-ver.oss-cn-beijing.aliyuncs.com/",Ht,Lr=async t=>{var e,r;return t=await t,r=[],e=r.push.bind(r),t.on("data",e),new Promise((i,n)=>(t.on("end",()=>{i(Buffer.concat(r))}),t.on("error",n)))},$r=t=>Lr(Zt(t));Ht=t=>{var e;return e=U.net.request(t),e.end(),new Promise((r,i)=>(e.on("error",n=>{i(n)}),e.on("response",n=>{if(n.statusCode!==200){i(n);return}r(n)})))};var Zt=t=>Ht(t),Se={};Se.version="1.0.0";Se.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};Se.decode=function(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")};Se.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)};var ze=Se,Kt=JSON.parse(ie.readFileSync(J.join(__dirname,"package.json"),"utf8"));var le,Gt,Ee,De,Ze,Ce,pe,Be,Xt,Qt,Ke,Pe,Yt,Ge,er,Xe;Qt=pr.promisify(bt.brotliDecompress);var qr=()=>(U.app.relaunch(),U.app.exit());le=J.join(St.ROOT,"v");ie.mkdirSync(le,{recursive:!0});Gt="sha512";Pe=t=>$r(Jt+t);er=t=>{var e,r,i;t=t.split("."),e=Buffer.allocUnsafe(2*t.length),i=0;for(r of t)e.writeUIntBE(r-0,i,2),i+=2;return e.readUintBE(0,6)};Yt=t=>{var e;return e=wr.createHash(Gt),new Promise(r=>ie.createReadStream(t).on("data",e.update.bind(e)).on("end",()=>{r(e.digest().slice(0,8))}))};Be=(()=>{var t;return{v:t}=Oe.default,t&&Wt(t)})();Ce=er(Kt.version);pe=0;Xe=async()=>{var t;return t=Nt(parseInt(new Date/1e3)),pe=await Pe("v?"+t),pe};Xt=async t=>{var e,r,i,n,o,u,w,g,E,P,b,T,R,L,Z,q,se,X;if(t||(t=pe||await Xe()),P=t.readUintBE(0,6),Ce!==Be){if(i=Nt(P),e=J.join(le,i),P===Be)return e;for(se=ze.encode(await Pe(ze.encode(t))),[r,n,w]=Ar(await Qt(await Pe(se))),R=O=>ge.mkdir(J.join(e,O),{recursive:!0}),await Promise.all(r.map(R)),Z=J.dirname(__dirname),L=E=0,b=n.length;E<b;L=++E)if(g=n[L],o=J.join(e,g),u=w[L],q=async O=>Buffer.compare(u,await Yt(O))===0,!(ie.existsSync(o)&&await q(o))){if(await R(J.dirname(g)),T=J.join(Z,g),ie.existsSync(T)&&await q(T)){await ge.copyFile(T,o);continue}if(X=ie.createWriteStream(o),(await Zt(Jt+ze.encode(u))).pipe(bt.createBrotliDecompress()).pipe(X),await new Promise(O=>{X.on("finish",O)}),!await q(o))return}return Oe.default.v=i,Be=P,e}};var tr=async()=>{var t,e,r;try{t=await Xe()}catch(i){return e=i,console.trace(e),0}return r=Ce<t.readUintBE(0,6),r?t:0},Fr=()=>Kt.version;Ke=async()=>{var t;(t=await tr())&&await rr(t)};setInterval(Ke,864e5);Ee=De=Ze=void 0;Ge=()=>De=new Promise(t=>Ze=t);Ge();var Vr=()=>De,rr=(...t)=>(Ee||(Ee=Xt(...t).then(async e=>{e&&(Ze([pe,JSON.parse(await ge.readFile(J.join(e,"package.json"),"utf8")).description]),Ge())}).finally(()=>{Ee=!1})),De);setTimeout(async()=>{var t,e,r,i;if(ie.existsSync(le)){i=await ge.readdir(le,{withFileTypes:!0});for(e of i)e.isDirectory()&&({name:r}=e,Wt(r)<Ce&&await ge.rm(J.join(le,r),{recursive:!0,force:!0}))}if(t=parseInt(new Date/864e5),t!==Oe.default.update_check)return Oe.default.update_check=t,await Ke()},15e3);var Nr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",relaunch:qr,update_check:tr,ver_now:Fr,update_promise:Vr,update:rr}),Wr={ID:""},nr=new Proxy({},{get:(t,e)=>()=>{var r,i,n;return{width:i,height:r}=U.screen.getPrimaryDisplay().size,n=me[e]({width:i,height:r,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1}),n.setAlwaysOnTop(!0,"screen-saver"),n.setPosition(0,0),n}}),ir=t=>{if(!!t&&!t.isDestroyed()){t.close();try{t.destroy()}catch{}}},ue,sr,ar,k;({recbar:ar}=me);k=void 0;ue=void 0;({draw:sr}=nr);var Jr=async(t,e)=>{var r;return{response:r}=await U.dialog.showMessageBox(k,{message:t,buttons:e}),r},Hr=()=>{ue||(ue=sr(),lr())},lr=()=>{ye(),ue.focus()},Zr=()=>{ir(ue),ue=void 0},or=()=>{var t,e,r;return e={width:568,height:48,roundedCorners:!1,transparent:!0,shadow:!1,resizable:!1,hasShadow:!1},{width:r,height:t}=U.screen.getPrimaryDisplay().workArea,k=ar(e),k.setPosition((r-e.width)/2,t-28-e.height),k.on("close",()=>k=void 0),k.on("system-context-menu",(i,n)=>{i.preventDefault()}),ye(),new Promise(i=>k.webContents.on("did-finish-load",()=>{ye(),k.focus(),i(k)}))},ye=()=>{k.setAlwaysOnTop(!0,"screen-saver")},Kr=()=>{var t,e,r,i,n;i=k.getPosition(),[r,e]=k.getSize(),[n,t]=k.size,k.setSize(n,t),k.setPosition(i[0]+r-n,i[1]),k.setHasShadow(!0)},Gr=()=>{var t,e,r,i;e=k.getPosition(),k.size=r=k.getSize(),i=170,t=48,k.setMinimumSize(i,t),k.setSize(i,t),k.setPosition(e[0]+r[0]-i,e[1]),k.setHasShadow(!1)},Xr=()=>{Te("show")},Qr=()=>{Te("showInactive")},Yr=()=>{k.hide()},en=async()=>{var t,e;e=await U.desktopCapturer.getSources({types:["screen"],thumbnailSize:{width:0,height:0}});for(t of e)return t.id},tn=()=>{U.BrowserWindow.getAllWindows().forEach(t=>t.hide())},rn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",confirm:Jr,draw:Hr,draw_top:lr,draw_x:Zr,\u5DE5\u5177\u6761:or,top:ye,expand:Kr,left:Gr,cancel:Xr,end:Qr,hide:Yr,screen_source:en,stop:tn}),nn=t=>{Wr.ID=t},sn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ID:nn}),fr,Qe,Ae,Ye,ee,j,ur;({camera:fr}=me);j=void 0;ee=void 0;Ye=Qe=200;Ae=void 0;var an=(t,e)=>(t+=Ae[0],e+=Ae[1],j.setBounds({x:t,y:e,width:Ye,height:Qe}),[t,e]),ln=()=>{Ae=j.getPosition()},xe=()=>{j&&!j.isDestroyed()&&j.getSize()[0]!==800&&(ee=j.getPosition()),ir(j)},on=t=>{var e,r;r=j.getSize()[0],r!==t&&(ee=j.getPosition(),e=Math.round((t-r)/2),j.setBounds({x:ee[0]-e,y:ee[1]-e,width:t,height:t}))},fn=ur=(t,e)=>{j&&!j.isDestroyed()||(Ye=t,Qe=e,j=fr({width:t,height:e,shadow:!1,center:!0,roundedCorners:!1,resizable:!1,hasShadow:!1,transparent:!0}),j.setAlwaysOnTop(!0,"pop-up-menu"))},un=t=>{var e,r,i,n,o;j&&!j.isDestroyed()||(t!==void 0&&(ee=void 0),i=200,ur(i,i),ee?[xe,o]=ee:({width:n,height:e}=U.screen.getPrimaryDisplay().size,t?(r=30,xe=Math.round((n-546*1.57)/2+r+21),o=Math.round(e/2+546/2-i-r-21)):(r=62,xe=r,o=e-r-i)),j.setPosition(xe,o))},cn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",move:an,init:ln,get x(){return xe},size:on,default:fn,circle:un});var cr,he;({area:cr}=nr);he=void 0;var dn=()=>{he=cr(),he.on("close",()=>he=void 0)},xn=()=>{he.setIgnoreMouseEvents(!0,{forward:!0}),Tt(),ye()},et,tt,rt,hn=()=>{var t,e;return{x:t,y:e}=U.screen.getCursorScreenPoint(),[t,e]};rt=void 0;et=void 0;tt=()=>{et=new Promise(t=>{rt=t})};tt();(async()=>{var t,e;try{e=await Promise.resolve().then(function(){return require("./w.js")}).then(function(r){return r.index})}catch(r){t=r,console.error(t);return}e.on("mouseup",r=>{r.button===1&&(rt(),tt())})})();var gn=()=>et;function wn(t,e,r,i){var n,o;n=t!=="camera",o=i===1&&n,o?dn():Tt(),or()}var pn=(t,e,r,i)=>{Te(),wn(t,e,r,i)},yn=t=>{U.shell.openExternal(t)},mn=()=>St.ROOT,vn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",userData:mn,close:Te,x:_r,count_down:kr,auto_update:Nr,recbar:rn,USER:sn,camera:cn,area:xn,main:oe,mouse:hn,mouseup:gn,rec:pn,open:yn});(async()=>{var t;t=await Promise.resolve().then(function(){return require("./_.js")}),t.init({dsn:"http://87efcd705ef746db873a87c5721c9336@sentry.izhenxiang.com/2"})})();(()=>{var t,e,r,i,n,o,u;r=_t.default.platform(),oe(),r==="darwin"&&(i=U.app.dock)!=null&&i.hide(),t=(w,g)=>{var E,P,b,T;g instanceof Function&&U.ipcMain.handle(w.join("."),(R,L)=>g(...L)),b=Object.entries(g);for(T of b)[P,E]=T,t([...w,P],E)},n=Object.entries(vn);for(u of n)[e,o]=u,t([e],o);Sr(),br()})();mr(U.app,{"window-all-closed":()=>{if(process.platform!=="darwin")return U.app.quit()},"second-instance":oe,activate:oe});U.app.requestSingleInstanceLock()||(U.app.quit(),process.exit(0));
