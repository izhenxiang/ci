var L=Object.defineProperty;var z=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var q=(e,a,o)=>a in e?L(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,E=(e,a)=>{for(var o in a||(a={}))T.call(a,o)&&q(e,o,a[o]);if(z)for(var o of z(a))x.call(a,o)&&q(e,o,a[o]);return e};import{c as n}from"./08f73616.js";import{A as j,o as c,B as u,F as b,D as $,E as k,q as t,C as w,y as D,z as A,b as H,H as V,I as B,s as N,J,d as O,l as P,m as S,u as I,k as R,v as W}from"./9426e368.js";import{_ as C}from"./index.js";import{i as G}from"./f055c35d.js";import{m as K}from"./513644be.js";import{s as Q}from"./b3073075.js";import"./c73e65f4.js";import"./46c7841b.js";var X={setup:()=>{var e,a,o,i,v,d;for(i=["all \u5C4F\u5E55+\u6444\u50CF\u5934\u5F55\u5236","screen \u5C4F\u5E55\u5F55\u5236","camera \u6444\u50CF\u5934\u5F55\u5236"],d=a=0,o=i.length;a<o;d=++a)e=i[d],v=e.indexOf(" "),i[d]=[e.slice(0,v),e.slice(1+v)];return j(()=>{switch(n.src){case"screen":n.video="";break;default:n.video||(n.video=localStorage.video)}}),{li:i,config:n,go:h=>{n.src=h}}}};const Y=e=>(D("data-v-69066389"),e=e(),A(),e),Z={class:"method"},ee=["onClick"],oe=Y(()=>t("b",{class:"ico"},null,-1));function ae(e,a){return c(),u("div",Z,[(c(!0),u(b,null,$(e.li,([o,i])=>(c(),u("a",{class:k([o,e.config.src==o?"now":""]),onClick:v=>e.go(o)},[oe,t("i",null,w(i),1)],10,ee))),256))])}var se=C(X,[["render",ae],["__scopeId","data-v-69066389"]]),te={setup:()=>({config:n,disabled:H(()=>n.src==="camera"),li:"\u6574\u4E2A\u684C\u9762 \u6307\u5B9A\u533A\u57DF".split(" ")})};const ie=e=>(D("data-v-213e215c"),e=e(),A(),e),re={class:"bk"},ne=ie(()=>t("h2",null,"\u5F55\u5236\u533A\u57DF",-1)),le={class:"select"},de=["disabled"],ce=["value"];function ue(e,a){return c(),u("div",re,[ne,t("div",le,[V(t("select",{disabled:e.disabled,"onUpdate:modelValue":a[0]||(a[0]=o=>e.config.area=o)},[(c(!0),u(b,null,$(e.li,(o,i)=>(c(),u("option",{value:i},w(o),9,ce))),256))],8,de),[[B,e.config.area]])])])}var ve=C(te,[["render",ue],["__scopeId","data-v-213e215c"]]),_e={setup:()=>{var e,a,o,i,v,d,h;return d={audio:N([]),video:N([])},{mediaDevices:i}=navigator,v=async()=>{var l,r,s,_,f,p,g,m,y,M,U;p={},g=await i.enumerateDevices();for(M of g)({kind:_,label:f,deviceId:l}=M),l==="default"&&(f=f.replace("Default - ","\u9ED8\u8BA4 ")),_.endsWith("input")&&(_=_.slice(0,-5),(p[_]=p[_]||[]).push([l,f]));for(s in d)d[s].value=p[s]||[];for(s in d){if({value:y}=d[s],y.length){if(m=n[s],m){for(U of y)if([r]=U,m===r)return}m!==""&&(m=y[0][0])}else m=0;n[s]=m}},o=void 0,a=void 0,e=()=>{a&&(clearInterval(o),a(),a=void 0)},J(e),h=O(0),j(()=>{var l,r,s;r=["audio","video"];for(l of r)s=n[l],s&&(localStorage[l]=s)}),j(async()=>{var l,r,s,_,f,p,g;e(),{audio:s}=n,!!s&&(g=await K.audio(s),l=new AudioContext,p=l.createMediaStreamSource(g),r=l.createAnalyser(),r.minDecibels=-90,r.maxDecibels=-10,r.fftSize=32,a=()=>(p.disconnect(r),l.close()),_=r.frequencyBinCount,f=new Uint8Array(_),o=setInterval(()=>{r.getByteFrequencyData(f),h.value=Math.round(Math.min(1,Math.max(...f)/200)*100)},100),p.connect(r))}),(async()=>{await v()})(),E({refresh:v,config:n,x:l=>{var r,s;s=n[l],s?s="":s=localStorage[l]||"",l==="video"&&({src:r}=n,s?r==="screen"&&(n.src="all"):r==="all"&&(n.src="screen")),n[l]=s},vol:h},d)}};const F=e=>(D("data-v-1476b424"),e=e(),A(),e),fe={class:"bk"},pe=F(()=>t("h2",null,"\u8BBE\u5907\u8BBE\u7F6E",-1)),me={class:"video"},he={class:"select"},ge={label:"\u8F93\u5165\u6E90"},be=["value"],ye=F(()=>t("optgroup",{label:"\u2500\u2500\u2500"},[t("option",{value:""},"\u7981\u7528")],-1)),$e={class:"audio"},we={class:"select"},Se={label:"\u8F93\u5165\u6E90"},Ie=["value"],Ce=F(()=>t("optgroup",{label:"\u2500\u2500\u2500"},[t("option",{value:""},"\u7981\u7528")],-1));function je(e,a){return c(),u("div",fe,[pe,t("li",me,[t("label",{class:k({e:e.config.video}),onClick:a[0]||(a[0]=o=>e.x("video")),for:"driveVideo"},null,2),t("div",he,[V(t("select",{id:"driveVideo",onFocus:a[1]||(a[1]=(...o)=>e.refresh&&e.refresh(...o)),"onUpdate:modelValue":a[2]||(a[2]=o=>e.config.video=o)},[t("optgroup",ge,[(c(!0),u(b,null,$(e.video,([o,i])=>(c(),u("option",{value:o},w(i),9,be))),256))]),ye],544),[[B,e.config.video]])])]),t("li",$e,[t("label",{class:k({e:e.config.audio}),style:P("--vol:"+e.vol+"%"),onClick:a[3]||(a[3]=o=>e.x("audio")),for:"driveAudio"},null,6),t("div",we,[V(t("select",{id:"driveAudio",onFocus:a[4]||(a[4]=(...o)=>e.refresh&&e.refresh(...o)),"onUpdate:modelValue":a[5]||(a[5]=o=>e.config.audio=o)},[t("optgroup",Se,[(c(!0),u(b,null,$(e.audio,([o,i])=>(c(),u("option",{value:o},w(i),9,Ie))),256))]),Ce],544),[[B,e.config.audio]])])])])}var ke=C(_e,[["render",je],["__scopeId","data-v-1476b424"]]),De=e=>new Promise(a=>setTimeout(a,e)),Ae={components:{src:se,rArea:ve,drive:ke,start:Q},setup:()=>{}};(async()=>{for(;;)await G.auto_update.update_promise(),location.hash!=="#main/config"&&(location.hash="main/update"),await De(864e5)})();const Ve=W("\u5F55\u5236\u89C6\u9891");function Be(e,a){const o=S("src"),i=S("r-area"),v=S("drive"),d=S("start");return c(),u(b,null,[I(o),t("main",null,[I(i),I(v)]),I(d,null,{default:R(()=>[Ve]),_:1})],64)}var xe=C(Ae,[["render",Be],["__scopeId","data-v-5a120e20"]]);export{xe as default};
