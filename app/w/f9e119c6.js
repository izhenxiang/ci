import{a as f,r as u}from"./451c957c.js";import{c as d}from"./7720bbc7.js";import{i as w}from"./f055c35d.js";import{C as k}from"./299f4442.js";import"./1629a16e.js";import"./23614312.js";import"./513644be.js";import"./6ca76ff5.js";function g(){return new Worker("./crop.42bd6040.js",{type:"module"})}var a,o,i,m,t,c,n,p,e;({recbar:m}=w);c={audio:{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSourceId:await m.screen_source(),chromeMediaSource:"desktop"}}};o=()=>navigator.mediaDevices.getUserMedia(c);try{t=await o()}catch{delete c.audio,t=await o()}e=t.getVideoTracks()[0];d.area-1==0&&(p=new MediaStreamTrackProcessor({track:e}),e=new MediaStreamTrackGenerator({kind:"video"}),i=[p.readable,e.writable]);a=(await f()).getTracks();n=new MediaStream([e,...a]);k(()=>{var r,s;r=!!d.audio;for(s of a)s.enabled=r});u(n,()=>{new g().postMessage([...i,...JSON.parse(localStorage.area)],i)});
