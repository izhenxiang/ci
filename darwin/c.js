var M=Object.defineProperty;var B=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var E=(e,o,r)=>o in e?M(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,F=(e,o)=>{for(var r in o||(o={}))R.call(o,r)&&E(e,r,o[r]);if(B)for(var r of B(o))T.call(o,r)&&E(e,r,o[r]);return e};import{c as i,m as K}from"./1.js";import{i as N}from"./0.js";import{K as j,b as P,o as l,d as c,F as h,R as w,u as O,i as s,t as g,p as S,m as k,y as W,O as I,S as C,s as V,q as G,h as v,j as f,c as H,w as U,e as J,l as Q}from"./w.js";import{_ as b}from"./9.js";import{z as X}from"./_.js";import{b as Y}from"./3.js";import{s as Z}from"./i.js";import{v as ee}from"./s.js";import"./e.js";import"./..js";import"./-.js";import"./y.js";var p,q,m;({camera:p,main:q}=N);m=()=>{var e,o;if(gc(),document.hidden){localStorage.recing||p.x();return}switch(delete localStorage.recing,{src:e}=i,p.x(),e){case"screen":i.video="";break;default:if(!i.video){if({video:o}=localStorage,!o)return;i.video=o}e==="all"?p.circle(localStorage.\u4EBA\u50CF\u5C3A\u5BF8-0):p.rect(),setTimeout(()=>{document.hidden||q(!1)},1e3)}};document.addEventListener("visibilitychange",m);var oe={setup:()=>{var e,o,r,t,a,n;for(t=["all \u5C4F\u5E55+\u6444\u50CF\u5934\u5F55\u5236","screen \u5C4F\u5E55\u5F55\u5236","camera \u6444\u50CF\u5934\u5F55\u5236"],n=o=0,r=t.length;o<r;n=++o)e=t[n],a=e.indexOf(" "),t[n]=[e.slice(0,a),e.slice(1+a)];return j(()=>i.src,m),P(m),j(()=>i.video,d=>{var u;document.hidden||({src:u}=i,d?u==="screen"&&(i.src=localStorage.src||"all"):u!=="screen"&&(localStorage.src=i.src,i.src="screen"),m())}),{li:t,config:i,go:d=>{i.src=d}}}};const te=e=>(S("data-v-1eb91dd6"),e=e(),k(),e),re={class:"method"},ae=["onClick"],se=te(()=>s("b",{class:"ico"},null,-1));function ie(e,o){return l(),c("div",re,[(l(!0),c(h,null,w(e.li,([r,t])=>(l(),c("a",{class:O([r,e.config.src==r?"now":""]),onClick:a=>e.go(r)},[se,s("i",null,g(t),1)],10,ae))),256))])}var ne=b(oe,[["render",ie],["__scopeId","data-v-1eb91dd6"]]),de={setup:()=>({config:i,disabled:W(()=>i.src==="camera"),li:"\u6574\u4E2A\u684C\u9762 \u6307\u5B9A\u533A\u57DF".split(" ")})};const le=e=>(S("data-v-2a229f8c"),e=e(),k(),e),ce={class:"bk"},ue=le(()=>s("h2",null,"\u5F55\u5236\u533A\u57DF",-1)),_e={class:"select"},ve=["disabled"],fe=["value"];function pe(e,o){return l(),c("div",ce,[ue,s("div",_e,[I(s("select",{disabled:e.disabled,"onUpdate:modelValue":o[0]||(o[0]=r=>e.config.area=r)},[(l(!0),c(h,null,w(e.li,(r,t)=>(l(),c("option",{value:t},g(r),9,fe))),256))],8,ve),[[C,e.config.area]])])])}var me=b(de,[["render",pe],["__scopeId","data-v-2a229f8c"]]),he={components:{zAudio:X},setup:()=>{var e,o,r;return r={audio:V([]),video:V([])},{mediaDevices:e}=navigator,o=async()=>{var t,a,n,d,u,$,z,_,y,D,A;$={},z=await e.enumerateDevices();for(D of z)({kind:d,label:u,deviceId:t}=D),t==="default"&&(u=u.replace("Default - ","\u9ED8\u8BA4 ")),d.endsWith("input")&&(d=d.slice(0,-5),($[d]=$[d]||[]).push([t,u]));for(n in r)r[n].value=$[n]||[];for(n in r){if({value:y}=r[n],y.length){if(_=i[n],_){for(A of y)if([a]=A,_===a)return}_!==""&&(_=y[0][0])}else _=0;i[n]=_}},G(()=>{var t,a,n;a=["audio","video"];for(t of a)n=i[t],n&&(localStorage[t]=n)}),(async()=>await o())(),F({refresh:o,config:i,x:t=>{var a;a=i[t],a?a="":a=localStorage[t]||"",i[t]=a}},r)}};const x=e=>(S("data-v-e19e988e"),e=e(),k(),e),ge={class:"bk"},be=x(()=>s("h2",null,"\u8BBE\u5907\u8BBE\u7F6E",-1)),$e={class:"video"},ye={class:"select"},we={label:"\u8F93\u5165\u6E90"},Se=["value"],ke=x(()=>s("optgroup",{label:"\u2500\u2500\u2500"},[s("option",{value:""},"\u7981\u7528")],-1)),Ie={class:"audio"},Ce={class:"select"},Ve={label:"\u8F93\u5165\u6E90"},xe=["value"],ze=x(()=>s("optgroup",{label:"\u2500\u2500\u2500"},[s("option",{value:""},"\u7981\u7528")],-1));function De(e,o){const r=v("z-audio");return l(),c("div",ge,[be,s("li",$e,[s("label",{class:O({x:!e.config.video}),onClick:o[0]||(o[0]=t=>e.x("video")),for:"driveVideo"},null,2),s("div",ye,[I(s("select",{id:"driveVideo",onFocus:o[1]||(o[1]=(...t)=>e.refresh&&e.refresh(...t)),"onUpdate:modelValue":o[2]||(o[2]=t=>e.config.video=t)},[s("optgroup",we,[(l(!0),c(h,null,w(e.video,([t,a])=>(l(),c("option",{value:t},g(a),9,Se))),256))]),ke],544),[[C,e.config.video]])])]),s("li",Ie,[s("label",{onClick:o[3]||(o[3]=t=>e.x("audio")),for:"driveAudio"},[f(r)]),s("div",Ce,[I(s("select",{id:"driveAudio",onFocus:o[4]||(o[4]=(...t)=>e.refresh&&e.refresh(...t)),"onUpdate:modelValue":o[5]||(o[5]=t=>e.config.audio=t)},[s("optgroup",Ve,[(l(!0),c(h,null,w(e.audio,([t,a])=>(l(),c("option",{value:t},g(a),9,xe))),256))]),ze],544),[[C,e.config.audio]])])])])}var Ae=b(he,[["render",De],["__scopeId","data-v-e19e988e"]]),Be={components:{btn:Y}};const Ee=e=>(S("data-v-b0e482fa"),e=e(),k(),e),Fe=Ee(()=>s("b",null,null,-1));function je(e,o){const r=v("btn");return l(),H(r,null,{default:U(()=>[Fe,J(e.$slots,"default",{},void 0,!0)]),_:3})}var Ne=b(Be,[["render",je],["__scopeId","data-v-b0e482fa"]]),Oe=new Proxy(()=>{},{get:(e,o)=>{_paq.push(["trackEvent","\u70B9",o])}}),L;({auto_update:L}=N);var Ue={components:{src:ne,rArea:me,drive:Ae,btn:Ne},setup:()=>{var e,o;return e=V("\u5F00\u59CB\u5F55\u5236"),o=r=>{e.value=`\u8BF7\u6388\u6743${r}\u540E\u70B9\u6B64\u5F55\u5236`},{txt:e,start:async()=>{var r,t,a,n,d;n=Object.entries({audio:"\u9EA6\u514B\u98CE",video:"\u6444\u50CF\u5934"});for(d of n)if([t,r]=d,a=i[t],a)try{await K[t](a)}catch{o(r);return}if(i.src!=="camera")try{await ee()}catch{o("\u5F55\u5C4F");return}localStorage.recing=1,Oe.\u5F55,Z()}}}};(async()=>await L.update_promise())();function qe(e,o){const r=v("src"),t=v("r-area"),a=v("drive"),n=v("btn");return l(),c(h,null,[f(r),s("main",null,[f(t),f(a),f(n,{onClick:e.start},{default:U(()=>[Q(g(e.txt),1)]),_:1},8,["onClick"])])],64)}var Ze=b(Ue,[["render",qe],["__scopeId","data-v-dbde19ca"]]);export{Ze as default};
