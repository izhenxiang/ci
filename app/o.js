"use strict";exports[Symbol.toStringTag]="Module";var P=require("fs"),Ct=require("url"),Xn=require("http"),Kn=require("https"),Zn=require("domain"),Qn=require("util"),I=require("path"),gt=require("os"),k=require("electron"),tr=require("child_process"),er=require("stream"),nr=require("zlib");function rt(e){if(e&&e.__esModule)return e;var t={__proto__:null,[Symbol.toStringTag]:"Module"};return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var rr=rt(P),ir=rt(Ct),Te=rt(Xn),xe=rt(Kn),ar=rt(Zn),sr=rt(Qn),or=rt(tr),ur=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};var Zt=function(e,t){return Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Zt(e,t)};function oe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Zt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var y=function(){return y=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},y.apply(this,arguments)};function cr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function b(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(p){s(p)}}function f(c){try{u(r.throw(c))}catch(p){s(p)}}function u(c){c.done?a(c.value):i(c.value).then(o,f)}u((r=r.apply(e,t||[])).next())})}function E(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return f([u,c])}}function f(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function fr(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function yt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var V;(function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"})(V||(V={}));var Y;(function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"})(Y||(Y={}));exports.Severity=void 0;(function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"})(exports.Severity||(exports.Severity={}));(function(e){function t(n){switch(n){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}e.fromString=t})(exports.Severity||(exports.Severity={}));exports.Status=void 0;(function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"})(exports.Status||(exports.Status={}));(function(e){function t(n){return n>=200&&n<300?e.Success:n===429?e.RateLimit:n>=400&&n<500?e.Invalid:n>=500?e.Failed:e.Unknown}e.fromHttpCode=t})(exports.Status||(exports.Status={}));var st;(function(e){e.Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"})(st||(st={}));var Qt=function(e,t){return Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Qt(e,t)};function Z(e,t){Qt(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var d=function(){return d=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},d.apply(this,arguments)};function Ze(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function pr(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(p){s(p)}}function f(c){try{u(r.throw(c))}catch(p){s(p)}}function u(c){c.done?a(c.value):i(c.value).then(o,f)}u((r=r.apply(e,t||[])).next())})}function dr(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return f([u,c])}}function f(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function X(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function T(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(At(arguments[t]));return e}function Q(e){e.then(null,function(t){console.error(t)})}function ce(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return q(e,Error)}}function Pt(e){return Object.prototype.toString.call(e)==="[object String]"}function fe(e){return e===null||typeof e!="object"&&typeof e!="function"}function Dt(e){return Object.prototype.toString.call(e)==="[object Object]"}function lr(e){return typeof Event!="undefined"&&q(e,Event)}function Oe(e){return typeof Element!="undefined"&&q(e,Element)}function hr(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Et(e){return Boolean(e&&e.then&&typeof e.then=="function")}function vr(e){return Dt(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function q(e,t){try{return e instanceof t}catch{return!1}}function te(e,t){try{for(var n=e,r=5,i=80,a=[],s=0,o=0,f=" > ",u=f.length,c=void 0;n&&s++<r&&(c=mr(n,t),!(c==="html"||s>1&&o+a.length*u+c.length>=i));)a.push(c),o+=c.length,n=n.parentNode;return a.reverse().join(f)}catch{return"<unknown>"}}function mr(e,t){var n=e,r=[],i,a,s,o,f;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());var u=t?n.getAttribute(t):null;if(u)r.push("["+t+'="'+u+'"]');else if(n.id&&r.push("#"+n.id),i=n.className,i&&Pt(i))for(a=i.split(/\s+/),f=0;f<a.length;f++)r.push("."+a[f]);var c=["type","name","title","alt"];for(f=0;f<c.length;f++)s=c[f],o=n.getAttribute(s),o&&r.push("["+s+'="'+o+'"]');return r.join("")}var _r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?gr:yr);function gr(e,t){return e.__proto__=t,e}function yr(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}var w=function(e){Z(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return i.message=n,i.name=r.prototype.constructor.name,_r(i,r.prototype),i}return t}(Error),br=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,ct="Invalid Dsn",Ft=function(){function e(t){typeof t=="string"?this._fromString(t):this._fromComponents(t),this._validate()}return e.prototype.toString=function(t){t===void 0&&(t=!1);var n=this,r=n.host,i=n.path,a=n.pass,s=n.port,o=n.projectId,f=n.protocol,u=n.publicKey;return f+"://"+u+(t&&a?":"+a:"")+("@"+r+(s?":"+s:"")+"/"+(i&&i+"/")+o)},e.prototype._fromString=function(t){var n=br.exec(t);if(!n)throw new w(ct);var r=At(n.slice(1),6),i=r[0],a=r[1],s=r[2],o=s===void 0?"":s,f=r[3],u=r[4],c=u===void 0?"":u,p=r[5],h="",v=p,m=v.split("/");if(m.length>1&&(h=m.slice(0,-1).join("/"),v=m.pop()),v){var g=v.match(/^\d+/);g&&(v=g[0])}this._fromComponents({host:f,pass:o,path:h,projectId:v,port:c,protocol:i,publicKey:a})},e.prototype._fromComponents=function(t){"user"in t&&!("publicKey"in t)&&(t.publicKey=t.user),this.user=t.publicKey||"",this.protocol=t.protocol,this.publicKey=t.publicKey||"",this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},e.prototype._validate=function(){var t=this;if(["protocol","publicKey","host","projectId"].forEach(function(n){if(!t[n])throw new w(ct+": "+n+" missing")}),!this.projectId.match(/^\d+$/))throw new w(ct+": Invalid projectId "+this.projectId);if(this.protocol!=="http"&&this.protocol!=="https")throw new w(ct+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new w(ct+": Invalid port "+this.port)},e}();function St(){return Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"}function J(e,t){return e.require(t)}function Ut(e){var t;try{t=J(module,e)}catch{}try{var n=J(module,"process").cwd;t=J(module,n()+"/node_modules/"+e)}catch{}return t}function vt(e,t){return t===void 0&&(t=0),typeof e!="string"||t===0||e.length<=t?e:e.substr(0,t)+"..."}function Bt(e,t){var n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);var i=Math.max(t-60,0);i<5&&(i=0);var a=Math.min(i+140,r);return a>r-5&&(a=r),a===r&&(i=Math.max(a-140,0)),n=n.slice(i,a),i>0&&(n="'{snip} "+n),a<r&&(n+=" {snip}"),n}function mt(e,t){return Pt(e)?hr(t)?t.test(e):typeof t=="string"?e.indexOf(t)!==-1:!1:!1}var Er={};function A(){return St()?global:typeof window!="undefined"?window:typeof self!="undefined"?self:Er}function K(){var e=A(),t=e.crypto||e.msCrypto;if(t!==void 0&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=n[3]&4095|16384,n[4]=n[4]&16383|32768;var r=function(i){for(var a=i.toString(16);a.length<4;)a="0"+a;return a};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(i){var a=Math.random()*16|0,s=i==="x"?a:a&3|8;return s.toString(16)})}function at(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function ot(e){var t=A(),n=["debug","info","warn","error","log","assert"];if(!("console"in t))return e();var r=t.console,i={};n.forEach(function(s){s in t.console&&r[s].__sentry_original__&&(i[s]=r[s],r[s]=r[s].__sentry_original__)});var a=e();return Object.keys(i).forEach(function(s){r[s]=i[s]}),a}function Sr(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function wr(e,t){t===void 0&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach(function(n){e.exception.values[0].mechanism[n]=t[n]})}catch{}}var Tr=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function Qe(e){var t=e.match(Tr)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}}var ke=60*1e3;function xr(e,t){if(!t)return ke;var n=parseInt(""+t,10);if(!isNaN(n))return n*1e3;var r=Date.parse(""+t);return isNaN(r)?ke:r-e}function Or(e,t,n){n===void 0&&(n=5);var r=t.lineno||0,i=e.length,a=Math.max(Math.min(i,r-1),0);t.pre_context=e.slice(Math.max(0,a-n),a).map(function(s){return Bt(s,0)}),t.context_line=Bt(e[Math.min(i-1,a)],t.colno||0),t.post_context=e.slice(Math.min(a+1,i),a+1+n).map(function(s){return Bt(s,0)})}var tt=A(),Wt="Sentry Logger ",kr=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!this._enabled||ot(function(){tt.console.log(Wt+"[Log]: "+t.join(" "))})},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!this._enabled||ot(function(){tt.console.warn(Wt+"[Warn]: "+t.join(" "))})},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!this._enabled||ot(function(){tt.console.error(Wt+"[Error]: "+t.join(" "))})},e}();tt.__SENTRY__=tt.__SENTRY__||{};var l=tt.__SENTRY__.logger||(tt.__SENTRY__.logger=new kr),Ir=function(){function e(){this._hasWeakSet=typeof WeakSet=="function",this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(t){if(this._hasWeakSet)return this._inner.has(t)?!0:(this._inner.add(t),!1);for(var n=0;n<this._inner.length;n++){var r=this._inner[n];if(r===t)return!0}return this._inner.push(t),!1},e.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var n=0;n<this._inner.length;n++)if(this._inner[n]===t){this._inner.splice(n,1);break}},e}(),zt="<anonymous>";function tn(e){try{return!e||typeof e!="function"?zt:e.name||zt}catch{return zt}}function C(e,t,n){if(t in e){var r=e[t],i=n(r);if(typeof i=="function")try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch{}e[t]=i}}function Nr(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function en(e){if(ce(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(lr(e)){var i=e,a={};a.type=i.type;try{a.target=Oe(i.target)?te(i.target):Object.prototype.toString.call(i.target)}catch{a.target="<unknown>"}try{a.currentTarget=Oe(i.currentTarget)?te(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch{a.currentTarget="<unknown>"}typeof CustomEvent!="undefined"&&q(e,CustomEvent)&&(a.detail=i.detail);for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i);return a}return e}function Rr(e){return~-encodeURI(e).split(/%..|./).length}function Cr(e){return Rr(JSON.stringify(e))}function nn(e,t,n){t===void 0&&(t=3),n===void 0&&(n=100*1024);var r=ht(e,t);return Cr(r)>n?nn(e,t-1,n):r}function Pr(e){var t=Object.prototype.toString.call(e);if(typeof e=="string")return e;if(t==="[object Object]")return"[Object]";if(t==="[object Array]")return"[Array]";var n=rn(e);return fe(n)?n:t}function rn(e,t){return t==="domain"&&e&&typeof e=="object"&&e._events?"[Domain]":t==="domainEmitter"?"[DomainEmitter]":typeof global!="undefined"&&e===global?"[Global]":typeof window!="undefined"&&e===window?"[Window]":typeof document!="undefined"&&e===document?"[Document]":vr(e)?"[SyntheticEvent]":typeof e=="number"&&e!==e?"[NaN]":e===void 0?"[undefined]":typeof e=="function"?"[Function: "+tn(e)+"]":typeof e=="symbol"?"["+String(e)+"]":typeof e=="bigint"?"[BigInt: "+String(e)+"]":e}function an(e,t,n,r){if(n===void 0&&(n=1/0),r===void 0&&(r=new Ir),n===0)return Pr(t);if(t!=null&&typeof t.toJSON=="function")return t.toJSON();var i=rn(t,e);if(fe(i))return i;var a=en(t),s=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var o in a)!Object.prototype.hasOwnProperty.call(a,o)||(s[o]=an(o,a[o],n-1,r));return r.unmemoize(t),s}function ht(e,t){try{return JSON.parse(JSON.stringify(e,function(n,r){return an(n,r,t)}))}catch{return"**non-serializable**"}}function Mr(e,t){t===void 0&&(t=40);var n=Object.keys(en(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return vt(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:vt(i,t)}return""}function G(e){var t,n;if(Dt(e)){var r=e,i={};try{for(var a=X(Object.keys(r)),s=a.next();!s.done;s=a.next()){var o=s.value;typeof r[o]!="undefined"&&(i[o]=G(r[o]))}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(G):e}function Ar(){if(!("fetch"in A()))return!1;try{return new Headers,new Request(""),new Response,!0}catch{return!1}}function Ie(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Dr(){if(!Ar())return!1;var e=A();if(Ie(e.fetch))return!0;var t=!1,n=e.document;if(n&&typeof n.createElement=="function")try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=Ie(r.contentWindow.fetch)),n.head.removeChild(r)}catch(i){l.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return t}function Fr(){var e=A(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}var x=A(),_t={},Ne={};function Ur(e){if(!Ne[e])switch(Ne[e]=!0,e){case"console":jr();break;case"dom":$r();break;case"xhr":Br();break;case"fetch":Lr();break;case"history":Wr();break;case"error":Jr();break;case"unhandledrejection":Vr();break;default:l.warn("unknown instrumentation type:",e)}}function bt(e){!e||typeof e.type!="string"||typeof e.callback!="function"||(_t[e.type]=_t[e.type]||[],_t[e.type].push(e.callback),Ur(e.type))}function U(e,t){var n,r;if(!(!e||!_t[e]))try{for(var i=X(_t[e]||[]),a=i.next();!a.done;a=i.next()){var s=a.value;try{s(t)}catch(o){l.error(`Error while triggering instrumentation handler.
Type: `+e+`
Name: `+tn(s)+`
Error: `+o)}}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function jr(){"console"in x&&["debug","info","warn","error","log","assert"].forEach(function(e){e in x.console&&C(x.console,e,function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];U("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,x.console,n)}})})}function Lr(){!Dr()||C(x,"fetch",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:qr(t),url:Hr(t)},startTimestamp:Date.now()};return U("fetch",d({},r)),e.apply(x,t).then(function(i){return U("fetch",d(d({},r),{endTimestamp:Date.now(),response:i})),i},function(i){throw U("fetch",d(d({},r),{endTimestamp:Date.now(),error:i})),i})}})}function qr(e){return e===void 0&&(e=[]),"Request"in x&&q(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function Hr(e){return e===void 0&&(e=[]),typeof e[0]=="string"?e[0]:"Request"in x&&q(e[0],Request)?e[0].url:String(e[0])}function Br(){if("XMLHttpRequest"in x){var e=[],t=[],n=XMLHttpRequest.prototype;C(n,"open",function(r){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=this,o=i[1];s.__sentry_xhr__={method:Pt(i[0])?i[0].toUpperCase():i[0],url:i[1]},Pt(o)&&s.__sentry_xhr__.method==="POST"&&o.match(/sentry_key/)&&(s.__sentry_own_request__=!0);var f=function(){if(s.readyState===4){try{s.__sentry_xhr__&&(s.__sentry_xhr__.status_code=s.status)}catch{}try{var u=e.indexOf(s);if(u!==-1){e.splice(u);var c=t.splice(u)[0];s.__sentry_xhr__&&c[0]!==void 0&&(s.__sentry_xhr__.body=c[0])}}catch{}U("xhr",{args:i,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:s})}};return"onreadystatechange"in s&&typeof s.onreadystatechange=="function"?C(s,"onreadystatechange",function(u){return function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return f(),u.apply(s,c)}}):s.addEventListener("readystatechange",f),r.apply(s,i)}}),C(n,"send",function(r){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return e.push(this),t.push(i),U("xhr",{args:i,startTimestamp:Date.now(),xhr:this}),r.apply(this,i)}})}}var Tt;function Wr(){if(!Fr())return;var e=x.onpopstate;x.onpopstate=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=x.location.href,a=Tt;if(Tt=i,U("history",{from:a,to:i}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=r.length>2?r[2]:void 0;if(a){var s=Tt,o=String(a);Tt=o,U("history",{from:s,to:o})}return n.apply(this,r)}}C(x.history,"pushState",t),C(x.history,"replaceState",t)}var zr=1e3,xt,Ot;function Yr(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch{}return!1}function Gr(e){if(e.type!=="keypress")return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch{}return!0}function Re(e,t){return t===void 0&&(t=!1),function(n){if(!(!n||Ot===n)&&!Gr(n)){var r=n.type==="keypress"?"input":n.type;xt===void 0?(e({event:n,name:r,global:t}),Ot=n):Yr(Ot,n)&&(e({event:n,name:r,global:t}),Ot=n),clearTimeout(xt),xt=x.setTimeout(function(){xt=void 0},zr)}}}function $r(){if("document"in x){var e=U.bind(null,"dom"),t=Re(e,!0);x.document.addEventListener("click",t,!1),x.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(function(n){var r=x[n]&&x[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(C(r,"addEventListener",function(i){return function(a,s,o){if(a==="click"||a=="keypress")try{var f=this,u=f.__sentry_instrumentation_handlers__=f.__sentry_instrumentation_handlers__||{},c=u[a]=u[a]||{refCount:0};if(!c.handler){var p=Re(e);c.handler=p,i.call(this,a,p,o)}c.refCount+=1}catch{}return i.call(this,a,s,o)}}),C(r,"removeEventListener",function(i){return function(a,s,o){if(a==="click"||a=="keypress")try{var f=this,u=f.__sentry_instrumentation_handlers__||{},c=u[a];c&&(c.refCount-=1,c.refCount<=0&&(i.call(this,a,c.handler,o),c.handler=void 0,delete u[a]),Object.keys(u).length===0&&delete f.__sentry_instrumentation_handlers__)}catch{}return i.call(this,a,s,o)}}))})}}var Yt=null;function Jr(){Yt=x.onerror,x.onerror=function(e,t,n,r,i){return U("error",{column:r,error:i,line:n,msg:e,url:t}),Yt?Yt.apply(this,arguments):!1}}var Gt=null;function Vr(){Gt=x.onunhandledrejection,x.onunhandledrejection=function(e){return U("unhandledrejection",e),Gt?Gt.apply(this,arguments):!0}}var Xr=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function sn(e){var t=Xr.exec(e);return t?t.slice(1):[]}function on(e){var t=sn(e),n=t[0],r=t[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)}function Kr(e,t){var n=sn(e)[2];return t&&n.substr(t.length*-1)===t&&(n=n.substr(0,n.length-t.length)),n}var W;(function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"})(W||(W={}));var O=function(){function e(t){var n=this;this._state=W.PENDING,this._handlers=[],this._resolve=function(r){n._setResult(W.RESOLVED,r)},this._reject=function(r){n._setResult(W.REJECTED,r)},this._setResult=function(r,i){if(n._state===W.PENDING){if(Et(i)){i.then(n._resolve,n._reject);return}n._state=r,n._value=i,n._executeHandlers()}},this._attachHandler=function(r){n._handlers=n._handlers.concat(r),n._executeHandlers()},this._executeHandlers=function(){if(n._state!==W.PENDING){var r=n._handlers.slice();n._handlers=[],r.forEach(function(i){i.done||(n._state===W.RESOLVED&&i.onfulfilled&&i.onfulfilled(n._value),n._state===W.REJECTED&&i.onrejected&&i.onrejected(n._value),i.done=!0)})}};try{t(this._resolve,this._reject)}catch(r){this._reject(r)}}return e.resolve=function(t){return new e(function(n){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.all=function(t){return new e(function(n,r){if(!Array.isArray(t)){r(new TypeError("Promise.all requires an array as input."));return}if(t.length===0){n([]);return}var i=t.length,a=[];t.forEach(function(s,o){e.resolve(s).then(function(f){a[o]=f,i-=1,i===0&&n(a)}).then(null,r)})})},e.prototype.then=function(t,n){var r=this;return new e(function(i,a){r._attachHandler({done:!1,onfulfilled:function(s){if(!t){i(s);return}try{i(t(s));return}catch(o){a(o);return}},onrejected:function(s){if(!n){a(s);return}try{i(n(s));return}catch(o){a(o);return}}})})},e.prototype.catch=function(t){return this.then(function(n){return n},t)},e.prototype.finally=function(t){var n=this;return new e(function(r,i){var a,s;return n.then(function(o){s=!1,a=o,t&&t()},function(o){s=!0,a=o,t&&t()}).then(function(){if(s){i(a);return}r(a)})})},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),un=function(){function e(t){this._limit=t,this._buffer=[]}return e.prototype.isReady=function(){return this._limit===void 0||this.length()<this._limit},e.prototype.add=function(t){var n=this;return this.isReady()?(this._buffer.indexOf(t)===-1&&this._buffer.push(t),t.then(function(){return n.remove(t)}).then(null,function(){return n.remove(t).then(null,function(){})}),t):O.reject(new w("Not adding Promise due to buffer limit reached."))},e.prototype.remove=function(t){var n=this._buffer.splice(this._buffer.indexOf(t),1)[0];return n},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(t){var n=this;return new O(function(r){var i=setTimeout(function(){t&&t>0&&r(!1)},t);O.all(n._buffer).then(function(){clearTimeout(i),r(!0)}).then(null,function(){r(!0)})})},e}(),ee={nowSeconds:function(){return Date.now()/1e3}};function Zr(){var e=A().performance;if(!(!e||!e.now)){var t=Date.now()-e.now();return{now:function(){return e.now()},timeOrigin:t}}}function Qr(){try{var e=J(module,"perf_hooks");return e.performance}catch{return}}var $t=St()?Qr():Zr(),Ce=$t===void 0?ee:{nowSeconds:function(){return($t.timeOrigin+$t.now())/1e3}},pe=ee.nowSeconds.bind(ee),ne=Ce.nowSeconds.bind(Ce),et=ne,ft=function(){var e=A().performance;if(!(!e||!e.now)){var t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,a=i<t,s=e.timing&&e.timing.navigationStart,o=typeof s=="number",f=o?Math.abs(s+n-r):t,u=f<t;return a||u?i<=f?e.timeOrigin:s:r}}(),Pe=100,L=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=T(t._breadcrumbs),n._tags=d({},t._tags),n._extra=d({},t._extra),n._contexts=d({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=T(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},e.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},e.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(t){return this._requestSession=t,this},e.prototype.setTags=function(t){return this._tags=d(d({},this._tags),t),this._notifyScopeListeners(),this},e.prototype.setTag=function(t,n){var r;return this._tags=d(d({},this._tags),(r={},r[t]=n,r)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(t){return this._extra=d(d({},this._extra),t),this._notifyScopeListeners(),this},e.prototype.setExtra=function(t,n){var r;return this._extra=d(d({},this._extra),(r={},r[t]=n,r)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},e.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(t){return this.setTransactionName(t)},e.prototype.setContext=function(t,n){var r;return n===null?delete this._contexts[t]:this._contexts=d(d({},this._contexts),(r={},r[t]=n,r)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var t,n,r,i,a=this.getSpan();if((t=a)===null||t===void 0?void 0:t.transaction)return(n=a)===null||n===void 0?void 0:n.transaction;if((i=(r=a)===null||r===void 0?void 0:r.spanRecorder)===null||i===void 0?void 0:i.spans[0])return a.spanRecorder.spans[0]},e.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if(typeof t=="function"){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=d(d({},this._tags),t._tags),this._extra=d(d({},this._extra),t._extra),this._contexts=d(d({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):Dt(t)&&(t=t,this._tags=d(d({},this._tags),t.tags),this._extra=d(d({},this._extra),t.extra),this._contexts=d(d({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(t,n){var r=typeof n=="number"?Math.min(n,Pe):Pe;if(r<=0)return this;var i=d({timestamp:pe()},t);return this._breadcrumbs=T(this._breadcrumbs,[i]).slice(-r),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(t,n){var r;if(this._extra&&Object.keys(this._extra).length&&(t.extra=d(d({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=d(d({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=d(d({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=d(d({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=d({trace:this._span.getTraceContext()},t.contexts);var i=(r=this._span.transaction)===null||r===void 0?void 0:r.name;i&&(t.tags=d({transaction:i},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=T(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(T(cn(),this._eventProcessors),t,n)},e.prototype._notifyEventProcessors=function(t,n,r,i){var a=this;return i===void 0&&(i=0),new O(function(s,o){var f=t[i];if(n===null||typeof f!="function")s(n);else{var u=f(d({},n),r);Et(u)?u.then(function(c){return a._notifyEventProcessors(t,c,r,i+1).then(s)}).then(null,o):a._notifyEventProcessors(t,u,r,i+1).then(s).then(null,o)}})},e.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(n){n(t)}),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},e}();function cn(){var e=A();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function jt(e){cn().push(e)}var ti=function(){function e(t){this.errors=0,this.sid=K(),this.duration=0,this.status=V.Ok,this.init=!0,this.ignoreDuration=!1;var n=ne();this.timestamp=n,this.started=n,t&&this.update(t)}return e.prototype.update=function(t){if(t===void 0&&(t={}),t.user&&(t.user.ip_address&&(this.ipAddress=t.user.ip_address),t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||ne(),t.ignoreDuration&&(this.ignoreDuration=t.ignoreDuration),t.sid&&(this.sid=t.sid.length===32?t.sid:K()),t.init!==void 0&&(this.init=t.init),t.did&&(this.did=""+t.did),typeof t.started=="number"&&(this.started=t.started),this.ignoreDuration)this.duration=void 0;else if(typeof t.duration=="number")this.duration=t.duration;else{var n=this.timestamp-this.started;this.duration=n>=0?n:0}t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),t.ipAddress&&(this.ipAddress=t.ipAddress),t.userAgent&&(this.userAgent=t.userAgent),typeof t.errors=="number"&&(this.errors=t.errors),t.status&&(this.status=t.status)},e.prototype.close=function(t){t?this.update({status:t}):this.status===V.Ok?this.update({status:V.Exited}):this.update()},e.prototype.toJSON=function(){return G({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:G({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),de=4,ei=100,wt=function(){function e(t,n,r){n===void 0&&(n=new L),r===void 0&&(r=de),this._version=r,this._stack=[{}],this.getStackTop().scope=n,this.bindClient(t)}return e.prototype.isOlderThan=function(t){return this._version<t},e.prototype.bindClient=function(t){var n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()},e.prototype.pushScope=function(){var t=L.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},e.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},e.prototype.withScope=function(t){var n=this.pushScope();try{t(n)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(t,n){var r=this._lastEventId=K(),i=n;if(!n){var a=void 0;try{throw new Error("Sentry syntheticException")}catch(s){a=s}i={originalException:t,syntheticException:a}}return this._invokeClient("captureException",t,d(d({},i),{event_id:r})),r},e.prototype.captureMessage=function(t,n,r){var i=this._lastEventId=K(),a=r;if(!r){var s=void 0;try{throw new Error(t)}catch(o){s=o}a={originalException:t,syntheticException:s}}return this._invokeClient("captureMessage",t,n,d(d({},a),{event_id:i})),i},e.prototype.captureEvent=function(t,n){var r=this._lastEventId=K();return this._invokeClient("captureEvent",t,d(d({},n),{event_id:r})),r},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(t,n){var r=this.getStackTop(),i=r.scope,a=r.client;if(!(!i||!a)){var s=a.getOptions&&a.getOptions()||{},o=s.beforeBreadcrumb,f=o===void 0?null:o,u=s.maxBreadcrumbs,c=u===void 0?ei:u;if(!(c<=0)){var p=pe(),h=d({timestamp:p},t),v=f?ot(function(){return f(h,n)}):h;v!==null&&i.addBreadcrumb(v,c)}}},e.prototype.setUser=function(t){var n=this.getScope();n&&n.setUser(t)},e.prototype.setTags=function(t){var n=this.getScope();n&&n.setTags(t)},e.prototype.setExtras=function(t){var n=this.getScope();n&&n.setExtras(t)},e.prototype.setTag=function(t,n){var r=this.getScope();r&&r.setTag(t,n)},e.prototype.setExtra=function(t,n){var r=this.getScope();r&&r.setExtra(t,n)},e.prototype.setContext=function(t,n){var r=this.getScope();r&&r.setContext(t,n)},e.prototype.configureScope=function(t){var n=this.getStackTop(),r=n.scope,i=n.client;r&&i&&t(r)},e.prototype.run=function(t){var n=Me(this);try{t(this)}finally{Me(n)}},e.prototype.getIntegration=function(t){var n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return l.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},e.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},e.prototype.startTransaction=function(t,n){return this._callExtensionMethod("startTransaction",t,n)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(t){if(t===void 0&&(t=!1),t)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var t,n,r,i,a;(r=(n=(t=this.getStackTop())===null||t===void 0?void 0:t.scope)===null||n===void 0?void 0:n.getSession())===null||r===void 0||r.close(),this._sendSessionUpdate(),(a=(i=this.getStackTop())===null||i===void 0?void 0:i.scope)===null||a===void 0||a.setSession()},e.prototype.startSession=function(t){var n=this.getStackTop(),r=n.scope,i=n.client,a=i&&i.getOptions()||{},s=a.release,o=a.environment,f=new ti(d(d({release:s,environment:o},r&&{user:r.getUser()}),t));if(r){var u=r.getSession&&r.getSession();u&&u.status===V.Ok&&u.update({status:V.Exited}),this.endSession(),r.setSession(f)}return f},e.prototype._sendSessionUpdate=function(){var t=this.getStackTop(),n=t.scope,r=t.client;if(!!n){var i=n.getSession&&n.getSession();i&&r&&r.captureSession&&r.captureSession(i)}},e.prototype._invokeClient=function(t){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=this.getStackTop(),s=a.scope,o=a.client;o&&o[t]&&(n=o)[t].apply(n,T(r,[s]))},e.prototype._callExtensionMethod=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=it(),a=i.__SENTRY__;if(a&&a.extensions&&typeof a.extensions[t]=="function")return a.extensions[t].apply(this,n);l.warn("Extension method "+t+" couldn't be found, doing nothing.")},e}();function it(){var e=A();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function Me(e){var t=it(),n=z(t);return le(t,e),n}function S(){var e=it();return(!fn(e)||z(e).isOlderThan(de))&&le(e,new wt),St()?ni(e):z(e)}function ni(e){var t,n,r;try{var i=(r=(n=(t=it().__SENTRY__)===null||t===void 0?void 0:t.extensions)===null||n===void 0?void 0:n.domain)===null||r===void 0?void 0:r.active;if(!i)return z(e);if(!fn(i)||z(i).isOlderThan(de)){var a=z(e).getStackTop();le(i,new wt(a.client,L.clone(a.scope)))}return z(i)}catch{return z(e)}}function fn(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function z(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new wt),e.__SENTRY__.hub}function le(e,t){return e?(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0):!1}var ri=function(){function e(t,n){var r=this;this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._transport=t,this._intervalId=setInterval(function(){return r.flush()},this.flushTimeout*1e3),this._sessionAttrs=n}return e.prototype.sendSessionAggregates=function(t){if(!this._transport.sendSession){l.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(t).then(null,function(n){l.error("Error while sending session: "+n)})},e.prototype.flush=function(){var t=this.getSessionAggregates();t.aggregates.length!==0&&(this._pendingAggregates={},this.sendSessionAggregates(t))},e.prototype.getSessionAggregates=function(){var t=this,n=Object.keys(this._pendingAggregates).map(function(i){return t._pendingAggregates[parseInt(i)]}),r={attrs:this._sessionAttrs,aggregates:n};return G(r)},e.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},e.prototype.incrementSessionStatusCount=function(){var t,n;if(!!this._isEnabled){var r=S().getScope(),i=(t=r)===null||t===void 0?void 0:t.getRequestSession();i&&i.status&&(this._incrementSessionStatusCount(i.status,new Date),(n=r)===null||n===void 0||n.setRequestSession(void 0))}},e.prototype._incrementSessionStatusCount=function(t,n){var r=new Date(n).setSeconds(0,0);this._pendingAggregates[r]=this._pendingAggregates[r]||{};var i=this._pendingAggregates[r];switch(i.started||(i.started=new Date(r).toISOString()),t){case Y.Errored:return i.errored=(i.errored||0)+1,i.errored;case Y.Ok:return i.exited=(i.exited||0)+1,i.exited;case Y.Crashed:return i.crashed=(i.crashed||0)+1,i.crashed}},e}();function D(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=S();if(r&&r[e])return r[e].apply(r,T(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function ii(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(r){n=r}return D("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function pn(e,t){var n;try{throw new Error(e)}catch(a){n=a}var r=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return D("captureMessage",e,r,d({originalException:e,syntheticException:n},i))}function dn(e){return D("captureEvent",e)}function ln(e){D("configureScope",e)}function hn(e){D("addBreadcrumb",e)}function ai(e,t){D("setContext",e,t)}function si(e){D("setExtras",e)}function oi(e){D("setTags",e)}function ui(e,t){D("setExtra",e,t)}function ci(e,t){D("setTag",e,t)}function fi(e){D("setUser",e)}function pi(e){D("withScope",e)}function di(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];D.apply(void 0,T(["_invokeClient",e],t))}var Ae="7",vn=function(){function e(t,n,r){n===void 0&&(n={}),this.dsn=t,this._dsnObject=new Ft(t),this.metadata=n,this._tunnel=r}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){var t=this.getDsn(),n=t.protocol?t.protocol+":":"",r=t.port?":"+t.port:"";return n+"//"+t.host+r+(t.path?"/"+t.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var t=this.getDsn();return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},e.prototype.getRequestHeaders=function(t,n){var r=this.getDsn(),i=["Sentry sentry_version="+Ae];return i.push("sentry_client="+t+"/"+n),i.push("sentry_key="+r.publicKey),r.pass&&i.push("sentry_secret="+r.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},e.prototype.getReportDialogEndpoint=function(t){t===void 0&&(t={});var n=this.getDsn(),r=this.getBaseApiEndpoint()+"embed/error-page/",i=[];i.push("dsn="+n.toString());for(var a in t)if(a!=="dsn")if(a==="user"){if(!t.user)continue;t.user.name&&i.push("name="+encodeURIComponent(t.user.name)),t.user.email&&i.push("email="+encodeURIComponent(t.user.email))}else i.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return i.length?r+"?"+i.join("&"):r},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(t){if(this._tunnel)return this._tunnel;var n=this.getBaseApiEndpoint(),r=this.getDsn();return""+n+r.projectId+"/"+t+"/"},e.prototype._encodedAuth=function(){var t=this.getDsn(),n={sentry_key:t.publicKey,sentry_version:Ae};return Nr(n)},e}(),De=[];function Fe(e){return e.reduce(function(t,n){return t.every(function(r){return n.name!==r.name})&&t.push(n),t},[])}function li(e){var t=e.defaultIntegrations&&T(e.defaultIntegrations)||[],n=e.integrations,r=T(Fe(t));Array.isArray(n)?r=T(r.filter(function(s){return n.every(function(o){return o.name!==s.name})}),Fe(n)):typeof n=="function"&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map(function(s){return s.name}),a="Debug";return i.indexOf(a)!==-1&&r.push.apply(r,T(r.splice(i.indexOf(a),1))),r}function hi(e){De.indexOf(e.name)===-1&&(e.setupOnce(jt,S),De.push(e.name),l.log("Integration installed: "+e.name))}function vi(e){var t={};return li(e).forEach(function(n){t[n.name]=n,hi(n)}),t}var mn=function(){function e(t,n){this._integrations={},this._processing=0,this._backend=new t(n),this._options=n,n.dsn&&(this._dsn=new Ft(n.dsn))}return e.prototype.captureException=function(t,n,r){var i=this,a=n&&n.event_id;return this._process(this._getBackend().eventFromException(t,n).then(function(s){return i._captureEvent(s,n,r)}).then(function(s){a=s})),a},e.prototype.captureMessage=function(t,n,r,i){var a=this,s=r&&r.event_id,o=fe(t)?this._getBackend().eventFromMessage(String(t),n,r):this._getBackend().eventFromException(t,r);return this._process(o.then(function(f){return a._captureEvent(f,r,i)}).then(function(f){s=f})),s},e.prototype.captureEvent=function(t,n,r){var i=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(function(a){i=a})),i},e.prototype.captureSession=function(t){typeof t.release!="string"?l.warn("Discarded session because of missing or non-string release"):(this._sendSession(t),t.update({init:!1}))},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(t){var n=this;return this._isClientProcessing(t).then(function(r){return n._getBackend().getTransport().close(t).then(function(i){return r&&i})})},e.prototype.close=function(t){var n=this;return this.flush(t).then(function(r){return n.getOptions().enabled=!1,r})},e.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=vi(this._options))},e.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch{return l.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(t,n){var r,i,a=!1,s=!1,o,f=n.exception&&n.exception.values;if(f){s=!0;try{for(var u=X(f),c=u.next();!c.done;c=u.next()){var p=c.value,h=p.mechanism;if(h&&h.handled===!1){a=!0;break}}}catch(_){r={error:_}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}var v=n.user;if(!t.userAgent){var m=n.request?n.request.headers:{};for(var g in m)if(g.toLowerCase()==="user-agent"){o=m[g];break}}t.update(d(d({},a&&{status:V.Crashed}),{user:v,userAgent:o,errors:t.errors+Number(s||a)})),this.captureSession(t)},e.prototype._sendSession=function(t){this._getBackend().sendSession(t)},e.prototype._isClientProcessing=function(t){var n=this;return new O(function(r){var i=0,a=1,s=setInterval(function(){n._processing==0?(clearInterval(s),r(!0)):(i+=a,t&&i>=t&&(clearInterval(s),r(!1)))},a)})},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},e.prototype._prepareEvent=function(t,n,r){var i=this,a=this.getOptions().normalizeDepth,s=a===void 0?3:a,o=d(d({},t),{event_id:t.event_id||(r&&r.event_id?r.event_id:K()),timestamp:t.timestamp||pe()});this._applyClientOptions(o),this._applyIntegrationsMetadata(o);var f=n;r&&r.captureContext&&(f=L.clone(f).update(r.captureContext));var u=O.resolve(o);return f&&(u=f.applyToEvent(o,r)),u.then(function(c){return typeof s=="number"&&s>0?i._normalizeEvent(c,s):c})},e.prototype._normalizeEvent=function(t,n){if(!t)return null;var r=d(d(d(d(d({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(function(i){return d(d({},i),i.data&&{data:ht(i.data,n)})})}),t.user&&{user:ht(t.user,n)}),t.contexts&&{contexts:ht(t.contexts,n)}),t.extra&&{extra:ht(t.extra,n)});return t.contexts&&t.contexts.trace&&(r.contexts.trace=t.contexts.trace),r},e.prototype._applyClientOptions=function(t){var n=this.getOptions(),r=n.environment,i=n.release,a=n.dist,s=n.maxValueLength,o=s===void 0?250:s;"environment"in t||(t.environment="environment"in n?r:"production"),t.release===void 0&&i!==void 0&&(t.release=i),t.dist===void 0&&a!==void 0&&(t.dist=a),t.message&&(t.message=vt(t.message,o));var f=t.exception&&t.exception.values&&t.exception.values[0];f&&f.value&&(f.value=vt(f.value,o));var u=t.request;u&&u.url&&(u.url=vt(u.url,o))},e.prototype._applyIntegrationsMetadata=function(t){var n=Object.keys(this._integrations);n.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=T(t.sdk.integrations||[],n))},e.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},e.prototype._captureEvent=function(t,n,r){return this._processEvent(t,n,r).then(function(i){return i.event_id},function(i){l.error(i)})},e.prototype._processEvent=function(t,n,r){var i=this,a=this.getOptions(),s=a.beforeSend,o=a.sampleRate;if(!this._isEnabled())return O.reject(new w("SDK not enabled, will not send event."));var f=t.type==="transaction";return!f&&typeof o=="number"&&Math.random()>o?O.reject(new w("Discarding event because it's not included in the random sample (sampling rate = "+o+")")):this._prepareEvent(t,r,n).then(function(u){if(u===null)throw new w("An event processor returned null, will not send event.");var c=n&&n.data&&n.data.__sentry__===!0;if(c||f||!s)return u;var p=s(u,n);if(typeof p=="undefined")throw new w("`beforeSend` method has to return `null` or a valid event.");return Et(p)?p.then(function(h){return h},function(h){throw new w("beforeSend rejected with "+h)}):p}).then(function(u){if(u===null)throw new w("`beforeSend` returned `null`, will not send event.");var c=r&&r.getSession&&r.getSession();return!f&&c&&i._updateSessionFromEvent(c,u),i._sendEvent(u),u}).then(null,function(u){throw u instanceof w?u:(i.captureException(u,{data:{__sentry__:!0},originalException:u}),new w(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+u))})},e.prototype._process=function(t){var n=this;this._processing+=1,t.then(function(r){return n._processing-=1,r},function(r){return n._processing-=1,r})},e}(),mi=function(){function e(){}return e.prototype.sendEvent=function(t){return O.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:exports.Status.Skipped})},e.prototype.close=function(t){return O.resolve(!0)},e}(),_n=function(){function e(t){this._options=t,this._options.dsn||l.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(t,n){throw new w("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(t,n,r){throw new w("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,function(n){l.error("Error while sending event: "+n)})},e.prototype.sendSession=function(t){if(!this._transport.sendSession){l.warn("Dropping session because custom transport doesn't implement sendSession");return}this._transport.sendSession(t).then(null,function(n){l.error("Error while sending session: "+n)})},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new mi},e}();function gn(e){if(!(!e.metadata||!e.metadata.sdk)){var t=e.metadata.sdk,n=t.name,r=t.version;return{name:n,version:r}}}function _i(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=T(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=T(e.sdk.packages||[],t.packages||[])),e}function yn(e,t){var n=gn(t),r=JSON.stringify(d(d({sent_at:new Date().toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()})),i="aggregates"in e?"sessions":"session",a=JSON.stringify({type:i});return{body:r+`
`+a+`
`+JSON.stringify(e),type:i,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function bn(e,t){var n=gn(t),r=e.type||"event",i=r==="transaction"||t.forceEnvelope(),a=e.debug_meta||{},s=a.transactionSampling,o=Ze(a,["transactionSampling"]),f=s||{},u=f.method,c=f.rate;Object.keys(o).length===0?delete e.debug_meta:e.debug_meta=o;var p={body:JSON.stringify(n?_i(e,t.metadata.sdk):e),type:r,url:i?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(i){var h=JSON.stringify(d(d({event_id:e.event_id,sent_at:new Date().toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()})),v=JSON.stringify({type:r,sample_rates:[{id:u,rate:c}]}),m=h+`
`+v+`
`+p.body;p.body=m}return p}function gi(e,t){var n;t.debug===!0&&l.enable();var r=S();(n=r.getScope())===null||n===void 0||n.update(t.initialScope);var i=new e(t);r.bindClient(i)}var re="6.7.1",Ue,En=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){Ue=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.__sentry_original__||this;return Ue.apply(r,t)}},e.id="FunctionToString",e}(),yi=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Sn=function(){function e(t){t===void 0&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){jt(function(t){var n=S();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),a=i?i.getOptions():{},s=typeof r._mergeOptions=="function"?r._mergeOptions(a):{};return typeof r._shouldDropEvent!="function"?t:r._shouldDropEvent(t,s)?null:t}return t})},e.prototype._shouldDropEvent=function(t,n){return this._isSentryError(t,n)?(l.warn(`Event dropped due to being internal Sentry Error.
Event: `+at(t)),!0):this._isIgnoredError(t,n)?(l.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+at(t)),!0):this._isDeniedUrl(t,n)?(l.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+at(t)+`.
Url: `+this._getEventFilterUrl(t)),!0):this._isAllowedUrl(t,n)?!1:(l.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+at(t)+`.
Url: `+this._getEventFilterUrl(t)),!0)},e.prototype._isSentryError=function(t,n){if(!n.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].type==="SentryError"||!1}catch{return!1}},e.prototype._isIgnoredError=function(t,n){return!n.ignoreErrors||!n.ignoreErrors.length?!1:this._getPossibleEventMessages(t).some(function(r){return n.ignoreErrors.some(function(i){return mt(r,i)})})},e.prototype._isDeniedUrl=function(t,n){if(!n.denyUrls||!n.denyUrls.length)return!1;var r=this._getEventFilterUrl(t);return r?n.denyUrls.some(function(i){return mt(r,i)}):!1},e.prototype._isAllowedUrl=function(t,n){if(!n.allowUrls||!n.allowUrls.length)return!0;var r=this._getEventFilterUrl(t);return r?n.allowUrls.some(function(i){return mt(r,i)}):!0},e.prototype._mergeOptions=function(t){return t===void 0&&(t={}),{allowUrls:T(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:T(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:T(this._options.ignoreErrors||[],t.ignoreErrors||[],yi),ignoreInternal:typeof this._options.ignoreInternal!="undefined"?this._options.ignoreInternal:!0}},e.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var n=t.exception.values&&t.exception.values[0]||{},r=n.type,i=r===void 0?"":r,a=n.value,s=a===void 0?"":a;return[""+s,i+": "+s]}catch{return l.error("Cannot extract message for event "+at(t)),[]}return[]},e.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var n=t.stacktrace.frames;return n&&n[n.length-1].filename||null}if(t.exception){var r=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return r&&r[r.length-1].filename||null}return null}catch{return l.error("Cannot extract url for event "+at(t)),null}},e.id="InboundFilters",e}(),bi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",FunctionToString:En,InboundFilters:Sn}),wn={};(function(e){(function(t,n){n(e)})(ur,function(t){const n=Symbol("newer"),r=Symbol("older");function i(u,c){typeof u!="number"&&(c=u,u=0),this.size=0,this.limit=u,this.oldest=this.newest=void 0,this._keymap=new Map,c&&(this.assign(c),u<1&&(this.limit=this.size))}t.LRUMap=i;function a(u,c){this.key=u,this.value=c,this[n]=void 0,this[r]=void 0}i.prototype._markEntryAsUsed=function(u){u!==this.newest&&(u[n]&&(u===this.oldest&&(this.oldest=u[n]),u[n][r]=u[r]),u[r]&&(u[r][n]=u[n]),u[n]=void 0,u[r]=this.newest,this.newest&&(this.newest[n]=u),this.newest=u)},i.prototype.assign=function(u){let c,p=this.limit||Number.MAX_VALUE;this._keymap.clear();let h=u[Symbol.iterator]();for(let v=h.next();!v.done;v=h.next()){let m=new a(v.value[0],v.value[1]);if(this._keymap.set(m.key,m),c?(c[n]=m,m[r]=c):this.oldest=m,c=m,p--==0)throw new Error("overflow")}this.newest=c,this.size=this._keymap.size},i.prototype.get=function(u){var c=this._keymap.get(u);if(!!c)return this._markEntryAsUsed(c),c.value},i.prototype.set=function(u,c){var p=this._keymap.get(u);return p?(p.value=c,this._markEntryAsUsed(p),this):(this._keymap.set(u,p=new a(u,c)),this.newest?(this.newest[n]=p,p[r]=this.newest):this.oldest=p,this.newest=p,++this.size,this.size>this.limit&&this.shift(),this)},i.prototype.shift=function(){var u=this.oldest;if(u)return this.oldest[n]?(this.oldest=this.oldest[n],this.oldest[r]=void 0):(this.oldest=void 0,this.newest=void 0),u[n]=u[r]=void 0,this._keymap.delete(u.key),--this.size,[u.key,u.value]},i.prototype.find=function(u){let c=this._keymap.get(u);return c?c.value:void 0},i.prototype.has=function(u){return this._keymap.has(u)},i.prototype.delete=function(u){var c=this._keymap.get(u);if(!!c)return this._keymap.delete(c.key),c[n]&&c[r]?(c[r][n]=c[n],c[n][r]=c[r]):c[n]?(c[n][r]=void 0,this.oldest=c[n]):c[r]?(c[r][n]=void 0,this.newest=c[r]):this.oldest=this.newest=void 0,this.size--,c.value},i.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()};function s(u){this.entry=u}s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let u=this.entry;return u?(this.entry=u[n],{done:!1,value:[u.key,u.value]}):{done:!0,value:void 0}};function o(u){this.entry=u}o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let u=this.entry;return u?(this.entry=u[n],{done:!1,value:u.key}):{done:!0,value:void 0}};function f(u){this.entry=u}f.prototype[Symbol.iterator]=function(){return this},f.prototype.next=function(){let u=this.entry;return u?(this.entry=u[n],{done:!1,value:u.value}):{done:!0,value:void 0}},i.prototype.keys=function(){return new o(this.oldest)},i.prototype.values=function(){return new f(this.oldest)},i.prototype.entries=function(){return this},i.prototype[Symbol.iterator]=function(){return new s(this.oldest)},i.prototype.forEach=function(u,c){typeof c!="object"&&(c=this);let p=this.oldest;for(;p;)u.call(c,p.value,p.key,this),p=p[n]},i.prototype.toJSON=function(){for(var u=new Array(this.size),c=0,p=this.oldest;p;)u[c++]={key:p.key,value:p.value},p=p[n];return u},i.prototype.toString=function(){for(var u="",c=this.oldest;c;)u+=String(c.key)+":"+c.value,c=c[n],c&&(u+=" < ");return u}})})(wn);function Ei(e){if(!e.stack)return[];var t=e.stack.split(`
`).slice(1);return t.map(function(n){if(n.match(/^\s*[-]{4,}$/))return{columnNumber:null,fileName:n,functionName:null,lineNumber:null,methodName:null,native:null,typeName:null};var r=n.match(/at (?:(.+?)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(!!r){var i=null,a=null,s=null,o=null,f=null,u=r[5]==="native";if(r[1]){s=r[1];var c=s.lastIndexOf(".");if(s[c-1]==="."&&c--,c>0){i=s.substr(0,c),a=s.substr(c+1);var p=i.indexOf(".Module");p>0&&(s=s.substr(p+1),i=i.substr(0,p))}o=null}a&&(o=i,f=a),a==="<anonymous>"&&(f=null,s=null);var h={columnNumber:parseInt(r[4],10)||null,fileName:r[2]||null,functionName:s,lineNumber:parseInt(r[3],10)||null,methodName:f,native:u,typeName:o};return h}}).filter(function(n){return!!n})}var Si=7,je=new wn.LRUMap(100);function wi(e){try{return e.functionName||e.typeName+"."+(e.methodName||"<anonymous>")}catch{return"<anonymous>"}}var Ti=(require.main&&require.main.filename&&on(require.main.filename)||global.process.cwd())+"/";function xi(e,t){t||(t=Ti);var n=Kr(e,".js");e=on(e);var r=e.lastIndexOf("/node_modules/");if(r>-1)return e.substr(r+14).replace(/\//g,".")+":"+n;if(r=(e+"/").lastIndexOf(t,0),r===0){var i=e.substr(t.length).replace(/\//g,".");return i&&(i+=":"),i+=n,i}return n}function Oi(e){return e.length===0?O.resolve({}):new O(function(t){for(var n={},r=0,i=function(s){var o=e[s],f=je.get(o);if(f!==void 0)return f!==null&&(n[o]=f),r++,r===e.length&&t(n),"continue";P.readFile(o,function(u,c){var p=u?null:c.toString();n[o]=p,je.set(o,p),r++,r===e.length&&t(n)})},a=0;a<e.length;a++)i(a)})}function Tn(e){var t=Ei(e);return t||[]}function xn(e,t){var n=[],r=t&&t.frameContextLines!==void 0?t.frameContextLines:Si,i=e.map(function(a){var s,o={colno:a.columnNumber,filename:((s=a.fileName)===null||s===void 0?void 0:s.startsWith("file://"))?a.fileName.substr(7):a.fileName||"",function:wi(a),lineno:a.lineNumber},f=a.native||o.filename&&!o.filename.startsWith("/")&&!o.filename.startsWith(".")&&o.filename.indexOf(":\\")!==1;return o.in_app=!f&&o.filename!==void 0&&o.filename.indexOf("node_modules/")===-1,o.filename&&(o.module=xi(o.filename),!f&&r>0&&n.indexOf(o.filename)===-1&&n.push(o.filename)),o});if(r<=0)return O.resolve(i);try{return ki(n,i,r)}catch{return O.resolve(i)}}function ki(e,t,n){return new O(function(r){return Oi(e).then(function(i){var a=t.map(function(s){if(s.filename&&i[s.filename])try{var o=i[s.filename].split(`
`);Or(o,s,n)}catch{}return s});r(a)})})}function On(e,t){var n=e.name||e.constructor.name,r=Tn(e);return new O(function(i){return xn(r,t).then(function(a){var s={stacktrace:{frames:kn(a)},type:n,value:e.message};i(s)})})}function Ii(e,t){return new O(function(n){return On(e,t).then(function(r){n({exception:{values:[r]}})})})}function kn(e){if(!e||!e.length)return[];var t=e,n=t[0].function||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(t=t.slice(1)),t.reverse()}var Ni="sentry.javascript.node",Jt={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},he=function(){function e(t){this.options=t,this._buffer=new un(30),this._rateLimits={},this.urlParser=function(n){return new Ct.URL(n)},this._api=new vn(t.dsn,t._metadata,t.tunnel)}return e.prototype.sendEvent=function(t){throw new w("Transport Class has to implement `sendEvent` method.")},e.prototype.close=function(t){return this._buffer.drain(t)},e.prototype._getProxy=function(t){var n,r,i=process.env,a=i.no_proxy,s=i.http_proxy,o=i.https_proxy,f=this.options,u=f.httpProxy,c=f.httpsProxy,p=t==="http"?u||s:c||u||o||s;if(!a)return p;var h=this._api.getDsn(),v=h.host,m=h.port;try{for(var g=X(a.split(",")),_=g.next();!_.done;_=g.next()){var N=_.value;if(v.endsWith(N)||(v+":"+m).endsWith(N))return}}catch(H){n={error:H}}finally{try{_&&!_.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}return p},e.prototype._getRequestOptions=function(t){var n=d(d({},this._api.getRequestHeaders(Ni,re)),this.options.headers),r=t.hostname,i=t.pathname,a=t.port,s=t.protocol,o=""+i;return d({agent:this.client,headers:n,hostname:r,method:"POST",path:o,port:a,protocol:s},this.options.caCerts&&{ca:rr.readFileSync(this.options.caCerts)})},e.prototype._disabledUntil=function(t){var n=Jt[t];return this._rateLimits[n]||this._rateLimits.all},e.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},e.prototype._handleRateLimit=function(t){var n,r,i,a,s=Date.now(),o=t["x-sentry-rate-limits"],f=t["retry-after"];if(o){try{for(var u=X(o.trim().split(",")),c=u.next();!c.done;c=u.next()){var p=c.value,h=p.split(":",2),v=parseInt(h[0],10),m=(isNaN(v)?60:v)*1e3;try{for(var g=(i=void 0,X(h[1]&&h[1].split(";")||["all"])),_=g.next();!_.done;_=g.next()){var N=_.value,H=T(Object.keys(Jt).map(function(F){return Jt[F]}),["all"]);H.includes(N)&&(this._rateLimits[N]=new Date(s+m))}}catch(F){i={error:F}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}}catch(F){n={error:F}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return!0}else if(f)return this._rateLimits.all=new Date(s+xr(s,f)),!0;return!1},e.prototype._send=function(t,n){return pr(this,void 0,void 0,function(){var r=this;return dr(this,function(i){if(!this.module)throw new w("No module available");return n&&this._isRateLimited(t.type)?[2,Promise.reject({payload:n,type:t.type,reason:"Transport locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429})]:this._buffer.isReady()?[2,this._buffer.add(new Promise(function(a,s){if(!r.module)throw new w("No module available");var o=r._getRequestOptions(r.urlParser(t.url)),f=r.module.request(o,function(u){var c=u.statusCode||500,p=exports.Status.fromHttpCode(c);u.setEncoding("utf8");var h=u.headers?u.headers["retry-after"]:"";h=Array.isArray(h)?h[0]:h;var v=u.headers?u.headers["x-sentry-rate-limits"]:"";v=Array.isArray(v)?v[0]:v;var m={"x-sentry-rate-limits":v,"retry-after":h},g=r._handleRateLimit(m);if(g&&l.warn("Too many requests, backing off until: "+r._disabledUntil(t.type)),p===exports.Status.Success)a({status:p});else{var _="HTTP Error ("+c+")";u.headers&&u.headers["x-sentry-error"]&&(_+=": "+u.headers["x-sentry-error"]),s(new w(_))}u.on("data",function(){}),u.on("end",function(){})});f.on("error",s),f.end(t.body)}))]:[2,Promise.reject(new w("Not adding Promise due to buffer limit reached."))]})})},e}(),Ri=function(e){Z(t,e);function t(n){var r=e.call(this,n)||this;r.options=n;var i=r._getProxy("http");return r.module=Te,r.client=i?new(require("https-proxy-agent"))(i):new Te.Agent({keepAlive:!1,maxSockets:30,timeout:2e3}),r}return t.prototype.sendEvent=function(n){return this._send(bn(n,this._api),n)},t.prototype.sendSession=function(n){return this._send(yn(n,this._api),n)},t}(he),Ci=function(e){Z(t,e);function t(n){var r=e.call(this,n)||this;r.options=n;var i=r._getProxy("https");return r.module=xe,r.client=i?new(require("https-proxy-agent"))(i):new xe.Agent({keepAlive:!1,maxSockets:30,timeout:2e3}),r}return t.prototype.sendEvent=function(n){return this._send(bn(n,this._api),n)},t.prototype.sendSession=function(n){return this._send(yn(n,this._api),n)},t}(he),In=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.eventFromException=function(n,r){var i=this,a=n,s=r&&r.data&&r.data.mechanism,o=s||{handled:!0,type:"generic"};if(!ce(n)){if(Dt(n)){var f="Non-Error exception captured with keys: "+Mr(n);S().configureScope(function(u){u.setExtra("__serialized__",nn(n))}),a=r&&r.syntheticException||new Error(f),a.message=f}else a=r&&r.syntheticException||new Error(n),a.message=n;o.synthetic=!0}return new O(function(u,c){return Ii(a,i._options).then(function(p){Sr(p,void 0,void 0),wr(p,o),u(d(d({},p),{event_id:r&&r.event_id}))}).then(null,c)})},t.prototype.eventFromMessage=function(n,r,i){var a=this;r===void 0&&(r=exports.Severity.Info);var s={event_id:i&&i.event_id,level:r,message:n};return new O(function(o){if(a._options.attachStacktrace&&i&&i.syntheticException){var f=i.syntheticException?Tn(i.syntheticException):[];xn(f,a._options).then(function(u){s.stacktrace={frames:kn(u)},o(s)}).then(null,function(){o(s)})}else o(s)})},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var n=new Ft(this._options.dsn),r=d(d(d(d(d({},this._options.transportOptions),this._options.httpProxy&&{httpProxy:this._options.httpProxy}),this._options.httpsProxy&&{httpsProxy:this._options.httpsProxy}),this._options.caCerts&&{caCerts:this._options.caCerts}),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(r):n.protocol==="http"?new Ri(r):new Ci(r)},t}(_n);(function(e){Z(t,e);function t(n){var r=this;return n._metadata=n._metadata||{},n._metadata.sdk=n._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:re}],version:re},r=e.call(this,In,n)||this,r}return t.prototype.captureException=function(n,r,i){if(this._options.autoSessionTracking&&this._sessionFlusher&&i){var a=i.getRequestSession();a&&a.status===Y.Ok&&(a.status=Y.Errored)}return e.prototype.captureException.call(this,n,r,i)},t.prototype.captureEvent=function(n,r,i){if(this._options.autoSessionTracking&&this._sessionFlusher&&i){var a=n.type||"exception",s=a==="exception"&&n.exception&&n.exception.values&&n.exception.values.length>0;if(s){var o=i.getRequestSession();o&&o.status===Y.Ok&&(o.status=Y.Errored)}}return e.prototype.captureEvent.call(this,n,r,i)},t.prototype.close=function(n){var r;return(r=this._sessionFlusher)===null||r===void 0||r.close(),e.prototype.close.call(this,n)},t.prototype.initSessionFlusher=function(){var n=this._options,r=n.release,i=n.environment;r?this._sessionFlusher=new ri(this._backend.getTransport(),{release:r,environment:i}):l.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")},t.prototype._prepareEvent=function(n,r,i){return n.platform=n.platform||"node",this.getOptions().serverName&&(n.server_name=this.getOptions().serverName),e.prototype._prepareEvent.call(this,n,r,i)},t.prototype._captureRequestSession=function(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():l.warn("Discarded request mode session because autoSessionTracking option was disabled")},t})(mn);var ve=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){var t,n;try{for(var r=X(["debug","info","warn","error","log"]),i=r.next();!i.done;i=r.next()){var a=i.value;C(console,a,Pi(a))}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.id="Console",e}();function Pi(e){return function(n){var r;switch(e){case"debug":r=exports.Severity.Debug;break;case"error":r=exports.Severity.Error;break;case"info":r=exports.Severity.Info;break;case"warn":r=exports.Severity.Warning;break;default:r=exports.Severity.Log}return function(){S().getIntegration(ve)&&S().addBreadcrumb({category:"console",level:r,message:sr.format.apply(void 0,arguments)},{input:T(arguments),level:e}),n.apply(this,arguments)}}}function Mi(e){var t,n=(t=S().getClient())===null||t===void 0?void 0:t.getDsn();return n?e.includes(n.host):!1}function Nn(e){var t=e.protocol||"",n=e.hostname||e.host||"",r=!e.port||e.port===80||e.port===443?"":":"+e.port,i=e.path?e.path:"/";return t+"//"+n+r+i}function Le(e,t,n){var r,i,a;if(!e)return e;var s=At(e.split(" "),2),o=s[0],f=s[1];return t.host&&!t.protocol&&(t.protocol=(i=(r=n)===null||r===void 0?void 0:r.agent)===null||i===void 0?void 0:i.protocol,f=Nn(t)),((a=f)===null||a===void 0?void 0:a.startsWith("///"))&&(f=f.slice(2)),o+" "+f}function qe(e){var t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:""+(e.pathname||"")+(e.search||""),href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=e.username+":"+e.password),t}function Ai(e){var t,n;return typeof e[e.length-1]=="function"&&(t=e.pop()),typeof e[0]=="string"?n=qe(new Ct.URL(e[0])):e[0]instanceof Ct.URL?n=qe(e[0]):n=e[0],e.length===2&&(n=d(d({},n),e[1])),t?[n,t]:[n]}var He=Qe(process.versions.node),me=function(){function e(t){t===void 0&&(t={}),this.name=e.id,this._breadcrumbs=typeof t.breadcrumbs=="undefined"?!0:t.breadcrumbs,this._tracing=typeof t.tracing=="undefined"?!1:t.tracing}return e.prototype.setupOnce=function(){if(!(!this._breadcrumbs&&!this._tracing)){var t=Di(this._breadcrumbs,this._tracing),n=require("http");if(C(n,"get",t),C(n,"request",t),He.major&&He.major>8){var r=require("https");C(r,"get",t),C(r,"request",t)}}},e.id="Http",e}();function Di(e,t){return function(r){return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=this,f=Ai(a),u=f[0],c=Nn(u);if(Mi(c))return r.apply(o,f);var p,h,v=S().getScope();if(v&&t&&(h=v.getSpan(),h)){p=h.startChild({description:(u.method||"GET")+" "+c,op:"request"});var m=p.toTraceparent();l.log("[Tracing] Adding sentry-trace header "+m+" to outgoing request to "+c+": "),u.headers=d(d({},u.headers),{"sentry-trace":m})}return r.apply(o,f).once("response",function(g){var _=this;e&&Be("response",c,_,g),t&&p&&(g.statusCode&&p.setHttpStatus(g.statusCode),p.description=Le(p.description,u,_),p.finish())}).once("error",function(){var g=this;e&&Be("error",c,g),t&&p&&(p.setHttpStatus(500),p.description=Le(p.description,u,g),p.finish())})}}}function Be(e,t,n,r){!S().getIntegration(me)||S().addBreadcrumb({category:"http",data:{method:n.method,status_code:r&&r.statusCode,url:t},type:"http"},{event:e,request:n,response:r})}var Fi=2e3;function ie(e){console.error(e&&e.stack?e.stack:e);var t=S().getClient();if(t===void 0){l.warn("No NodeClient was defined, we are exiting the process now."),global.process.exit(1);return}var n=t.getOptions(),r=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||Fi;Q(t.close(r).then(function(i){i||l.warn("We reached the timeout for emptying the request buffer, still exiting now!"),global.process.exit(1)}))}var Rn=function(){function e(t){t===void 0&&(t={}),this._options=t,this.name=e.id,this.handler=this._makeErrorHandler()}return e.prototype.setupOnce=function(){global.process.on("uncaughtException",this.handler.bind(this))},e.prototype._makeErrorHandler=function(){var t=this,n=2e3,r=!1,i=!1,a=!1,s;return function(o){var f=ie,u=S().getClient();if(t._options.onFatalError?f=t._options.onFatalError:u&&u.getOptions().onFatalError&&(f=u.getOptions().onFatalError),r)a?(l.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown"),ie(o)):i||(i=!0,setTimeout(function(){a||(a=!0,f(s,o))},n));else{var c=S();s=o,r=!0,c.getIntegration(e)?c.withScope(function(p){p.setLevel(exports.Severity.Fatal),c.captureException(o,{originalException:o,data:{mechanism:{handled:!1,type:"onuncaughtexception"}}}),a||(a=!0,f(o))}):a||(a=!0,f(o))}}},e.id="OnUncaughtException",e}(),Cn=function(){function e(t){t===void 0&&(t={mode:"warn"}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))},e.prototype.sendUnhandledPromise=function(t,n){var r=S();if(!r.getIntegration(e)){this._handleRejection(t);return}var i=n.domain&&n.domain.sentryContext||{};r.withScope(function(a){a.setExtra("unhandledPromiseRejection",!0),i.user&&a.setUser(i.user),i.tags&&a.setTags(i.tags),i.extra&&a.setExtras(i.extra),r.captureException(t,{originalException:n,data:{mechanism:{handled:!1,type:"onunhandledrejection"}}})}),this._handleRejection(t)},e.prototype._handleRejection=function(t){var n="This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason:";this._options.mode==="warn"?ot(function(){console.warn(n),console.error(t&&t.stack?t.stack:t)}):this._options.mode==="strict"&&(ot(function(){console.warn(n)}),ie(t))},e.id="OnUnhandledRejection",e}(),Ui="cause",ji=5,Pn=function(){function e(t){t===void 0&&(t={}),this.name=e.id,this._key=t.key||Ui,this._limit=t.limit||ji}return e.prototype.setupOnce=function(){jt(function(t,n){var r=S().getIntegration(e);if(r){var i=r._handler&&r._handler.bind(r);return typeof i=="function"?i(t,n):t}return t})},e.prototype._handler=function(t,n){var r=this;return!t.exception||!t.exception.values||!n||!q(n.originalException,Error)?O.resolve(t):new O(function(i){r._walkErrorTree(n.originalException,r._key).then(function(a){t&&t.exception&&t.exception.values&&(t.exception.values=T(a,t.exception.values)),i(t)}).then(null,function(){i(t)})})},e.prototype._walkErrorTree=function(t,n,r){var i=this;return r===void 0&&(r=[]),!q(t[n],Error)||r.length+1>=this._limit?O.resolve(r):new O(function(a,s){On(t[n]).then(function(o){i._walkErrorTree(t[n],n,T([o],r)).then(a).then(null,function(){s()})}).then(null,function(){s()})})},e.id="LinkedErrors",e}(),Vt;function Li(){try{return require.cache?Object.keys(require.cache):[]}catch{return[]}}function qi(){var e=require.main&&require.main.paths||[],t=Li(),n={},r={};return t.forEach(function(i){var a=i,s=function(){var o=a;if(a=I.dirname(o),!(!a||o===a||r[o])){if(e.indexOf(a)<0)return s();var f=I.join(o,"package.json");if(r[o]=!0,!P.existsSync(f))return s();try{var u=JSON.parse(P.readFileSync(f,"utf8"));n[u.name]=u.version}catch{}}};s()}),n}var Hi=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){var r=this;t(function(i){return n().getIntegration(e)?d(d({},i),{modules:r._getModules()}):i})},e.prototype._getModules=function(){return Vt||(Vt=qi()),Vt},e.id="Modules",e}(),Bi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Console:ve,Http:me,OnUncaughtException:Rn,OnUnhandledRejection:Cn,LinkedErrors:Pn,Modules:Hi}),Wi=[new Sn,new En,new ve,new me,new Rn,new Cn,new Pn],M;(function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"})(M||(M={}));(function(e){function t(n){if(n<400)return e.Ok;if(n>=400&&n<500)switch(n){case 401:return e.Unauthenticated;case 403:return e.PermissionDenied;case 404:return e.NotFound;case 409:return e.AlreadyExists;case 413:return e.FailedPrecondition;case 429:return e.ResourceExhausted;default:return e.InvalidArgument}if(n>=500&&n<600)switch(n){case 501:return e.Unimplemented;case 503:return e.Unavailable;case 504:return e.DeadlineExceeded;default:return e.InternalError}return e.UnknownError}e.fromHttpCode=t})(M||(M={}));var zi=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function _e(e){e===void 0&&(e=(t=S().getClient())===null||t===void 0?void 0:t.getOptions());var t;return e?"tracesSampleRate"in e||"tracesSampler"in e:!1}function Yi(e){var t=e.match(zi);if(t){var n=void 0;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}}function Lt(e){e===void 0&&(e=S());var t,n;return(n=(t=e)===null||t===void 0?void 0:t.getScope())===null||n===void 0?void 0:n.getTransaction()}function R(e){return e/1e3}function Gi(e){return e*1e3}function $i(){bt({callback:We,type:"error"}),bt({callback:We,type:"unhandledrejection"})}function We(){var e=Lt();e&&(l.log("[Tracing] Transaction: "+M.InternalError+" -> Global error occured"),e.setStatus(M.InternalError))}var Mn=function(){function e(t){t===void 0&&(t=1e3),this.spans=[],this._maxlen=t}return e.prototype.add=function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)},e}(),Ji=function(){function e(t){if(this.traceId=K(),this.spanId=K().substring(16),this.startTimestamp=et(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}return e.prototype.child=function(t){return this.startChild(t)},e.prototype.startChild=function(t){var n=new e(d(d({},t),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},e.prototype.setTag=function(t,n){var r;return this.tags=d(d({},this.tags),(r={},r[t]=n,r)),this},e.prototype.setData=function(t,n){var r;return this.data=d(d({},this.data),(r={},r[t]=n,r)),this},e.prototype.setStatus=function(t){return this.status=t,this},e.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var n=M.fromHttpCode(t);return n!==M.UnknownError&&this.setStatus(n),this},e.prototype.isSuccess=function(){return this.status===M.Ok},e.prototype.finish=function(t){this.endTimestamp=typeof t=="number"?t:et()},e.prototype.toTraceparent=function(){var t="";return this.sampled!==void 0&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},e.prototype.toContext=function(){return G({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},e.prototype.updateWithContext=function(t){var n,r,i,a,s;return this.data=(n=t.data,n!=null?n:{}),this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=(r=t.spanId,r!=null?r:this.spanId),this.startTimestamp=(i=t.startTimestamp,i!=null?i:this.startTimestamp),this.status=t.status,this.tags=(a=t.tags,a!=null?a:{}),this.traceId=(s=t.traceId,s!=null?s:this.traceId),this},e.prototype.getTraceContext=function(){return G({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},e.prototype.toJSON=function(){return G({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},e}(),An=function(e){Z(t,e);function t(n,r){var i=e.call(this,n)||this;return i._measurements={},i._hub=S(),q(r,wt)&&(i._hub=r),i.name=n.name||"",i.metadata=n.metadata||{},i._trimEnd=n.trimEnd,i.transaction=i,i}return t.prototype.setName=function(n){this.name=n},t.prototype.initSpanRecorder=function(n){n===void 0&&(n=1e3),this.spanRecorder||(this.spanRecorder=new Mn(n)),this.spanRecorder.add(this)},t.prototype.setMeasurements=function(n){this._measurements=d({},n)},t.prototype.setMetadata=function(n){this.metadata=d(d({},this.metadata),n)},t.prototype.finish=function(n){var r=this;if(this.endTimestamp===void 0){if(this.name||(l.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),e.prototype.finish.call(this,n),this.sampled!==!0){l.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");return}var i=this.spanRecorder?this.spanRecorder.spans.filter(function(o){return o!==r&&o.endTimestamp}):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce(function(o,f){return o.endTimestamp&&f.endTimestamp?o.endTimestamp>f.endTimestamp?o:f:o}).endTimestamp);var a={contexts:{trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata},s=Object.keys(this._measurements).length>0;return s&&(l.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),a.measurements=this._measurements),l.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(a)}},t.prototype.toContext=function(){var n=e.prototype.toContext.call(this);return G(d(d({},n),{name:this.name,trimEnd:this._trimEnd}))},t.prototype.updateWithContext=function(n){var r;return e.prototype.updateWithContext.call(this,n),this.name=(r=n.name,r!=null?r:""),this._trimEnd=n.trimEnd,this},t}(Ji),Dn=1e3,Vi=function(e){Z(t,e);function t(n,r,i,a){i===void 0&&(i="");var s=e.call(this,a)||this;return s._pushActivity=n,s._popActivity=r,s.transactionSpanId=i,s}return t.prototype.add=function(n){var r=this;n.spanId!==this.transactionSpanId&&(n.finish=function(i){n.endTimestamp=typeof i=="number"?i:et(),r._popActivity(n.spanId)},n.endTimestamp===void 0&&this._pushActivity(n.spanId)),e.prototype.add.call(this,n)},t}(Mn),Xi=function(e){Z(t,e);function t(n,r,i,a){i===void 0&&(i=Dn),a===void 0&&(a=!1);var s=e.call(this,n,r)||this;return s._idleHub=r,s._idleTimeout=i,s._onScope=a,s.activities={},s._heartbeatTimer=0,s._heartbeatCounter=0,s._finished=!1,s._beforeFinishCallbacks=[],r&&a&&(ze(r),l.log("Setting idle transaction on scope. Span ID: "+s.spanId),r.configureScope(function(o){return o.setSpan(s)})),s._initTimeout=setTimeout(function(){s._finished||s.finish()},s._idleTimeout),s}return t.prototype.finish=function(n){var r,i,a=this;if(n===void 0&&(n=et()),this._finished=!0,this.activities={},this.spanRecorder){l.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);try{for(var s=X(this._beforeFinishCallbacks),o=s.next();!o.done;o=s.next()){var f=o.value;f(this,n)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter(function(u){if(u.spanId===a.spanId)return!0;u.endTimestamp||(u.endTimestamp=n,u.setStatus(M.Cancelled),l.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(u,void 0,2)));var c=u.startTimestamp<n;return c||l.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(u,void 0,2)),c}),l.log("[Tracing] flushing IdleTransaction")}else l.log("[Tracing] No active IdleTransaction");return this._onScope&&ze(this._idleHub),e.prototype.finish.call(this,n)},t.prototype.registerBeforeFinishCallback=function(n){this._beforeFinishCallbacks.push(n)},t.prototype.initSpanRecorder=function(n){var r=this;if(!this.spanRecorder){var i=function(s){r._finished||r._pushActivity(s)},a=function(s){r._finished||r._popActivity(s)};this.spanRecorder=new Vi(i,a,this.spanId,n),l.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},t.prototype._pushActivity=function(n){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),l.log("[Tracing] pushActivity: "+n),this.activities[n]=!0,l.log("[Tracing] new activities count",Object.keys(this.activities).length)},t.prototype._popActivity=function(n){var r=this;if(this.activities[n]&&(l.log("[Tracing] popActivity "+n),delete this.activities[n],l.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){var i=this._idleTimeout,a=et()+i/1e3;setTimeout(function(){r._finished||r.finish(a)},i)}},t.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var n=Object.keys(this.activities),r=n.length?n.reduce(function(i,a){return i+a}):"";r===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=r,this._heartbeatCounter>=3?(l.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(M.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},t.prototype._pingHeartbeat=function(){var n=this;l.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout(function(){n._beat()},5e3)},t}(An);function ze(e){if(e){var t=e.getScope();if(t){var n=t.getTransaction();n&&t.setSpan(void 0)}}}function Ki(){var e=this.getScope();if(e){var t=e.getSpan();if(t)return{"sentry-trace":t.toTraceparent()}}return{}}function Fn(e,t,n){if(!_e())return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({transactionSampling:{method:st.Explicit}}),e;var r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setMetadata({transactionSampling:{method:st.Sampler,rate:Number(r)}})):n.parentSampled!==void 0?(r=n.parentSampled,e.setMetadata({transactionSampling:{method:st.Inheritance}})):(r=t.tracesSampleRate,e.setMetadata({transactionSampling:{method:st.Rate,rate:Number(r)}})),Zi(r)?r?(e.sampled=Math.random()<r,e.sampled?(l.log("[Tracing] starting "+e.op+" transaction - "+e.name),e):(l.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),e)):(l.log("[Tracing] Discarding transaction because "+(typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(l.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Zi(e){return isNaN(e)||!(typeof e=="number"||typeof e=="boolean")?(l.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(e)+" of type "+JSON.stringify(typeof e)+"."),!1):e<0||e>1?(l.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+e+"."),!1):!0}function Qi(e,t){var n,r,i=((n=this.getClient())===null||n===void 0?void 0:n.getOptions())||{},a=new An(e,this);return a=Fn(a,i,d({parentSampled:e.parentSampled,transactionContext:e},t)),a.sampled&&a.initSpanRecorder((r=i._experiments)===null||r===void 0?void 0:r.maxSpans),a}function ta(e,t,n,r,i){var a,s,o=((a=e.getClient())===null||a===void 0?void 0:a.getOptions())||{},f=new Xi(t,e,n,r);return f=Fn(f,o,d({parentSampled:t.parentSampled,transactionContext:t},i)),f.sampled&&f.initSpanRecorder((s=o._experiments)===null||s===void 0?void 0:s.maxSpans),f}function ea(){var e=it();!e.__SENTRY__||(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Qi),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Ki))}function na(){var e=it();if(!!e.__SENTRY__){var t={mongodb:function(){var r=J(module,"./integrations/mongo");return new r.Mongo},mongoose:function(){var r=J(module,"./integrations/mongo");return new r.Mongo({mongoose:!0})},mysql:function(){var r=J(module,"./integrations/mysql");return new r.Mysql},pg:function(){var r=J(module,"./integrations/postgres");return new r.Postgres}},n=Object.keys(t).filter(function(r){return!!Ut(r)}).map(function(r){try{return t[r]()}catch{return}}).filter(function(r){return r});n.length>0&&(e.__SENTRY__.integrations=T(e.__SENTRY__.integrations||[],n))}}function ra(){ea(),St()&&na(),$i()}var kt=A();function ia(){kt&&kt.document?kt.document.addEventListener("visibilitychange",function(){var e=Lt();kt.document.hidden&&e&&(l.log("[Tracing] Transaction: "+M.Cancelled+" -> since tab moved to the background, op: "+e.op),e.status||e.setStatus(M.Cancelled),e.setTag("visibilitychange","document.hidden"),e.finish())}):l.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var ge=function(e,t,n,r){var i;return function(){n&&t.isFinal&&n.disconnect(),t.value>=0&&(r||t.isFinal||document.visibilityState==="hidden")&&(t.delta=t.value-(i||0),(t.delta||t.isFinal||i===void 0)&&(e(t),i=t.value))}},aa=function(){return Date.now()+"-"+(Math.floor(Math.random()*(9e12-1))+1e12)},ye=function(e,t){return t===void 0&&(t=-1),{name:e,value:t,delta:0,entries:[],id:aa(),isFinal:!1}},be=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(r){return r.getEntries().map(t)});return n.observe({type:e,buffered:!0}),n}}catch{}},Un=!1,Ye=!1,sa=function(e){Un=!e.persisted},oa=function(){addEventListener("pagehide",sa),addEventListener("beforeunload",function(){})},qt=function(e,t){t===void 0&&(t=!1),Ye||(oa(),Ye=!0),addEventListener("visibilitychange",function(n){var r=n.timeStamp;document.visibilityState==="hidden"&&e({timeStamp:r,isUnloading:Un})},{capture:!0,once:t})},ua=function(e,t){t===void 0&&(t=!1);var n=ye("CLS",0),r,i=function(s){s.hadRecentInput||(n.value+=s.value,n.entries.push(s),r())},a=be("layout-shift",i);a&&(r=ge(e,n,a,t),qt(function(s){var o=s.isUnloading;a.takeRecords().map(i),o&&(n.isFinal=!0),r()}))},It,Ee=function(){return It===void 0&&(It=document.visibilityState==="hidden"?0:1/0,qt(function(e){var t=e.timeStamp;return It=t},!0)),{get timeStamp(){return It}}},ca=function(e){var t=ye("FID"),n=Ee(),r=function(s){s.startTime<n.timeStamp&&(t.value=s.processingStart-s.startTime,t.entries.push(s),t.isFinal=!0,a())},i=be("first-input",r),a=ge(e,t,i);i?qt(function(){i.takeRecords().map(r),i.disconnect()},!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay(function(s,o){o.timeStamp<n.timeStamp&&(t.value=s,t.isFinal=!0,t.entries=[{entryType:"first-input",name:o.type,target:o.target,cancelable:o.cancelable,startTime:o.timeStamp,processingStart:o.timeStamp+s}],a())})},Xt,fa=function(){return Xt||(Xt=new Promise(function(e){return["scroll","keydown","pointerdown"].map(function(t){addEventListener(t,e,{once:!0,passive:!0,capture:!0})})})),Xt},pa=function(e,t){t===void 0&&(t=!1);var n=ye("LCP"),r=Ee(),i,a=function(f){var u=f.startTime;u<r.timeStamp?(n.value=u,n.entries.push(f)):n.isFinal=!0,i()},s=be("largest-contentful-paint",a);if(s){i=ge(e,n,s,t);var o=function(){n.isFinal||(s.takeRecords().map(a),n.isFinal=!0,i())};fa().then(o),qt(o,!0)}},B=A(),da=function(){function e(){var t;this._measurements={},this._performanceCursor=0,!St()&&((t=B)===null||t===void 0?void 0:t.performance)&&(B.performance.mark&&B.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID())}return e.prototype.addPerformanceEntries=function(t){var n=this;if(!(!B||!B.performance||!B.performance.getEntries||!ft)){l.log("[Tracing] Adding & adjusting spans using Performance API");var r=R(ft),i;if(B.document){for(var a=0;a<document.scripts.length;a++)if(document.scripts[a].dataset.entry==="true"){i=document.scripts[a].src;break}}var s,o,f,u;if(B.performance.getEntries().slice(this._performanceCursor).forEach(function(p){var h=R(p.startTime),v=R(p.duration);if(!(t.op==="navigation"&&r+h<t.startTimestamp))switch(p.entryType){case"navigation":{la(t,p,r),f=r+R(p.responseStart),u=r+R(p.requestStart);break}case"mark":case"paint":case"measure":{var m=ha(t,p,h,v,r);o===void 0&&p.name==="sentry-tracing-init"&&(o=m);var g=Ee(),_=p.startTime<g.timeStamp;p.name==="first-paint"&&_&&(l.log("[Measurements] Adding FP"),n._measurements.fp={value:p.startTime},n._measurements["mark.fp"]={value:m}),p.name==="first-contentful-paint"&&_&&(l.log("[Measurements] Adding FCP"),n._measurements.fcp={value:p.startTime},n._measurements["mark.fcp"]={value:m});break}case"resource":{var N=p.name.replace(window.location.origin,""),H=va(t,p,N,h,v,r);s===void 0&&(i||"").indexOf(N)>-1&&(s=H);break}}}),s!==void 0&&o!==void 0&&nt(t,{description:"evaluation",endTimestamp:o,op:"script",startTimestamp:s}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(t),t.op==="pageload"){var c=R(ft);typeof f=="number"&&(l.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:(f-t.startTimestamp)*1e3},typeof u=="number"&&u<=f&&(this._measurements["ttfb.requestTime"]={value:(f-u)*1e3})),["fcp","fp","lcp"].forEach(function(p){if(!(!n._measurements[p]||c>=t.startTimestamp)){var h=n._measurements[p].value,v=c+R(h),m=Math.abs((v-t.startTimestamp)*1e3),g=m-h;l.log("[Measurements] Normalized "+p+" from "+h+" to "+m+" ("+g+")"),n._measurements[p].value=m}}),this._measurements["mark.fid"]&&this._measurements.fid&&nt(t,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+R(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),t.setMeasurements(this._measurements),this._lcpEntry&&(l.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&t.setTag("lcp.element",te(this._lcpEntry.element)),this._lcpEntry.id&&t.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&t.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),t.setTag("lcp.size",this._lcpEntry.size))}}},e.prototype._trackCLS=function(){var t=this;ua(function(n){var r=n.entries.pop();!r||(l.log("[Measurements] Adding CLS"),t._measurements.cls={value:n.value})})},e.prototype._trackNavigator=function(t){var n=B.navigator;if(!!n){var r=n.connection;r&&(r.effectiveType&&t.setTag("effectiveConnectionType",r.effectiveType),r.type&&t.setTag("connectionType",r.type),Nt(r.rtt)&&(this._measurements["connection.rtt"]={value:r.rtt}),Nt(r.downlink)&&(this._measurements["connection.downlink"]={value:r.downlink})),Nt(n.deviceMemory)&&t.setTag("deviceMemory",String(n.deviceMemory)),Nt(n.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(n.hardwareConcurrency))}},e.prototype._trackLCP=function(){var t=this;pa(function(n){var r=n.entries.pop();if(!!r){var i=R(ft),a=R(r.startTime);l.log("[Measurements] Adding LCP"),t._measurements.lcp={value:n.value},t._measurements["mark.lcp"]={value:i+a},t._lcpEntry=r}})},e.prototype._trackFID=function(){var t=this;ca(function(n){var r=n.entries.pop();if(!!r){var i=R(ft),a=R(r.startTime);l.log("[Measurements] Adding FID"),t._measurements.fid={value:n.value},t._measurements["mark.fid"]={value:i+a}}})},e}();function la(e,t,n){$({transaction:e,entry:t,event:"unloadEvent",timeOrigin:n}),$({transaction:e,entry:t,event:"redirect",timeOrigin:n}),$({transaction:e,entry:t,event:"domContentLoadedEvent",timeOrigin:n}),$({transaction:e,entry:t,event:"loadEvent",timeOrigin:n}),$({transaction:e,entry:t,event:"connect",timeOrigin:n}),$({transaction:e,entry:t,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),$({transaction:e,entry:t,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),$({transaction:e,entry:t,event:"domainLookup",timeOrigin:n,description:"DNS"}),ma(e,t,n)}function ha(e,t,n,r,i){var a=i+n,s=a+r;return nt(e,{description:t.name,endTimestamp:s,op:t.entryType,startTimestamp:a}),a}function va(e,t,n,r,i,a){if(!(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")){var s={};"transferSize"in t&&(s["Transfer Size"]=t.transferSize),"encodedBodySize"in t&&(s["Encoded Body Size"]=t.encodedBodySize),"decodedBodySize"in t&&(s["Decoded Body Size"]=t.decodedBodySize);var o=a+r,f=o+i;return nt(e,{description:n,endTimestamp:f,op:t.initiatorType?"resource."+t.initiatorType:"resource",startTimestamp:o,data:s}),f}}function $(e){var t=e.transaction,n=e.entry,r=e.event,i=e.timeOrigin,a=e.eventEnd,s=e.description,o=a?n[a]:n[r+"End"],f=n[r+"Start"];!f||!o||nt(t,{op:"browser",description:s!=null?s:r,startTimestamp:i+R(f),endTimestamp:i+R(o)})}function ma(e,t,n){nt(e,{op:"browser",description:"request",startTimestamp:n+R(t.requestStart),endTimestamp:n+R(t.responseEnd)}),nt(e,{op:"browser",description:"response",startTimestamp:n+R(t.responseStart),endTimestamp:n+R(t.responseEnd)})}function nt(e,t){var n=t.startTimestamp,r=Ze(t,["startTimestamp"]);return n&&e.startTimestamp>n&&(e.startTimestamp=n),e.startChild(d({startTimestamp:n},r))}function Nt(e){return typeof e=="number"&&isFinite(e)}var _a=["localhost",/^\//],Mt={traceFetch:!0,traceXHR:!0,tracingOrigins:_a};function ga(e){var t=d(d({},Mt),e),n=t.traceFetch,r=t.traceXHR,i=t.tracingOrigins,a=t.shouldCreateSpanForRequest,s={},o=function(c){if(s[c])return s[c];var p=i;return s[c]=p.some(function(h){return mt(c,h)})&&!mt(c,"sentry_key"),s[c]},f=o;typeof a=="function"&&(f=function(c){return o(c)&&a(c)});var u={};n&&bt({callback:function(c){ya(c,f,u)},type:"fetch"}),r&&bt({callback:function(c){ba(c,f,u)},type:"xhr"})}function ya(e,t,n){if(!(!_e()||!(e.fetchData&&t(e.fetchData.url)))){if(e.endTimestamp&&e.fetchData.__span){var r=n[e.fetchData.__span];r&&(e.response?r.setHttpStatus(e.response.status):e.error&&r.setStatus(M.InternalError),r.finish(),delete n[e.fetchData.__span]);return}var i=Lt();if(i){var r=i.startChild({data:d(d({},e.fetchData),{type:"fetch"}),description:e.fetchData.method+" "+e.fetchData.url,op:"http"});e.fetchData.__span=r.spanId,n[r.spanId]=r;var a=e.args[0]=e.args[0],s=e.args[1]=e.args[1]||{},o=s.headers;q(a,Request)&&(o=a.headers),o?typeof o.append=="function"?o.append("sentry-trace",r.toTraceparent()):Array.isArray(o)?o=T(o,[["sentry-trace",r.toTraceparent()]]):o=d(d({},o),{"sentry-trace":r.toTraceparent()}):o={"sentry-trace":r.toTraceparent()},s.headers=o}}}function ba(e,t,n){var r,i;if(!(!_e()||((r=e.xhr)===null||r===void 0?void 0:r.__sentry_own_request__)||!(((i=e.xhr)===null||i===void 0?void 0:i.__sentry_xhr__)&&t(e.xhr.__sentry_xhr__.url)))){var a=e.xhr.__sentry_xhr__;if(e.endTimestamp&&e.xhr.__sentry_xhr_span_id__){var s=n[e.xhr.__sentry_xhr_span_id__];s&&(s.setHttpStatus(a.status_code),s.finish(),delete n[e.xhr.__sentry_xhr_span_id__]);return}var o=Lt();if(o){var s=o.startChild({data:d(d({},a.data),{type:"xhr",method:a.method,url:a.url}),description:a.method+" "+a.url,op:"http"});if(e.xhr.__sentry_xhr_span_id__=s.spanId,n[e.xhr.__sentry_xhr_span_id__]=s,e.xhr.setRequestHeader)try{e.xhr.setRequestHeader("sentry-trace",s.toTraceparent())}catch{}}}}var pt=A();function Ea(e,t,n){if(t===void 0&&(t=!0),n===void 0&&(n=!0),!pt||!pt.location){l.warn("Could not initialize routing instrumentation due to invalid location");return}var r=pt.location.href,i;t&&(i=e({name:pt.location.pathname,op:"pageload"})),n&&bt({callback:function(a){var s=a.to,o=a.from;if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&(l.log("[Tracing] Finishing current transaction with op: "+i.op),i.finish()),i=e({name:pt.location.pathname,op:"navigation"}))},type:"history"})}var Sa=600,wa=d({idleTimeout:Dn,markBackgroundTransactions:!0,maxTransactionDuration:Sa,routingInstrumentation:Ea,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},Mt),Ta=function(){function e(t){this.name=e.id,this._metrics=new da,this._emitOptionsWarning=!1;var n=Mt.tracingOrigins;t&&t.tracingOrigins&&Array.isArray(t.tracingOrigins)&&t.tracingOrigins.length!==0?n=t.tracingOrigins:this._emitOptionsWarning=!0,this.options=d(d(d({},wa),t),{tracingOrigins:n})}return e.prototype.setupOnce=function(t,n){var r=this;this._getCurrentHub=n,this._emitOptionsWarning&&(l.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),l.warn("[Tracing] We added a reasonable default for you: "+Mt.tracingOrigins));var i=this.options,a=i.routingInstrumentation,s=i.startTransactionOnLocationChange,o=i.startTransactionOnPageLoad,f=i.markBackgroundTransactions,u=i.traceFetch,c=i.traceXHR,p=i.tracingOrigins,h=i.shouldCreateSpanForRequest;a(function(v){return r._createRouteTransaction(v)},o,s),f&&ia(),ga({traceFetch:u,traceXHR:c,tracingOrigins:p,shouldCreateSpanForRequest:h})},e.prototype._createRouteTransaction=function(t){var n=this;if(!this._getCurrentHub){l.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.");return}var r=this.options,i=r.beforeNavigate,a=r.idleTimeout,s=r.maxTransactionDuration,o=t.op==="pageload"?xa():void 0,f=d(d(d({},t),o),{trimEnd:!0}),u=typeof i=="function"?i(f):f,c=u===void 0?d(d({},f),{sampled:!1}):u;c.sampled===!1&&l.log("[Tracing] Will not send "+c.op+" transaction because of beforeNavigate."),l.log("[Tracing] Starting "+c.op+" transaction on scope");var p=this._getCurrentHub(),h=A().location,v=ta(p,c,a,!0,{location:h});return v.registerBeforeFinishCallback(function(m,g){n._metrics.addPerformanceEntries(m),ka(Gi(s),m,g)}),v},e.id="BrowserTracing",e}();function xa(){var e=Oa("sentry-trace");if(e)return Yi(e)}function Oa(e){var t=document.querySelector("meta[name="+e+"]");return t?t.getAttribute("content"):null}function ka(e,t,n){var r=n-t.startTimestamp,i=n&&(r>e||r<0);i&&(t.setStatus(M.DeadlineExceeded),t.setTag("maxTransactionDurationExceeded","true"))}var Ia=function(){function e(t){t===void 0&&(t={}),this.name=e.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}return e.prototype.setupOnce=function(){if(!this._router){l.error("ExpressIntegration is missing an Express instance");return}Ca(this._router,this._methods)},e.id="Express",e}();function Ge(e,t){var n=e.length;switch(n){case 2:return function(r,i){var a=i.__sentry_transaction;if(a){var s=a.startChild({description:e.name,op:"middleware."+t});i.once("finish",function(){s.finish()})}return e.call(this,r,i)};case 3:return function(r,i,a){var s,o=i.__sentry_transaction,f=(s=o)===null||s===void 0?void 0:s.startChild({description:e.name,op:"middleware."+t});e.call(this,r,i,function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var p;(p=f)===null||p===void 0||p.finish(),a.call.apply(a,T([this],u))})};case 4:return function(r,i,a,s){var o,f=a.__sentry_transaction,u=(o=f)===null||o===void 0?void 0:o.startChild({description:e.name,op:"middleware."+t});e.call(this,r,i,a,function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];var h;(h=u)===null||h===void 0||h.finish(),s.call.apply(s,T([this],c))})};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function Na(e,t){return e.map(function(n){return typeof n=="function"?Ge(n,t):Array.isArray(n)?n.map(function(r){return typeof r=="function"?Ge(r,t):r}):n})}function Ra(e,t){var n=e[t];return e[t]=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n.call.apply(n,T([this],Na(r,t)))},e}function Ca(e,t){t===void 0&&(t=[]),t.forEach(function(n){return Ra(e,n)})}var Pa=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){var r=Ut("pg");if(!r){l.error("Postgres Integration was unable to require `pg` package.");return}C(r.Client.prototype,"query",function(i){return function(a,s,o){var f,u,c,p=n().getScope(),h=(f=p)===null||f===void 0?void 0:f.getSpan(),v=(u=h)===null||u===void 0?void 0:u.startChild({description:typeof a=="string"?a:a.text,op:"db"});if(typeof o=="function")return i.call(this,a,s,function(g,_){var N;(N=v)===null||N===void 0||N.finish(),o(g,_)});if(typeof s=="function")return i.call(this,a,function(g,_){var N;(N=v)===null||N===void 0||N.finish(),s(g,_)});var m=typeof s!="undefined"?i.call(this,a,s):i.call(this,a);return Et(m)?m.then(function(g){var _;return(_=v)===null||_===void 0||_.finish(),g}):((c=v)===null||c===void 0||c.finish(),m)}})},e.id="Postgres",e}(),Ma=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){var r=Ut("mysql/lib/Connection.js");if(!r){l.error("Mysql Integration was unable to require `mysql` package.");return}C(r,"createQuery",function(i){return function(a,s,o){var f,u,c=n().getScope(),p=(f=c)===null||f===void 0?void 0:f.getSpan(),h=(u=p)===null||u===void 0?void 0:u.startChild({description:typeof a=="string"?a:a.sql,op:"db"});return typeof o=="function"?i.call(this,a,s,function(v,m,g){var _;(_=h)===null||_===void 0||_.finish(),o(v,m,g)}):typeof s=="function"?i.call(this,a,function(v,m,g){var _;(_=h)===null||_===void 0||_.finish(),s(v,m,g)}):i.call(this,a,s,o)}})},e.id="Mysql",e}(),Aa=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],Da={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},Fa=function(){function e(t){t===void 0&&(t={}),this.name=e.id,this._operations=Array.isArray(t.operations)?t.operations:Aa,this._describeOperations="describeOperations"in t?t.describeOperations:!0,this._useMongoose=!!t.useMongoose}return e.prototype.setupOnce=function(t,n){var r=this._useMongoose?"mongoose":"mongodb",i=Ut(r);if(!i){l.error("Mongo Integration was unable to require `"+r+"` package.");return}this._instrumentOperations(i.Collection,this._operations,n)},e.prototype._instrumentOperations=function(t,n,r){var i=this;n.forEach(function(a){return i._patchOperation(t,a,r)})},e.prototype._patchOperation=function(t,n,r){if(n in t.prototype){var i=this._getSpanContextFromOperationArguments.bind(this);C(t.prototype,n,function(a){return function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var f,u,c,p,h=s[s.length-1],v=r().getScope(),m=(f=v)===null||f===void 0?void 0:f.getSpan();if(typeof h!="function"||n==="mapReduce"&&s.length===2){var g=(u=m)===null||u===void 0?void 0:u.startChild(i(this,n,s)),_=a.call.apply(a,T([this],s));return Et(_)?_.then(function(H){var F;return(F=g)===null||F===void 0||F.finish(),H}):((c=g)===null||c===void 0||c.finish(),_)}var N=(p=m)===null||p===void 0?void 0:p.startChild(i(this,n,s.slice(0,-1)));return a.call.apply(a,T([this],s.slice(0,-1),[function(H,F){var Ht;(Ht=N)===null||Ht===void 0||Ht.finish(),h(H,F)}]))}})}},e.prototype._getSpanContextFromOperationArguments=function(t,n,r){var i={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},a={op:"db",description:n,data:i},s=Da[n],o=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!s||!o)return a;try{if(n==="mapReduce"){var f=At(r,2),u=f[0],c=f[1];i[s[0]]=typeof u=="string"?u:u.name||"<anonymous>",i[s[1]]=typeof c=="string"?c:c.name||"<anonymous>"}else for(var p=0;p<s.length;p++)i[s[p]]=JSON.stringify(r[p])}catch{}return a},e.id="Mongo",e}(),Ua=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Express:Ia,Postgres:Pa,Mysql:Ma,Mongo:Fa});d(d({},Ua),{BrowserTracing:Ta});ra();var ja=d(d({},bi),Bi),dt=it();dt.__SENTRY__&&(dt.__SENTRY__.extensions=dt.__SENTRY__.extensions||{},dt.__SENTRY__.extensions.domain=dt.__SENTRY__.extensions.domain||ar);var Rt={PING:"sentry-electron.ping",EVENT:"sentry-electron.event",SCOPE:"sentry-electron.scope"};function jn(){if(typeof require=="undefined")throw new w('Could not require("electron") to get appName. Please ensure you pass `appName` to Sentry options');var e=require("electron");if(e&&e.app){var t=e.app;return t.name||t.getName()}if(!e||!e.remote)throw new w("The Electron `remote` module was not available to get appName. Please ensure you pass `appName` to Sentry options");var n=e.remote.app;return n.name||n.getName()}function Se(){var e=Qe(process.versions.electron);return{major:e.major||0,minor:e.minor||0,patch:e.patch||0}}function La(){var e=Se(),t=e.major,n=e.minor;return t===8&&n>=4||t===9&&n>=1||t>=10}function qa(){var e=Se().major;return e>=6}function Ha(){var e=Se().major;return e>=9}function Ln(e,t){return b(this,void 0,void 0,function(){return E(this,function(n){return[2,new Promise(function(r,i){P.readFile(e,t,function(a,s){a?i(a):r(s)})})]})})}function $e(e,t){return b(this,void 0,void 0,function(){return E(this,function(n){return[2,new Promise(function(r,i){P.mkdir(e,t,function(a){a?i(a):r()})})]})})}function qn(e){return b(this,void 0,void 0,function(){var t,n,r;return E(this,function(i){switch(i.label){case 0:t=I.resolve(e),i.label=1;case 1:return i.trys.push([1,2,,5]),[2,$e(t,511)];case 2:return n=i.sent(),r=n,r&&r.code==="ENOENT"?[4,qn(I.dirname(t))]:[3,4];case 3:return i.sent(),[2,$e(t,511)];case 4:try{if(!P.statSync(t).isDirectory())throw n}catch{throw n}return[3,5];case 5:return[2]}})})}function Hn(e){var t=I.resolve(e);try{P.mkdirSync(t,511)}catch(r){var n=r;if(n&&n.code==="ENOENT")Hn(I.dirname(t)),P.mkdirSync(t,511);else try{if(!P.statSync(t).isDirectory())throw r}catch{throw r}}}function Ba(e){return new Promise(function(t,n){P.stat(e,function(r,i){if(r){n(r);return}t(i)})})}function lt(e){return new Promise(function(t,n){P.unlink(e,function(r){if(r){n(r);return}t()})})}function ae(e){return new Promise(function(t,n){P.readdir(e,function(r,i){if(r){n(r);return}t(i)})})}function Wa(e,t){return new Promise(function(n,r){P.rename(e,t,function(i){if(i){r(i);return}n()})})}var Je="2.5.4",za="sentry.javascript.electron",Ya={aix:"IBM AIX",freebsd:"FreeBSD",openbsd:"OpenBSD",sunos:"SunOS",win32:"Windows"},Ga=[{name:"fedora-release",distros:["Fedora"]},{name:"redhat-release",distros:["Red Hat Linux","Centos"]},{name:"redhat_version",distros:["Red Hat Linux"]},{name:"SuSE-release",distros:["SUSE Linux"]},{name:"lsb-release",distros:["Ubuntu Linux","Arch Linux"]},{name:"debian_version",distros:["Debian"]},{name:"debian_release",distros:["Debian"]},{name:"arch-release",distros:["Arch Linux"]},{name:"gentoo-release",distros:["Gentoo Linux"]},{name:"novell-release",distros:["SUSE Linux"]},{name:"alpine-release",distros:["Alpine Linux"]}],$a={alpine:function(e){return e},arch:function(e){return j(/distrib_release=(.*)/,e)},centos:function(e){return j(/release ([^ ]+)/,e)},debian:function(e){return e},fedora:function(e){return j(/release (..)/,e)},mint:function(e){return j(/distrib_release=(.*)/,e)},red:function(e){return j(/release ([^ ]+)/,e)},suse:function(e){return j(/VERSION = (.*)\n/,e)},ubuntu:function(e){return j(/distrib_release=(.*)/,e)}},Kt;function j(e,t){var n=e.exec(t);return n?n[1]:void 0}function Ja(){if(process.mas)return"app-store";if(process.windowsStore)return"windows-store"}function Va(){return b(this,void 0,void 0,function(){var e,t;return E(this,function(n){switch(n.label){case 0:e={kernel_version:gt.release(),name:"Mac OS X",version:"10."+(Number(gt.release().split(".")[0])-4)},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,new Promise(function(r,i){or.execFile("/usr/bin/sw_vers",function(a,s){if(a){i(a);return}r(s)})})];case 2:return t=n.sent(),e.name=j(/^ProductName:\s+(.*)$/m,t),e.version=j(/^ProductVersion:\s+(.*)$/m,t),e.build=j(/^BuildVersion:\s+(.*)$/m,t),[3,4];case 3:return n.sent(),[3,4];case 4:return[2,e]}})})}function Ve(e){return e.split(" ")[0].toLowerCase()}function Xa(){return b(this,void 0,void 0,function(){var e,t,n,r,i,a,s;return E(this,function(o){switch(o.label){case 0:e={kernel_version:gt.release(),name:"Linux"},o.label=1;case 1:return o.trys.push([1,4,,5]),[4,ae("/etc")];case 2:return t=o.sent(),n=Ga.find(function(f){return t.includes(f.name)}),n?(r=I.join("/etc",n.name),[4,Ln(r,{encoding:"utf-8"})]):[2,e];case 3:return i=o.sent().toLowerCase(),a=n.distros,e.name=a.find(function(f){return i.indexOf(Ve(f))>=0})||a[0],s=Ve(e.name),e.version=$a[s](i),[3,5];case 4:return o.sent(),[3,5];case 5:return[2,e]}})})}function Ka(){return b(this,void 0,void 0,function(){var e;return E(this,function(t){switch(e=gt.platform(),e){case"darwin":return[2,Va()];case"linux":return[2,Xa()];default:return[2,{name:Ya[e]||e,version:gt.release()}]}})})}function Za(e){return b(this,void 0,void 0,function(){var t,n,r;return E(this,function(i){switch(i.label){case 0:return t=e||jn(),n={},r={app:{app_name:t,app_version:k.app.getVersion(),build_type:Ja()},browser:{name:"Chrome"},chrome:{name:"Chrome",type:"runtime",version:process.versions.chrome},device:{arch:process.arch,family:"Desktop"},node:{name:"Node",type:"runtime",version:process.versions.node}},[4,Ka()];case 1:return[2,(n.contexts=(r.os=i.sent(),r.runtime={name:"Electron",version:process.versions.electron},r),n.environment=process.defaultApp?"development":"production",n.extra={crashed_process:"browser"},n.release=t.replace(/\W/g,"-")+"@"+k.app.getVersion(),n.user={ip_address:"{{auto}}"},n)]}})})}function Bn(e,t){return b(this,void 0,void 0,function(){var n,r,i,a,s,o;return E(this,function(f){switch(f.label){case 0:return Kt||(Kt=Za(e)),n=t.contexts,r=n===void 0?{}:n,[4,Kt];case 1:return i=f.sent(),a=i.contexts,s=a===void 0?{}:a,o=cr(i,["contexts"]),[2,y(y(y({},o),t),{sdk:{name:za,packages:[{name:"npm:@sentry/electron",version:Je}],version:Je},contexts:y(y(y({},s),r),{app:y(y({},s.app),r.app),device:y(y({},s.device),r.device),os:y(y({},s.os),r.os),runtime:y(y({},s.runtime),r.runtime)}),extra:y(y({},o.extra),t.extra),user:y(y({},o.user),t.user)})]}})})}var Qa=k.app.getAppPath().replace(/\\/g,"/");function se(e,t){t===void 0&&(t=Qa);var n=t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),r=e;try{r=decodeURI(e)}catch{}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp("(file://)?/*"+n+"/*","ig"),"app:///")}function ts(e){var t=e.stacktrace,n=e.exception;if(t)return t;if(n){if(n[0])return n[0].stacktrace;var r=n;if(r.values&&r.values[0])return r.values[0].stacktrace}}function Wn(e){var t=ts(e);t&&t.frames&&t.frames.forEach(function(s){s.filename&&(s.filename=se(s.filename))});var n=e.request,r=n===void 0?{}:n;r.url&&(r.url=se(r.url)),r.headers&&delete r.headers["User-Agent"];var i=e.tags,a=i===void 0?{}:i;return delete a.server_name,e}var zn=function(){function e(t,n,r){this._path=I.join(t,n+".json"),this._initial=r,this._flushing=!1}return e.prototype.set=function(t){var n=this;this._data=t,this._flushing||(this._flushing=!0,setImmediate(function(){n._flush()}))},e.prototype.update=function(t){this.set(t(this.get()))},e.prototype.get=function(){if(this._data===void 0)try{this._data=P.existsSync(this._path)?JSON.parse(P.readFileSync(this._path,"utf8")):this._initial}catch{this._data=this._initial}return this._data},e.prototype.clear=function(){this.set(this._initial)},e.prototype._flush=function(){try{Hn(I.dirname(this._path)),P.writeFileSync(this._path,JSON.stringify(this._data))}catch(t){l.warn("Failed to flush store",t)}finally{this._flushing=!1}},e}(),es=1024*32;function ns(e){return new er.Readable({read:function(){this.push(e),this.push(null)}})}var we=function(e){oe(t,e);function t(n){var r=e.call(this,n)||this;return r.options=n,r._buffer=new un(30),r}return t.prototype.sendEvent=function(n){return b(this,void 0,void 0,function(){var r,i,a,s,o;return E(this,function(f){return r=JSON.stringify({event_id:n.event_id,sent_at:new Date(et()*1e3).toISOString()}),i=n.type==="transaction"?"transaction":"event",a=JSON.stringify({content_type:"application/json",type:n.type==="transaction"?"transaction":"event"}),this._isRateLimited(i)?[2,Promise.reject(new w("Transport locked till "+JSON.stringify(this._rateLimits,null,2)+" due to too many requests."))]:(s=JSON.stringify(n),o=Buffer.from(r+`
`+a+`
`+s+`
`),[2,this.sendRequest({body:o,url:this._api.getEnvelopeEndpointWithUrlEncodedAuth(),type:i})])})})},t.prototype.isRateLimited=function(n){return this._isRateLimited(n)},t.prototype.sendRequest=function(n){return b(this,void 0,void 0,function(){var r,i,a=this;return E(this,function(s){switch(s.label){case 0:return this._buffer.isReady()?[4,as()]:[2,Promise.reject(new w("Not adding Promise due to buffer limit reached."))];case 1:return s.sent(),r=this._getRequestOptions(new ir.URL(n.url)),r.headers=y(y({},r.headers),{"Content-Type":"application/x-sentry-envelope"}),i=ns(n.body),n.body.length>es&&(r.headers["Content-Encoding"]="gzip",i=i.pipe(nr.createGzip())),[2,this._buffer.add(new Promise(function(o,f){var u=k.net.request(r);u.on("error",f),u.on("response",function(c){c.on("error",f);var p=exports.Status.fromHttpCode(c.statusCode);if(c.statusCode&&c.statusCode>=200&&c.statusCode<300)o({status:p});else{if(p===exports.Status.RateLimit){var h=c.headers?c.headers["retry-after"]:"";h=Array.isArray(h)?h[0]:h;var v=c.headers?c.headers["x-sentry-rate-limits"]:"";v=Array.isArray(v)?v[0]:v;var m={"x-sentry-rate-limits":v,"retry-after":h},g=a._handleRateLimit(m);g&&l.warn("Too many requests, backing off until: "+a._disabledUntil(n.type))}if(c.headers&&c.headers["x-sentry-error"]){var _=c.headers["x-sentry-error"];Array.isArray(_)&&(_=_.join(", ")),f(new w("HTTP Error ("+c.statusCode+"): "+_))}else f(new w("HTTP Error ("+c.statusCode+")"))}c.on("data",function(){}),c.on("end",function(){})}),i.pipe(u)}))]}})})},t}(he),rs=30,is=10,Xe=function(){function e(t,n,r,i){this._crashesDirectory=n,this._cacheDirectory=r,this._transport=i;var a=process.platform==="win32"&&qa();this._type=process.platform==="darwin"||a?"crashpad":"breakpad",this._crashpadSubDirectory=process.platform==="darwin"?"completed":"reports",this._knownPaths=[],this._api=new vn(t),this._queue=new zn(this._cacheDirectory,"queue",[])}return e.minidumpUrlFromDsn=function(t){var n=t.host,r=t.path,i=t.projectId,a=t.port,s=t.protocol,o=t.user;return s+"://"+n+(a!==""?":"+a:"")+(r!==""?"/"+r:"")+"/api/"+i+"/minidump/?sentry_key="+o},e.prototype.uploadMinidump=function(t){return b(this,void 0,void 0,function(){var n,r,i,a,s;return E(this,function(o){switch(o.label){case 0:if(typeof this._transport.sendRequest!="function")return l.warn("Your transport doesn't implement sendRequest"),l.warn("Skipping sending minidump"),[2];l.log("Sending minidump",t.path),n=this._transport,o.label=1;case 1:return o.trys.push([1,10,,13]),r=void 0,n.isRateLimited("event")?[3,4]:[4,this._toMinidumpRequest(n,t.event,t.path)];case 2:return i=o.sent(),[4,n.sendRequest(i)];case 3:r=o.sent(),o.label=4;case 4:return o.trys.push([4,6,,7]),[4,lt(t.path)];case 5:return o.sent(),[3,7];case 6:return o.sent(),l.warn("Could not delete",t.path),[3,7];case 7:return this._queue.update(function(f){return f.filter(function(u){return u!==t})}),this._knownPaths.splice(this._knownPaths.indexOf(t.path),1),r&&r.status===exports.Status.Success?[4,this.flushQueue()]:[3,9];case 8:o.sent(),o.label=9;case 9:return[3,13];case 10:return a=o.sent(),l.warn("Failed to upload minidump",a),s=a||{code:""},s.code!=="ENOTFOUND"?[3,12]:[4,this._queueMinidump(t)];case 11:o.sent(),o.label=12;case 12:return[3,13];case 13:return[2]}})})},e.prototype.getNewMinidumps=function(){return b(this,void 0,void 0,function(){var t,n,r,i=this;return E(this,function(a){switch(a.label){case 0:return this._type!=="crashpad"?[3,2]:[4,this._scanCrashpadFolder()];case 1:return n=a.sent(),[3,4];case 2:return[4,this._scanBreakpadFolder()];case 3:n=a.sent(),a.label=4;case 4:return t=n,l.log("Found "+t.length+" minidumps"),r=new Date().getTime()-rs*24*3600*1e3,[2,this._filterAsync(t,function(s){return b(i,void 0,void 0,function(){var o;return E(this,function(f){switch(f.label){case 0:return this._knownPaths.indexOf(s)>=0?[2,!1]:(this._knownPaths.push(s),[4,Ba(s)]);case 1:if(o=f.sent(),!(o.birthtimeMs<r))return[3,6];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,lt(s)];case 3:return f.sent(),[3,5];case 4:return f.sent(),l.warn("Could not delete",s),[3,5];case 5:return this._knownPaths.splice(this._knownPaths.indexOf(s),1),[2,!1];case 6:return[2,!0]}})})})]}})})},e.prototype.flushQueue=function(){return b(this,void 0,void 0,function(){var t=this;return E(this,function(n){switch(n.label){case 0:return[4,Promise.all(this._queue.get().map(function(r){return b(t,void 0,void 0,function(){return E(this,function(i){return[2,this.uploadMinidump(r)]})})}))];case 1:return n.sent(),[2]}})})},e.prototype._filterAsync=function(t,n,r){return b(this,void 0,void 0,function(){var i;return E(this,function(a){switch(a.label){case 0:return[4,Promise.all(t.map(n,r))];case 1:return i=a.sent(),[2,t.filter(function(s,o){return i[o]})]}})})},e.prototype._scanCrashpadFolder=function(){return b(this,void 0,void 0,function(){var t,n;return E(this,function(r){switch(r.label){case 0:return Q(this._deleteCrashpadMetadataFile()),t=I.join(this._crashesDirectory,this._crashpadSubDirectory),[4,ae(t)];case 1:return n=r.sent(),[2,n.filter(function(i){return i.endsWith(".dmp")}).map(function(i){return I.join(t,i)})]}})})},e.prototype._deleteCrashpadMetadataFile=function(t){return t===void 0&&(t=100),b(this,void 0,void 0,function(){var n,r,i=this;return E(this,function(a){switch(a.label){case 0:if(t>2e3)return[2];n=I.join(this._crashesDirectory,"metadata"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,lt(n)];case 2:return a.sent(),l.log("Deleted Crashpad metadata file",n),[3,4];case 3:return r=a.sent(),r.code&&r.code=="EBUSY"&&setTimeout(function(){return b(i,void 0,void 0,function(){return E(this,function(s){switch(s.label){case 0:return[4,this._deleteCrashpadMetadataFile(t*2)];case 1:return s.sent(),[2]}})})},t),[3,4];case 4:return[2]}})})},e.prototype._scanBreakpadFolder=function(){return b(this,void 0,void 0,function(){var t,n=this;return E(this,function(r){switch(r.label){case 0:return[4,ae(this._crashesDirectory)];case 1:return t=r.sent(),Promise.all(t.filter(function(i){return i.endsWith(".txt")&&!i.endsWith("log.txt")}).map(function(i){return b(n,void 0,void 0,function(){var a;return E(this,function(s){switch(s.label){case 0:a=I.join(this._crashesDirectory,i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,lt(a)];case 2:return s.sent(),[3,4];case 3:return s.sent(),l.warn("Could not delete",a),[3,4];case 4:return[2]}})})})),[2,t.filter(function(i){return i.endsWith(".dmp")}).map(function(i){return I.join(n._crashesDirectory,i)})]}})})},e.prototype._parseBreakpadMultipartFile=function(t){return b(this,void 0,void 0,function(){var n,r,i;return E(this,function(a){return n=t.lastIndexOf("Content-Type: application/octet-stream"),n>0&&(r=t.indexOf("MDMP",n),i=t.lastIndexOf("----------------------------"),r>0&&i>0&&i>r)?[2,t.slice(r,i)]:[2,void 0]})})},e.prototype._queueMinidump=function(t){return b(this,void 0,void 0,function(){var n,r,i,a,s=this;return E(this,function(o){switch(o.label){case 0:return n=I.basename(t.path),this._queue.get().some(function(f){return I.basename(f.path)===n})?[2]:(r=I.join(this._cacheDirectory,n),[4,qn(this._cacheDirectory)]);case 1:return o.sent(),[4,Wa(t.path,r)];case 2:return o.sent(),i=yt(yt([],ue(this._queue.get())),[y(y({},t),{path:r})]),a=i.splice(-is),this._queue.set(i),[4,Promise.all(a.map(function(f){return b(s,void 0,void 0,function(){return E(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,lt(f.path)];case 1:return u.sent(),[3,3];case 2:return u.sent(),l.warn("Could not delete",f.path),[3,3];case 3:return[2]}})})}))];case 3:return o.sent(),[2]}})})},e.prototype._toMinidumpRequest=function(t,n,r){return b(this,void 0,void 0,function(){var i,a,s,o,f,u,c;return E(this,function(p){switch(p.label){case 0:return i=JSON.stringify({event_id:n.event_id,sent_at:new Date(et()*1e3).toISOString()}),t.isRateLimited("attachment")&&(n.message="Ratelimited - Minidump Event"),a=JSON.stringify({content_type:"application/json",type:"event"}),s=JSON.stringify(n),o=Buffer.from(i+`
`+a+`
`+s+`
`),t.isRateLimited("attachment")?[3,4]:[4,Ln(r)];case 1:return f=p.sent(),this._type==="crashpad"?[3,3]:[4,this._parseBreakpadMultipartFile(f)];case 2:u=p.sent(),u&&(f=u),p.label=3;case 3:return c=JSON.stringify({attachment_type:"event.minidump",length:f.length,type:"attachment",filename:I.basename(r)}),o=Buffer.concat([o,Buffer.from(c+`
`),f,Buffer.from(`
`)]),[3,5];case 4:l.warn("Will not add minidump to request since they are rate limited."),p.label=5;case 5:return[2,{body:o,url:this._api.getEnvelopeEndpointWithUrlEncodedAuth(),type:"event"}]}})})},e}();function Ke(){return I.join(k.app.getPath("userData"),"sentry")}function as(){return b(this,void 0,void 0,function(){return E(this,function(e){return[2,k.app.isReady()||new Promise(function(t){k.app.once("ready",function(){t(!0)})})]})})}function ut(e){return e!=null&&Object.keys(e).length>0}function ss(e){var t=S().getScope();return t?y(y(y({release:e.release,environment:e.environment},ut(t._user)&&{user:t._user}),ut(t._tags)&&{tags:t._tags}),ut(t._extra)&&{extra:t._extra}):{}}var Yn=function(e){oe(t,e);function t(n){var r=this;return n.autoSessionTracking=!1,r=e.call(this,n)||this,r._inner=new In(n),r._scopeStore=new zn(Ke(),"scope_v2",new L),r._scopeLastRun=r._scopeStore.get(),r._updateEpoch=0,r._setupScopeListener(),r._isNativeEnabled()&&Q(r._installNativeHandler()),r._installIPC(),r}return t.prototype.eventFromException=function(n,r){return this._inner.eventFromException(n,r)},t.prototype.eventFromMessage=function(n,r,i){return r===void 0&&(r=exports.Severity.Info),this._inner.eventFromMessage(n,r,i)},t.prototype.sendEvent=function(n){this._inner.sendEvent(n)},t.prototype.uploadMinidump=function(n,r){r===void 0&&(r={}),this._uploader&&Q(this._uploader.uploadMinidump({path:n,event:r}))},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var n=y(y(y(y(y({},this._options.transportOptions),this._options.httpProxy&&{httpProxy:this._options.httpProxy}),this._options.httpsProxy&&{httpsProxy:this._options.httpsProxy}),this._options.caCerts&&{caCerts:this._options.caCerts}),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(n):new we(n)},t.prototype._setupScopeListener=function(){var n=this,r=S().getScope();r&&r.addScopeListener(function(i){var a=L.clone(i);a._eventProcessors=[],a._scopeListeners=[],n._scopeStore.set(a),n._options.useCrashpadMinidumpUploader===!0&&process.platform!=="linux"&&n._updateExtraParams(a)})},t.prototype._updateExtraParams=function(n){var r=this;this._updateEpoch+=1;var i=this._updateEpoch;Q(this._getNativeUploaderEvent(n).then(function(a){var s,o;if(i===r._updateEpoch){var f=r._getNativeUploaderExtraParams(a);try{for(var u=fr(Object.keys(f)),c=u.next();!c.done;c=u.next()){var p=c.value;k.crashReporter.addExtraParameter(p,f[p])}}catch(h){s={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}}}))},t.prototype._getNativeUploaderEvent=function(n){return b(this,void 0,void 0,function(){var r;return E(this,function(i){switch(i.label){case 0:return r={tags:{event_type:"native"}},[4,n.applyToEvent(r)];case 1:return i.sent(),[4,Bn(this._options.appName,r)];case 2:return r=i.sent(),[2,Wn(r)]}})})},t.prototype._getNativeUploaderExtraParams=function(n){for(var r=20300,i=Buffer.from(JSON.stringify(n)),a=[];i.length;){var s=i.lastIndexOf(34,r+1);s<0&&(s=i.lastIndexOf(32,r+1)),s<0&&(s=i.indexOf(34,r)),s<0&&(s=i.indexOf(32,r)),s<0&&(s=r),a.push(i.slice(0,s+1).toString()),i=i.slice(s+1)}return a.reduce(function(o,f,u){return o["sentry__"+(u+1)]=f,o},{})},t.prototype._isNativeEnabled=function(){return process.mas?!1:this._options.enableNative!==!1},t.prototype._installNativeHandler=function(){return b(this,void 0,void 0,function(){var n,r,i,a,s,o=this;return E(this,function(f){if(n=this._options.dsn,!n)throw new w("Attempted to enable Electron native crash reporter but no DSN was supplied");return r=process.platform!=="linux"?{sentry___initialScope:JSON.stringify(ss(this._options))}:void 0,i=new Ft(n),k.crashReporter.start({companyName:"",ignoreSystemCrashHandler:!0,productName:this._options.appName||jn(),submitURL:Xe.minidumpUrlFromDsn(i),uploadToServer:this._options.useCrashpadMinidumpUploader||!1,compress:!0,globalExtra:r}),this._options.useSentryMinidumpUploader!==!1&&(a=Ha()?k.app.getPath("crashDumps"):k.crashReporter.getCrashesDirectory(),this._uploader=new Xe(i,a,Ke(),this.getTransport()),Q(this._uploader.flushQueue()),Q(this._sendNativeCrashes({}))),s=function(u,c){return b(o,void 0,void 0,function(){var p;return E(this,function(h){switch(h.label){case 0:if(this._options.useSentryMinidumpUploader===!1)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._sendNativeCrashes(this._getNewEventWithElectronContext(u,c))];case 2:return h.sent(),[3,4];case 3:return p=h.sent(),console.error(p),[3,4];case 4:return hn({category:"exception",level:exports.Severity.Critical,message:"Renderer Crashed"}),[2]}})})},k.app.on("web-contents-created",function(u,c){La()?c.on("render-process-gone",function(p,h){return b(o,void 0,void 0,function(){return E(this,function(v){switch(v.label){case 0:return[4,s(c,h)];case 1:return v.sent(),[2]}})})}):c.on("crashed",function(){return b(o,void 0,void 0,function(){return E(this,function(p){switch(p.label){case 0:return[4,s(c)];case 1:return p.sent(),[2]}})})}),o._options.enableUnresponsive!==!1&&c.on("unresponsive",function(){pn("BrowserWindow Unresponsive")})}),[2]})})},t.prototype._installIPC=function(){var n=this;k.ipcMain.on(Rt.PING,function(r){r.sender.send(Rt.PING)}),k.ipcMain.on(Rt.EVENT,function(r,i){var a;try{a=JSON.parse(i)}catch{console.warn("sentry-electron received an invalid IPC_EVENT message");return}a.contexts=y(y({},n._getNewEventWithElectronContext(r.sender).contexts),a.contexts),dn(a)}),k.ipcMain.on(Rt.SCOPE,function(r,i){var a;try{a=JSON.parse(i)}catch{console.warn("sentry-electron received an invalid IPC_SCOPE message");return}var s=L.clone(a);ln(function(o){ut(s._user)&&o.setUser(s._user),ut(s._tags)&&o.setTags(s._tags),ut(s._extra)&&o.setExtras(s._extra),o.addBreadcrumb(s._breadcrumbs.pop(),n._options.maxBreadcrumbs)})})},t.prototype._sendNativeCrashes=function(n){return b(this,void 0,void 0,function(){var r,i,a,s,o;return E(this,function(f){switch(f.label){case 0:if(this._options.useSentryMinidumpUploader===!1)return[2];if(r=this._uploader,r===void 0)throw new w("Invariant violation: Native crashes not enabled");f.label=1;case 1:return f.trys.push([1,7,,8]),[4,r.getNewMinidumps()];case 2:return i=f.sent(),i.length>0?(a=L.clone(S().getScope()),s=L.clone(this._scopeLastRun),[4,s.applyToEvent(n)]):[3,6];case 3:return o=f.sent(),o?[4,a.applyToEvent(o)]:[3,5];case 4:o=f.sent(),i.map(function(u){Vn(u,y({},o))}),f.label=5;case 5:this._scopeLastRun=void 0,f.label=6;case 6:return[3,8];case 7:return f.sent(),l.error("Error while sending native crash."),[3,8];case 8:return[2]}})})},t.prototype._getNewEventWithElectronContext=function(n,r){var i=this._options.getRendererName&&this._options.getRendererName(n),a={crashed_process:i||"renderer["+n.id+"]",crashed_url:se(n.getURL())};return r&&(a.details=r),{contexts:{electron:a}}},t}(_n),Gn=function(e){oe(t,e);function t(n){return e.call(this,Yn,n)||this}return t.prototype.captureMinidump=function(n,r,i){var a=this;r===void 0&&(r={});var s;return this._processing+=1,r.tags=y({event_type:"native"},r.tags),this._prepareEvent(r,i,void 0).then(function(o){o&&(s=o&&o.event_id,a._getBackend().uploadMinidump(n,o)),a._processing-=1},function(o){l.error(o),a._processing-=1}),s},t.prototype.captureEvent=function(n,r,i){return n.tags=y({event_type:"javascript"},n.tags),e.prototype.captureEvent.call(this,n,r,i)},t.prototype.showReportDialog=function(n){},t.prototype._prepareEvent=function(n,r,i){var a=this;return n.platform=n.platform||"node",e.prototype._prepareEvent.call(this,n,r,i).then(function(s){return new O(function(o){return b(a,void 0,void 0,function(){var f,u;return E(this,function(c){switch(c.label){case 0:return s?(f=o,u=Wn,[4,Bn(this._options.appName,s)]):[3,2];case 1:return f.apply(void 0,[u.apply(void 0,[c.sent()])]),[3,3];case 2:o(s),c.label=3;case 3:return[2]}})})}).then(function(o){return o})})},t}(mn),$n=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){var t=this;this._instrumentBreadcrumbs("app",k.app,function(n){return!n.startsWith("remote-")}),k.app.once("ready",function(){t._instrumentBreadcrumbs("Screen",k.screen),t._instrumentBreadcrumbs("PowerMonitor",k.powerMonitor)}),k.app.on("web-contents-created",function(n,r){setImmediate(function(){if(!r.isDestroyed()){var i=S().getClient().getOptions(),a=i.getRendererName&&i.getRendererName(r);t._instrumentBreadcrumbs(a||"WebContents["+r.id+"]",r,function(s){return["dom-ready","load-url","destroyed"].includes(s)})}})})},e.prototype._instrumentBreadcrumbs=function(t,n,r){var i=n.emit.bind(n);n.emit=function(a){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(r===void 0||r(a)){var f={category:"electron",message:t+"."+a,timestamp:new Date().getTime()/1e3,type:"ui"},u=S().getIntegration(e);u&&S().addBreadcrumb(f)}return i.apply(void 0,yt([a],ue(s)))}},e.id="Electron",e}(),Jn=function(){function e(t){t===void 0&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){var t=this;global.process.on("uncaughtException",function(n){var r=S().getIntegration(e);r&&S().withScope(function(i){return b(t,void 0,void 0,function(){var a,s,o,f,u,c=this;return E(this,function(p){switch(p.label){case 0:return i.addEventProcessor(function(h){return b(c,void 0,void 0,function(){return E(this,function(v){return[2,y(y({},h),{level:exports.Severity.Fatal})]})})}),a=n,!ce(n)&&n.stack&&(a=new Error,a.message=n.message,a.stack=n.stack,a.name=n.name),s=S().getClient(),s.captureException(a,{originalException:n},S().getScope()),[4,s.flush(s.getOptions().shutdownTimeout||2e3)];case 1:return p.sent(),this._options.onFatalError?this._options.onFatalError(n):global.process.listenerCount("uncaughtException")<=2&&(console.error("Uncaught Exception:"),console.error(n),o=n.stack,f=o!==void 0?o:n.name+": "+n.message,u=`Uncaught Exception:
`+f,k.dialog.showErrorBox("A JavaScript error occurred in the main process",u)),[2]}})})})})},e.id="OnUncaughtException",e}(),os={Electron:$n,OnUncaughtException:Jn};function us(e){var t=Wi.filter(function(n){return n.name!=="OnUncaughtException"});e.defaultIntegrations===void 0&&(e.defaultIntegrations=yt(yt([],ue(t)),[new Jn({onFatalError:e.onFatalError}),new $n])),gi(Gn,y({transport:we},e))}function cs(){}function Vn(e,t){t===void 0&&(t={}),di("captureMinidump",e,t)}function fs(e){return b(this,void 0,void 0,function(){var t;return E(this,function(n){return t=S().getClient(),t?[2,t.flush(e)]:[2,Promise.reject(!1)]})})}function ps(e){return b(this,void 0,void 0,function(){var t;return E(this,function(n){return t=S().getClient(),t?[2,t.close(e)]:[2,Promise.reject(!1)]})})}exports.ElectronIntegrations=os;exports.Hub=wt;exports.MainBackend=Yn;exports.MainClient=Gn;exports.NetTransport=we;exports.NodeIntegrations=ja;exports.Scope=L;exports.addBreadcrumb=hn;exports.addGlobalEventProcessor=jt;exports.captureEvent=dn;exports.captureException=ii;exports.captureMessage=pn;exports.captureMinidump=Vn;exports.close=ps;exports.configureScope=ln;exports.flush=fs;exports.getCurrentHub=S;exports.getHubFromCarrier=z;exports.init=us;exports.setContext=ai;exports.setExtra=ui;exports.setExtras=si;exports.setTag=ci;exports.setTags=oi;exports.setUser=fi;exports.showReportDialog=cs;exports.withScope=pi;
