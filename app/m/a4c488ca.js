"use strict";var Zt=Object.defineProperty;var He=Object.getOwnPropertySymbols;var Gt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable;var Ze=(t,e,r)=>e in t?Zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ge=(t,e)=>{for(var r in e||(e={}))Gt.call(e,r)&&Ze(t,r,e[r]);if(He)for(var r of He(e))Kt.call(e,r)&&Ze(t,r,e[r]);return t};var Qt=require("os"),U=require("electron"),D=require("path"),Xt=require("crypto"),Ke=require("zlib"),Yt=require("util"),ee=require("fs"),le=require("fs/promises"),xe=require("./7edd76f7.js"),er=require("./bdb0de64.js");function Qe(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var tr=Qe(Qt),Xe=Qe(D),rr=(t,e)=>{var r,n;for(r in e)n=e[r],t.on(r,n);return t},Ye,et,tt;Ye=Xe.default.join(__dirname,"../w/index.html"),et=(t,e)=>{t.loadFile(Ye,{hash:e})};tt=Xe.default.join(__dirname,"../p/p.js");var fe=new Proxy({},{get:(t,e)=>r=>{var n;return r=Ge({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,webPreferences:{preload:tt}},r),n=new U.BrowserWindow(r),et(n,e),n.once("ready-to-show",()=>n.show()),n.focus(),n}});var rt;({main:rt}=fe);var he=()=>{var t,e;return t=U.BrowserWindow.getAllWindows(),t.length?(e=t[0],e.isMinimized()&&e.restore(),e.show(),e.focus()):rt({resizable:!1,height:585,width:426})};var nt,it,st,nr,Oe;({Menu:nt,Tray:it,app:st,globalShortcut:nr}=require("electron"));Oe=void 0;var ir=()=>{var t;Oe=new it(D.join(__dirname,"../w/tray/trayTemplate.png")),t=nt.buildFromTemplate([{label:"\u663E\u793A\u754C\u9762",click:he,accelerator:"CmdOrCtrl+Shift+R"},{type:"separator"},{accelerator:"CmdOrCtrl+Shift+Q",label:"\u9000\u51FA",click:()=>st.quit()}]),Oe.setContextMenu(t)};var at;at=t=>{var e,r,n,s,l,o,h,y;t&&(t.devToolsWebContents||({webContents:l}=t,e=new U.BrowserWindow({minimizable:!1,maximizable:!1}),[s,r]=t.getSize(),[h,y]=t.getPosition(),{width:o,height:n}=U.screen.getPrimaryDisplay().workArea,l.setDevToolsWebContents(e.webContents),l.openDevTools({mode:"detach"}),s>r?(y=0,s=0,r+=20,n-=r):(h=0,r=0,o-=s),e.setPosition(s,r),t.setPosition(h,y),e.setSize(o,n),t.focus()))};var sr=()=>{U.globalShortcut.register("CmdOrCtrl+Alt+I",()=>at(U.BrowserWindow.getFocusedWindow()))};var ge=t=>{U.BrowserWindow.getAllWindows().forEach(e=>{var r,n;if(n=e.webContents.getURL(),n&&({hash:r}=new URL(n),r.startsWith("#main"))){t?e[t]():e.hide();return}e.close(),e.destroy()})};var lt,Z;({count_down:lt}=fe);Z=void 0;var ft=()=>{var t;if(Z){Z.focus();return}t=240,Z=lt({width:t,height:t,transparent:!0,resizable:!1,hasShadow:!1}),Z.on("close",()=>{Z=void 0}),Z.setAlwaysOnTop(!0,"screen-saver")},ar={close:()=>{Z!=null&&Z.close()}},ot,E;({recbar:ot}=fe);E=void 0;var ut=()=>{var t,e,r;return e={width:568,height:48,roundedCorners:!1,transparent:!0,shadow:!1,resizable:!1},{width:r,height:t}=U.screen.getPrimaryDisplay().workArea,E=ot(e),E.setPosition((r-e.width)/2,t-28-e.height),E.on("close",()=>E=void 0),E.on("system-context-menu",(n,s)=>{n.preventDefault()}),pe(),new Promise(n=>E.webContents.on("did-finish-load",()=>{pe(),E.focus(),n(E)}))},pe=()=>{E.setAlwaysOnTop(!0,"screen-saver")},lr=()=>{var t,e,r;e=E.getPosition(),[r,t]=E.size,E.setSize(r,t),E.setPosition(e[0]-r+42,e[1]-t+42),E.setHasShadow(!0)},fr=()=>{var t,e,r;t=E.getPosition(),E.size=e=E.getSize(),r=36,E.setSize(r,r),r+=6,E.setPosition(t[0]+e[0]-r,t[1]+e[1]-r),E.setHasShadow(!1)},or=()=>{ge("show")},ur=()=>{ge("showInactive")},cr=()=>{E.hide()},dr=async()=>{var t,e;e=await U.desktopCapturer.getSources({types:["screen"],thumbnailSize:{width:0,height:0}});for(t of e)return t.id},xr=async t=>{var e,r;r=await E.webContents.executeJavaScript("localStorage.user_id",!0),e=`https://oss.console.aliyun.com/bucket/oss-cn-zhangjiakou/i-v/object?path=${r}/${t}/`,U.shell.openExternal(e),U.BrowserWindow.getAllWindows().forEach(n=>n.hide())},hr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",\u5DE5\u5177\u6761:ut,top:pe,expand:lr,left:fr,cancel:or,end:ur,hide:cr,screen_source:dr,stop:xr});var ct,te;({area:ct}=fe);te=void 0;var gr=()=>{var t,e;({width:e,height:t}=U.screen.getPrimaryDisplay().size),te=ct({width:e,height:t,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1}),te.setAlwaysOnTop(!0,"screen-saver"),te.setPosition(0,0),te.on("close",()=>te=void 0)},pr=()=>{te.setIgnoreMouseEvents(!0,{forward:!0}),ft(),pe()},we,wr,dt;({camera:dt,area:wr}=fe);we={camera:(t,e)=>{var r;return r=dt({width:800,height:500,center:!0,roundedCorners:!1,resizable:!1}),r.setAlwaysOnTop(!0),r},screen:(t,e,r)=>{},all:(t,e,r)=>{}};(()=>{var t,e,r,n,s;n=(l,o)=>function(h,y,w){w===1&&l!=="camera"?gr():(ft(),o.apply(this,arguments)),ut()},e=Object.entries(we);for(s of e)[t,r]=s,we[t]=n(t,r)})();var yr=Object.freeze(we),br=(t,e,r,n)=>{ge(),yr[t](e,r,n)},Ae;try{Ae=new TextDecoder}catch{}var d,Q,i=0,M={},m,X,q=0,W=0,z,G,L=[],v,xt={useRecords:!1,mapsAsObjects:!0};class ht{}const gt=new ht;gt.name="MessagePack 0xC1";var ne=!1;class oe{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,r){if(d)return Et(()=>(Te(),this?this.unpack(e,r):oe.prototype.unpack.call(xt,e,r)));Q=r>-1?r:e.length,i=0,W=0,X=null,z=null,d=e;try{v=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw d=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof oe){if(M=this,this.structures)return m=this.structures,ye();(!m||m.length>0)&&(m=[])}else M=xt,(!m||m.length>0)&&(m=[]);return ye()}unpackMultiple(e,r){let n,s=0;try{ne=!0;let l=e.length,o=this?this.unpack(e,l):me.unpack(e,l);if(r){for(r(o);i<l;)if(s=i,r(ye())===!1)return}else{for(n=[o];i<l;)s=i,n.push(ye());return n}}catch(l){throw l.lastPosition=s,l.values=n,l}finally{ne=!1,Te()}}_mergeStructures(e,r){e=e||[];for(let n=0,s=e.length;n<s;n++){let l=e[n];l&&(l.isShared=!0,n>=32&&(l.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in r||[])if(n>=0){let s=e[n],l=r[n];l&&(s&&((e.restoreStructures||(e.restoreStructures=[]))[n]=s),e[n]=l)}return this.structures=e}decode(e,r){return this.unpack(e,r)}}function ye(){try{if(!M.trusted&&!ne){let e=m.sharedLength||0;e<m.length&&(m.length=e)}let t=O();if(i==Q)m.restoreStructures&&pt(),m=null,d=null,G&&(G=null);else if(i>Q){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!ne)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw m.restoreStructures&&pt(),Te(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function pt(){for(let t in m.restoreStructures)m[t]=m.restoreStructures[t];m.restoreStructures=null}function O(){let t=d[i++];if(t<160)if(t<128){if(t<64)return t;{let e=m[t&63]||M.getStructures&&yt()[t&63];return e?(e.read||(e.read=je(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,M.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[kt()]=O();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(O(),O());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=O();return e}else if(t<192){let e=t-160;if(W>=i)return X.slice(i-q,(i+=e)-q);if(W==0&&Q<140){let r=e<16?Pe(e):St(e);if(r!=null)return r}return Ie(e)}else{let e;switch(t){case 192:return null;case 193:return z?(e=O(),e>0?z[1].slice(z.position1,z.position1+=e):z[0].slice(z.position0,z.position0-=e)):gt;case 194:return!1;case 195:return!0;case 196:return Ce(d[i++]);case 197:return e=v.getUint16(i),i+=2,Ce(e);case 198:return e=v.getUint32(i),i+=4,Ce(e);case 199:return re(d[i++]);case 200:return e=v.getUint16(i),i+=2,re(e);case 201:return e=v.getUint32(i),i+=4,re(e);case 202:if(e=v.getFloat32(i),M.useFloat32>2){let r=Me[(d[i]&127)<<1|d[i+1]>>7];return i+=4,(r*e+(e>0?.5:-.5)>>0)/r}return i+=4,e;case 203:return e=v.getFloat64(i),i+=8,e;case 204:return d[i++];case 205:return e=v.getUint16(i),i+=2,e;case 206:return e=v.getUint32(i),i+=4,e;case 207:return M.int64AsNumber?(e=v.getUint32(i)*4294967296,e+=v.getUint32(i+4)):e=v.getBigUint64(i),i+=8,e;case 208:return v.getInt8(i++);case 209:return e=v.getInt16(i),i+=2,e;case 210:return e=v.getInt32(i),i+=4,e;case 211:return M.int64AsNumber?(e=v.getInt32(i)*4294967296,e+=v.getUint32(i+4)):e=v.getBigInt64(i),i+=8,e;case 212:if(e=d[i++],e==114)return _t(d[i++]&63);{let r=L[e];if(r)return r.read?(i++,r.read(O())):r.noBuffer?(i++,r()):r(d.subarray(i,++i));throw new Error("Unknown extension "+e)}case 213:return e=d[i],e==114?(i++,_t(d[i++]&63,d[i++])):re(2);case 214:return re(4);case 215:return re(8);case 216:return re(16);case 217:return e=d[i++],W>=i?X.slice(i-q,(i+=e)-q):Sr(e);case 218:return e=v.getUint16(i),i+=2,W>=i?X.slice(i-q,(i+=e)-q):vr(e);case 219:return e=v.getUint32(i),i+=4,W>=i?X.slice(i-q,(i+=e)-q):kr(e);case 220:return e=v.getUint16(i),i+=2,bt(e);case 221:return e=v.getUint32(i),i+=4,bt(e);case 222:return e=v.getUint16(i),i+=2,mt(e);case 223:return e=v.getUint32(i),i+=4,mt(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}const mr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function je(t,e){function r(){if(r.count++>2){let s=t.read=new Function("r","return function(){return {"+t.map(l=>mr.test(l)?l+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}}")(O);return t.highByte===0&&(t.read=wt(e,t.read)),s()}let n={};for(let s=0,l=t.length;s<l;s++){let o=t[s];n[o]=O()}return n}return r.count=0,t.highByte===0?wt(e,r):r}const wt=(t,e)=>function(){let r=d[i++];if(r===0)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),s=m[n]||yt()[n];if(!s)throw new Error("Record id is not defined for "+n);return s.read||(s.read=je(s,t)),s.read()};function yt(){let t=Et(()=>(d=null,M.getStructures()));return m=M._mergeStructures(t,m)}var Ie=be,Sr=be,vr=be,kr=be;function be(t){let e;if(t<16&&(e=Pe(t)))return e;if(t>64&&Ae)return Ae.decode(d.subarray(i,i+=t));const r=i+t,n=[];for(e="";i<r;){const s=d[i++];if((s&128)==0)n.push(s);else if((s&224)==192){const l=d[i++]&63;n.push((s&31)<<6|l)}else if((s&240)==224){const l=d[i++]&63,o=d[i++]&63;n.push((s&31)<<12|l<<6|o)}else if((s&248)==240){const l=d[i++]&63,o=d[i++]&63,h=d[i++]&63;let y=(s&7)<<18|l<<12|o<<6|h;y>65535&&(y-=65536,n.push(y>>>10&1023|55296),y=56320|y&1023),n.push(y)}else n.push(s);n.length>=4096&&(e+=P.apply(String,n),n.length=0)}return n.length>0&&(e+=P.apply(String,n)),e}function bt(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=O();return e}function mt(t){if(M.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[kt()]=O();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(O(),O());return e}}var P=String.fromCharCode;function St(t){let e=i,r=new Array(t);for(let n=0;n<t;n++){const s=d[i++];if((s&128)>0){i=e;return}r[n]=s}return P.apply(String,r)}function Pe(t){if(t<4)if(t<2){if(t===0)return"";{let e=d[i++];if((e&128)>1){i-=1;return}return P(e)}}else{let e=d[i++],r=d[i++];if((e&128)>0||(r&128)>0){i-=2;return}if(t<3)return P(e,r);let n=d[i++];if((n&128)>0){i-=3;return}return P(e,r,n)}else{let e=d[i++],r=d[i++],n=d[i++],s=d[i++];if((e&128)>0||(r&128)>0||(n&128)>0||(s&128)>0){i-=4;return}if(t<6){if(t===4)return P(e,r,n,s);{let l=d[i++];if((l&128)>0){i-=5;return}return P(e,r,n,s,l)}}else if(t<8){let l=d[i++],o=d[i++];if((l&128)>0||(o&128)>0){i-=6;return}if(t<7)return P(e,r,n,s,l,o);let h=d[i++];if((h&128)>0){i-=7;return}return P(e,r,n,s,l,o,h)}else{let l=d[i++],o=d[i++],h=d[i++],y=d[i++];if((l&128)>0||(o&128)>0||(h&128)>0||(y&128)>0){i-=8;return}if(t<10){if(t===8)return P(e,r,n,s,l,o,h,y);{let w=d[i++];if((w&128)>0){i-=9;return}return P(e,r,n,s,l,o,h,y,w)}}else if(t<12){let w=d[i++],B=d[i++];if((w&128)>0||(B&128)>0){i-=10;return}if(t<11)return P(e,r,n,s,l,o,h,y,w,B);let j=d[i++];if((j&128)>0){i-=11;return}return P(e,r,n,s,l,o,h,y,w,B,j)}else{let w=d[i++],B=d[i++],j=d[i++],_=d[i++];if((w&128)>0||(B&128)>0||(j&128)>0||(_&128)>0){i-=12;return}if(t<14){if(t===12)return P(e,r,n,s,l,o,h,y,w,B,j,_);{let I=d[i++];if((I&128)>0){i-=13;return}return P(e,r,n,s,l,o,h,y,w,B,j,_,I)}}else{let I=d[i++],R=d[i++];if((I&128)>0||(R&128)>0){i-=14;return}if(t<15)return P(e,r,n,s,l,o,h,y,w,B,j,_,I,R);let $=d[i++];if(($&128)>0){i-=15;return}return P(e,r,n,s,l,o,h,y,w,B,j,_,I,R,$)}}}}}function Ce(t){return M.copyBuffers?Uint8Array.prototype.slice.call(d,i,i+=t):d.subarray(i,i+=t)}function re(t){let e=d[i++];if(L[e])return L[e](d.subarray(i,i+=t));throw new Error("Unknown extension type "+e)}var vt=new Array(4096);function kt(){let t=d[i++];if(t>=160&&t<192){if(t=t-160,W>=i)return X.slice(i-q,(i+=t)-q);if(!(W==0&&Q<180))return Ie(t)}else return i--,O();let e=(t<<5^(t>1?v.getUint16(i):t>0?d[i]:0))&4095,r=vt[e],n=i,s=i+t-3,l,o=0;if(r&&r.bytes==t){for(;n<s;){if(l=v.getUint32(n),l!=r[o++]){n=1879048192;break}n+=4}for(s+=3;n<s;)if(l=d[n++],l!=r[o++]){n=1879048192;break}if(n===s)return i=n,r.string;s-=3,n=i}for(r=[],vt[e]=r,r.bytes=t;n<s;)l=v.getUint32(n),r.push(l),n+=4;for(s+=3;n<s;)l=d[n++],r.push(l);let h=t<16?Pe(t):St(t);return h!=null?r.string=h:r.string=Ie(t)}const _t=(t,e)=>{var r=O();let n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let s=m[t];return s&&s.isShared&&((m.restoreStructures||(m.restoreStructures=[]))[t]=s),m[t]=r,r.read=je(r,n),r.read()};var Ut=typeof self=="object"?self:global;L[0]=()=>{};L[0].noBuffer=!0;L[101]=()=>{let t=O();return(Ut[t[0]]||Error)(t[1])};L[105]=t=>{let e=v.getUint32(i-4);G||(G=new Map);let r=d[i],n;r>=144&&r<160||r==220||r==221?n=[]:n={};let s={target:n};G.set(e,s);let l=O();return s.used?Object.assign(n,l):(s.target=l,l)};L[112]=t=>{let e=v.getUint32(i-4),r=G.get(e);return r.used=!0,r.target};L[115]=()=>new Set(O());const Bt=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");L[116]=t=>{let e=t[0],r=Bt[e];if(!r)throw new Error("Could not find typed array for code "+e);return new Ut[r](Uint8Array.prototype.slice.call(t,1).buffer)};L[120]=()=>{let t=O();return new RegExp(t[0],t[1])};L[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=i;i+=e-4,z=[O(),O()],z.position0=0,z.position1=0;let n=i;i=r;try{return O()}finally{i=n}};L[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Et(t){let e=Q,r=i,n=q,s=W,l=X,o=G,h=z,y=new Uint8Array(d.slice(0,Q)),w=m,B=m.slice(0,m.length),j=M,_=ne,I=t();return Q=e,i=r,q=n,W=s,X=l,G=o,z=h,d=y,ne=_,m=w,m.splice(0,m.length,...B),M=j,v=new DataView(d.buffer,d.byteOffset,d.byteLength),I}function Te(){d=null,G=null,m=null}const Me=new Array(147);for(let t=0;t<256;t++)Me[t]=+("1e"+Math.floor(45.15-t*.30103));var me=new oe({useRecords:!1});const _r=me.unpack;me.unpackMultiple;me.unpack;let Ur=new Float32Array(1);new Uint8Array(Ur.buffer,0,4);let Se;try{Se=new TextEncoder}catch{}let Re,Ot;const ve=typeof Buffer!="undefined",De=ve?Buffer.allocUnsafeSlow:Uint8Array,At=ve?Buffer:Uint8Array,jt=ve?4294967296:2144337920;let f,A,a=0,J,H=null;const Br=/[\u0080-\uFFFF]/,ue=Symbol("record-id");class Er extends oe{constructor(e){super(e);this.offset=0;let r,n,s,l,o,h=0,y=At.prototype.utf8Write?function(u,b,c){return f.utf8Write(u,b,c)}:Se&&Se.encodeInto?function(u,b){return Se.encodeInto(u,f.subarray(b)).written}:!1,w=this;e||(e={});let B=e&&e.sequential,j=e.structures||e.saveStructures,_=e.maxSharedStructures;if(_==null&&(_=j?32:0),_>8160)throw new Error("Maximum maxSharedStructure is 8160");let I=e.maxOwnStructures;I==null&&(I=j?32:64),B&&!e.saveStructures&&(this.structures=[]);let R=_>32||I+_>64,$=_+64,K=_+I+64;if(K>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let F=[],Y=0,N=0;this.pack=this.encode=function(u,b){if(f||(f=new De(8192),A=new DataView(f.buffer,0,8192),a=0),J=f.length-10,J-a<2048?(f=new De(f.length),A=new DataView(f.buffer,0,f.length),J=f.length-10,a=0):a=a+7&2147483640,r=a,o=w.structuredClone?new Map:null,w.bundleStrings?(H=["",""],f[a++]=214,f[a++]=98,H.position=a-r,a+=4):H=null,n=w.structures,n){n.uninitialized&&(n=w._mergeStructures(w.getStructures()));let c=n.sharedLength||0;if(c>_)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let p=0;p<c;p++){let x=n[p];if(!x)continue;let g,k=n.transitions;for(let S=0,V=x.length;S<V;S++){let T=x[S];g=k[T],g||(g=k[T]=Object.create(null)),k=g}k[ue]=p+64}h=c}B||(n.nextId=c+64)}s&&(s=!1),l=n||[];try{if(C(u),H){A.setUint32(H.position+r,a-H.position-r);let c=H;H=null,C(c[0]),C(c[1])}if(w.offset=a,o&&o.idsToInsert){a+=o.idsToInsert.length*6,a>J&&se(a),w.offset=a;let c=Ar(f.subarray(r,a),o.idsToInsert);return o=null,c}return b&jr?(f.start=r,f.end=a,f):f.subarray(r,a)}finally{if(n){if(N<10&&N++,Y>1e4)n.transitions=null,N=0,Y=0,F.length>0&&(F=[]);else if(F.length>0&&!B){for(let c=0,p=F.length;c<p;c++)F[c][ue]=0;F=[]}if(s&&w.saveStructures){let c=n.sharedLength||_;n.length>c&&(n=n.slice(0,c));let p=f.subarray(r,a);return w.saveStructures(n,h)===!1?(w._mergeStructures(w.getStructures()),w.pack(u)):(h=c,p)}}b&Ir&&(a=r)}};const C=u=>{a>J&&(f=se(a));var b=typeof u,c;if(b==="string"){let p=u.length;if(H&&p>=8&&p<4096){let k=Br.test(u);H[k?0:1]+=u,f[a++]=193,C(k?-p:p);return}let x;p<32?x=1:p<256?x=2:p<65536?x=3:x=5;let g=p*3;if(a+g>J&&(f=se(a+g)),p<64||!y){let k,S,V,T=a+x;for(k=0;k<p;k++)S=u.charCodeAt(k),S<128?f[T++]=S:S<2048?(f[T++]=S>>6|192,f[T++]=S&63|128):(S&64512)==55296&&((V=u.charCodeAt(k+1))&64512)==56320?(S=65536+((S&1023)<<10)+(V&1023),k++,f[T++]=S>>18|240,f[T++]=S>>12&63|128,f[T++]=S>>6&63|128,f[T++]=S&63|128):(f[T++]=S>>12|224,f[T++]=S>>6&63|128,f[T++]=S&63|128);c=T-a-x}else c=y(u,a+x,g);c<32?f[a++]=160|c:c<256?(x<2&&f.copyWithin(a+2,a+1,a+1+c),f[a++]=217,f[a++]=c):c<65536?(x<3&&f.copyWithin(a+3,a+2,a+2+c),f[a++]=218,f[a++]=c>>8,f[a++]=c&255):(x<5&&f.copyWithin(a+5,a+3,a+3+c),f[a++]=219,A.setUint32(a,c),a+=4),a+=c}else if(b==="number")if(u>>>0===u)u<64?f[a++]=u:u<256?(f[a++]=204,f[a++]=u):u<65536?(f[a++]=205,f[a++]=u>>8,f[a++]=u&255):(f[a++]=206,A.setUint32(a,u),a+=4);else if(u>>0===u)u>=-32?f[a++]=256+u:u>=-128?(f[a++]=208,f[a++]=u+256):u>=-32768?(f[a++]=209,A.setInt16(a,u),a+=2):(f[a++]=210,A.setInt32(a,u),a+=4);else{let p;if((p=this.useFloat32)>0&&u<4294967296&&u>=-2147483648){f[a++]=202,A.setFloat32(a,u);let x;if(p<4||(x=u*Me[(f[a]&127)<<1|f[a+1]>>7])>>0===x){a+=4;return}else a--}f[a++]=203,A.setFloat64(a,u),a+=8}else if(b==="object")if(!u)f[a++]=192;else{if(o){let x=o.get(u);if(x){if(!x.id){let g=o.idsToInsert||(o.idsToInsert=[]);x.id=g.push(x)}f[a++]=214,f[a++]=112,A.setUint32(a,x.id),a+=4;return}else o.set(u,{offset:a-r})}let p=u.constructor;if(p===Object)We(u,!0);else if(p===Array){c=u.length,c<16?f[a++]=144|c:c<65536?(f[a++]=220,f[a++]=c>>8,f[a++]=c&255):(f[a++]=221,A.setUint32(a,c),a+=4);for(let x=0;x<c;x++)C(u[x])}else if(p===Map){c=u.size,c<16?f[a++]=128|c:c<65536?(f[a++]=222,f[a++]=c>>8,f[a++]=c&255):(f[a++]=223,A.setUint32(a,c),a+=4);for(let[x,g]of u)C(x),C(g)}else{for(let x=0,g=Re.length;x<g;x++){let k=Ot[x];if(u instanceof k){let S=Re[x];if(S.write){S.type&&(f[a++]=212,f[a++]=S.type,f[a++]=0),C(S.write.call(this,u));return}let V=f,T=A,Ht=a;f=null;let ae;try{ae=S.pack.call(this,u,Je=>(f=V,V=null,a+=Je,a>J&&se(a),{target:f,targetView:A,position:a-Je}),C)}finally{V&&(f=V,A=T,a=Ht,J=f.length-10)}ae&&(ae.length+a>J&&se(ae.length+a),a=Or(ae,f,a,S.type));return}}We(u,!u.hasOwnProperty)}}else if(b==="boolean")f[a++]=u?195:194;else if(b==="bigint"){if(u<BigInt(1)<<BigInt(63)&&u>=-(BigInt(1)<<BigInt(63)))f[a++]=211,A.setBigInt64(a,u);else if(u<BigInt(1)<<BigInt(64)&&u>0)f[a++]=207,A.setBigUint64(a,u);else if(this.largeBigIntToFloat)f[a++]=203,A.setFloat64(a,Number(u));else throw new RangeError(u+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");a+=8}else if(b==="undefined")this.encodeUndefinedAsNil?f[a++]=192:(f[a++]=212,f[a++]=0,f[a++]=0);else if(b==="function")C(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+b)},We=this.useRecords===!1?this.variableMapSize?u=>{let b=Object.keys(u),c=b.length;c<16?f[a++]=128|c:c<65536?(f[a++]=222,f[a++]=c>>8,f[a++]=c&255):(f[a++]=223,A.setUint32(a,c),a+=4);let p;for(let x=0;x<c;x++)C(p=b[x]),C(u[p])}:(u,b)=>{f[a++]=222;let c=a-r;a+=2;let p=0;for(let x in u)(b||u.hasOwnProperty(x))&&(C(x),C(u[x]),p++);f[c+++r]=p>>8,f[c+r]=p&255}:u=>{let b=Object.keys(u),c,p=l.transitions||(l.transitions=Object.create(null)),x=0;for(let k=0,S=b.length;k<S;k++){let V=b[k];c=p[V],c||(c=p[V]=Object.create(null),x++),p=c}let g=p[ue];if(g)g>=96&&R?(f[a++]=((g-=96)&31)+96,f[a++]=g>>5):f[a++]=g;else{g=l.nextId,g||(g=64),g<$&&this.shouldShareStructure&&!this.shouldShareStructure(b)?(g=l.nextOwnId,g<K||(g=$),l.nextOwnId=g+1):(g>=K&&(g=$),l.nextId=g+1);let k=b.highByte=g>=96&&R?g-96>>5:-1;p[ue]=g,l[g-64]=b,g<$?(b.isShared=!0,l.sharedLength=g-63,s=!0,k>=0?(f[a++]=(g&31)+96,f[a++]=k):f[a++]=g):(k>=0?(f[a++]=213,f[a++]=114,f[a++]=(g&31)+96,f[a++]=k):(f[a++]=212,f[a++]=114,f[a++]=g),x&&(Y+=N*x),F.length>=I&&(F.shift()[ue]=0),F.push(p),C(b))}for(let k=0,S=b.length;k<S;k++)C(u[b[k]])},se=u=>{let b;if(u>16777216){if(u-r>jt)throw new Error("Packed buffer would be larger than maximum buffer size");b=Math.min(jt,Math.round(Math.max((u-r)*(u>67108864?1.25:2),4194304)/4096)*4096)}else b=(Math.max(u-r<<2,f.length-1)>>12)+1<<12;let c=new De(b);return A=new DataView(c.buffer,0,b),f.copy?f.copy(c,0,r,u):c.set(f.slice(r,u)),a-=r,r=0,J=c.length-10,f=c}}useBuffer(e){f=e,A=new DataView(f.buffer,f.byteOffset,f.byteLength),a=0}}Ot=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,ht];Re=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:s,targetView:l,position:o}=e(6);s[o++]=214,s[o++]=255,l.setUint32(o,n)}else if(n>0&&n<17179869184){let{target:s,targetView:l,position:o}=e(10);s[o++]=215,s[o++]=255,l.setUint32(o,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),l.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:s,targetView:l,position:o}=e(3);s[o++]=212,s[o++]=255,s[o++]=255}else{let{target:s,targetView:l,position:o}=e(15);s[o++]=199,s[o++]=12,s[o++]=255,l.setUint32(o,t.getMilliseconds()*1e6),l.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){let n=Array.from(t),{target:s,position:l}=e(this.structuredClone?3:0);this.structuredClone&&(s[l++]=212,s[l++]=115,s[l++]=0),r(n)}},{pack(t,e,r){let{target:n,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=101,n[s++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:n,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=120,n[s++]=0),r([t.source,t.flags])}},{pack(t,e){this.structuredClone?It(t,16,e):Pt(ve?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==At&&this.structuredClone?It(t,Bt.indexOf(r.name),e):Pt(t,e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];function It(t,e,r,n){let s=t.byteLength;if(s+1<256){var{target:l,position:o}=r(4+s);l[o++]=199,l[o++]=s+1}else if(s+1<65536){var{target:l,position:o}=r(5+s);l[o++]=200,l[o++]=s+1>>8,l[o++]=s+1&255}else{var{target:l,position:o,targetView:h}=r(7+s);l[o++]=201,h.setUint32(o,s+1),o+=4}l[o++]=116,l[o++]=e,l.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Pt(t,e){let r=t.byteLength;var n,s;if(r<256){var{target:n,position:s}=e(r+2);n[s++]=196,n[s++]=r}else if(r<65536){var{target:n,position:s}=e(r+3);n[s++]=197,n[s++]=r>>8,n[s++]=r&255}else{var{target:n,position:s,targetView:l}=e(r+5);n[s++]=198,l.setUint32(s,r),s+=4}n.set(t,s)}function Or(t,e,r,n){let s=t.length;switch(s){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:s<256?(e[r++]=199,e[r++]=s):s<65536?(e[r++]=200,e[r++]=s>>8,e[r++]=s&255):(e[r++]=201,e[r++]=s>>24,e[r++]=s>>16&255,e[r++]=s>>8&255,e[r++]=s&255)}return e[r++]=n,e.set(t,r),r+=s,r}function Ar(t,e){let r,n=e.length*6,s=t.length-n;for(e.sort((l,o)=>l.offset>o.offset?1:-1);r=e.pop();){let l=r.offset,o=r.id;t.copyWithin(l+n,l,s),n-=6;let h=l+n;t[h++]=214,t[h++]=105,t[h++]=o>>24,t[h++]=o>>16&255,t[h++]=o>>8&255,t[h++]=o&255,s=l}return t}let Ct=new Er({useRecords:!1});Ct.pack;Ct.pack;const jr=512,Ir=1024,ze="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Tt=ze.split(""),Mt=new Array(123);for(let t=0;t<ze.length;t++)Mt[ze.charCodeAt(t)]=t;const Rt=t=>{if(t<0)return`-${ntob(-t)}`;let e=t>>>0,r=t/4294967296>>>0,n="";for(;r>0;)n=Tt[63&e]+n,e>>>=6,e|=(63&r)<<26,r>>>=6;let s="";do s=Tt[63&e]+s,e>>>=6;while(e>0);return s+n},Dt=t=>{let e=0;const r=t.charAt(0)==="-"?1:0;for(let n=r;n<t.length;n++)e=e*64+Mt[t.charCodeAt(n)];return r?-e:e};var zt="https://i-ver.oss-cn-beijing.aliyuncs.com/",Pr=t=>{var e,r;return r=[],e=r.push.bind(r),t.on("data",e),new Promise((n,s)=>(t.on("end",()=>{n(Buffer.concat(r))}),t.on("error",s)))},Cr=async t=>Pr(await Lt(t)),Lt=t=>{var e;return e=U.net.request(t),e.end(),new Promise((r,n)=>e.on("response",s=>{if(s.statusCode!==200){n(s);return}r(s)}))},ce={};ce.version="1.0.0";ce.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};ce.decode=function(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")};ce.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)};var Le=ce;var ie,Ft,ke,_e,Fe,Ve,Ue,de,Be,Vt,qt,qe,Ee,$t,$e,Nt,Ne;qt=Yt.promisify(Ke.brotliDecompress);var Tr=()=>(U.app.relaunch(),U.app.exit());ie=D.join(er.ROOT,"v");ee.mkdirSync(ie,{recursive:!0});Ft="sha512";Ve=(()=>{var t;return{version:t}=JSON.parse(ee.readFileSync(D.join(D.dirname(__dirname),"package.json"),"utf8")),t})();Ee=t=>Cr(zt+t);Nt=t=>{var e,r,n;t=t.split("."),e=Buffer.allocUnsafe(2*t.length),n=0;for(r of t)e.writeUIntBE(r-0,n,2),n+=2;return e.readUintBE(0,6)};$t=t=>{var e;return e=Xt.createHash(Ft),new Promise(r=>ee.createReadStream(t).on("data",e.update.bind(e)).on("end",()=>{r(e.digest().slice(0,8))}))};Be=(()=>{var t;return{v:t}=xe.default,t&&Dt(t)})();Ue=Nt(Ve);de=0;Ne=async()=>{var t;return t=Rt(parseInt(new Date/1e3)),de=await Ee("v?"+t),de};Vt=async t=>{var e,r,n,s,l,o,h,y,w,B,j,_,I,R,$,K,F,Y;if(t||(t=de||await Ne()),B=t.readUintBE(0,6),Ue!==Be){if(n=Rt(B),e=D.join(ie,n),B===Be)return e;for(F=Le.encode(await Ee(Le.encode(t))),[r,s,h]=_r(await qt(await Ee(F))),I=N=>le.mkdir(D.join(e,N),{recursive:!0}),await Promise.all(r.map(I)),$=D.dirname(__dirname),R=w=0,j=s.length;w<j;R=++w)if(y=s[R],l=D.join(e,y),o=h[R],K=async N=>Buffer.compare(o,await $t(N))===0,!(ee.existsSync(l)&&await K(l))){if(await I(D.dirname(y)),_=D.join($,y),ee.existsSync(_)&&await K(_)){await le.copyFile(_,l);continue}if(Y=ee.createWriteStream(l),(await Lt(zt+Le.encode(o))).pipe(Ke.createBrotliDecompress()).pipe(Y),await new Promise(N=>{Y.on("finish",N)}),!await K(l))return}return xe.default.v=n,Be=B,e}};var Wt=async()=>{var t,e;return t=await Ne(),e=Ue<t.readUintBE(0,6),e?t:0},Mr=()=>Ve;qe=async()=>{var t;(t=await Wt())&&await Jt(t)};setInterval(qe,864e5);ke=_e=Fe=void 0;$e=()=>_e=new Promise(t=>Fe=t);$e();var Rr=()=>_e,Jt=(...t)=>(ke||(ke=Vt(...t).then(async e=>{e&&(Fe([de,JSON.parse(await le.readFile(D.join(e,"package.json"),"utf8")).description]),$e())}).finally(()=>{ke=!1})),_e);setTimeout(async()=>{var t,e,r,n;if(await U.app.whenReady(),ee.existsSync(ie)){n=await le.readdir(ie,{withFileTypes:!0});for(e of n)e.isDirectory()&&({name:r}=e,Dt(r)<Ue&&await le.rm(D.join(ie,r),{recursive:!0,force:!0}))}if(t=parseInt(new Date/864e5),t!==xe.default.update_check)return xe.default.update_check=t,await qe()},3e4);var Dr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",relaunch:Tr,update_check:Wt,ver_now:Mr,update_promise:Rr,update:Jt}),zr=()=>U.app.getPath("userData"),Lr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",userData:zr,close:ge,rec:br,count_down:ar,auto_update:Dr,recbar:hr,area:pr});(async()=>{var t,e,r,n,s,l,o;r=tr.default.platform(),await U.app.whenReady(),he(),r==="darwin"&&(n=U.app.dock)!=null&&n.hide(),t=(h,y)=>{var w,B,j,_;y instanceof Function&&U.ipcMain.handle(h.join("."),(I,R)=>y(...R)),j=Object.entries(y);for(_ of j)[B,w]=_,t([...h,B],w)},s=Object.entries(Lr);for(o of s)[e,l]=o,t([e],l);ir(),sr()})();rr(U.app,{"window-all-closed":()=>{if(process.platform!=="darwin")return U.app.quit()},"second-instance":he,activate:he});U.app.requestSingleInstanceLock()||(U.app.quit(),process.exit(0));
