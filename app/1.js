"use strict";var cr=Object.defineProperty;var rt=Object.getOwnPropertySymbols;var dr=Object.prototype.hasOwnProperty,xr=Object.prototype.propertyIsEnumerable;var nt=(t,e,r)=>e in t?cr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,it=(t,e)=>{for(var r in e||(e={}))dr.call(e,r)&&nt(t,r,e[r]);if(rt)for(var r of rt(e))xr.call(e,r)&&nt(t,r,e[r]);return t};var hr=require("os"),E=require("electron"),z=require("path"),te=require("fs"),st=require("./v.js"),pr=require("crypto"),at=require("zlib"),gr=require("util"),fe=require("fs/promises"),ye=require("./o.js");function wr(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var yr=wr(hr),vr=(t,e)=>{var r,n;for(r in e)n=e[r],t.on(r,n);return t};ve=De=__dirname;var De=De,ve=ve,Me,lt,Ce,ft,Re,Se;Re="persist:win";ft=E.session.fromPartition(Re,{cache:!0});Se="https",Me=Se+"://i.tk/",lt=ve,Ce=E.session.fromPartition("file",{cache:!1}),Ce.protocol.interceptFileProtocol(Se,(t,e)=>{var r,n;({pathname:n}=new URL(t.url)),r=z.join(lt,n.slice(1)||".htm"),e({path:r})}),ft.protocol.interceptHttpProtocol(Se,(t,e)=>{var r,n;({url:n}=t),n.startsWith(Me)?r=Ce:r=null,t.session=r,e(t)});var oe=new Proxy({},{get:(t,e)=>r=>{var n;return r=it({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,webPreferences:{preload:z.join(De,"l.js"),partition:Re}},r),n=new E.BrowserWindow(r),n.loadURL(Me+"#"+e),n.once("ready-to-show",()=>n.show()),n.focus(),n}});var ot;({main:ot}=oe);var me=()=>{var t,e;return t=E.BrowserWindow.getAllWindows(),t.length?(e=t[0],e.isMinimized()&&e.restore(),e.show(),e.focus()):ot({resizable:!1,height:585,width:426})};var ut,ct,dt,Sr,ze;({Menu:ut,Tray:ct,app:dt,globalShortcut:Sr}=require("electron"));ze=void 0;var mr=()=>{var t;ze=new ct(z.join(ve,"-.png")),t=ut.buildFromTemplate([{label:"\u663E\u793A\u754C\u9762",click:me,accelerator:"CmdOrCtrl+Shift+R"},{type:"separator"},{accelerator:"CmdOrCtrl+Shift+Q",label:"\u9000\u51FA",click:()=>dt.quit()}]),ze.setContextMenu(t)};var xt;xt=t=>{var e,r,n,i,l,o,h,w;t&&(t.devToolsWebContents||({webContents:l}=t,e=new E.BrowserWindow({minimizable:!1,maximizable:!1}),[i,r]=t.getSize(),[h,w]=t.getPosition(),{width:o,height:n}=E.screen.getPrimaryDisplay().workArea,l.setDevToolsWebContents(e.webContents),l.openDevTools({mode:"detach"}),i>r?(w=0,i=0,r+=20,n-=r):(h=0,r=0,o-=i),e.setPosition(i,r),t.setPosition(h,w),e.setSize(o,n),t.focus()))};var br=()=>{E.globalShortcut.register("CmdOrCtrl+Alt+I",()=>xt(E.BrowserWindow.getFocusedWindow()))};var be=t=>{E.BrowserWindow.getAllWindows().forEach(e=>{var r,n;if(n=e.webContents.getURL(),n&&({hash:r}=new URL(n),r.startsWith("#main"))){t?e[t]():e.hide();return}e.close(),e.destroy()})};var ht,G;({count_down:ht}=oe);G=void 0;var pt=()=>{var t;if(G){G.focus();return}t=240,G=ht({width:t,height:t,transparent:!0,resizable:!1,hasShadow:!1}),G.on("close",()=>{G=void 0}),G.setAlwaysOnTop(!0,"screen-saver")},_r={close:()=>{G!=null&&G.close()}},Le;try{Le=new TextDecoder}catch{}var d,X,s=0,C={},S,Y,V=0,H=0,L,K,$=[],b,gt={useRecords:!1,mapsAsObjects:!0};class wt{}const yt=new wt;yt.name="MessagePack 0xC1";var ne=!1;class ue{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,r){if(d)return Pt(()=>(qe(),this?this.unpack(e,r):ue.prototype.unpack.call(gt,e,r)));X=r>-1?r:e.length,s=0,H=0,Y=null,L=null,d=e;try{b=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw d=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof ue){if(C=this,this.structures)return S=this.structures,_e();(!S||S.length>0)&&(S=[])}else C=gt,(!S||S.length>0)&&(S=[]);return _e()}unpackMultiple(e,r){let n,i=0;try{ne=!0;let l=e.length,o=this?this.unpack(e,l):Ue.unpack(e,l);if(r){for(r(o);s<l;)if(i=s,r(_e())===!1)return}else{for(n=[o];s<l;)i=s,n.push(_e());return n}}catch(l){throw l.lastPosition=i,l.values=n,l}finally{ne=!1,qe()}}_mergeStructures(e,r){e=e||[];for(let n=0,i=e.length;n<i;n++){let l=e[n];l&&(l.isShared=!0,n>=32&&(l.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in r||[])if(n>=0){let i=e[n],l=r[n];l&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=l)}return this.structures=e}decode(e,r){return this.unpack(e,r)}}function _e(){try{if(!C.trusted&&!ne){let e=S.sharedLength||0;e<S.length&&(S.length=e)}let t=O();if(s==X)S.restoreStructures&&vt(),S=null,d=null,K&&(K=null);else if(s>X){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!ne)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw S.restoreStructures&&vt(),qe(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function vt(){for(let t in S.restoreStructures)S[t]=S.restoreStructures[t];S.restoreStructures=null}function O(){let t=d[s++];if(t<160)if(t<128){if(t<64)return t;{let e=S[t&63]||C.getStructures&&mt()[t&63];return e?(e.read||(e.read=$e(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,C.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[Et()]=O();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(O(),O());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=O();return e}else if(t<192){let e=t-160;if(H>=s)return Y.slice(s-V,(s+=e)-V);if(H==0&&X<140){let r=e<16?Ne(e):kt(e);if(r!=null)return r}return Fe(e)}else{let e;switch(t){case 192:return null;case 193:return L?(e=O(),e>0?L[1].slice(L.position1,L.position1+=e):L[0].slice(L.position0,L.position0-=e)):yt;case 194:return!1;case 195:return!0;case 196:return Ve(d[s++]);case 197:return e=b.getUint16(s),s+=2,Ve(e);case 198:return e=b.getUint32(s),s+=4,Ve(e);case 199:return re(d[s++]);case 200:return e=b.getUint16(s),s+=2,re(e);case 201:return e=b.getUint32(s),s+=4,re(e);case 202:if(e=b.getFloat32(s),C.useFloat32>2){let r=We[(d[s]&127)<<1|d[s+1]>>7];return s+=4,(r*e+(e>0?.5:-.5)>>0)/r}return s+=4,e;case 203:return e=b.getFloat64(s),s+=8,e;case 204:return d[s++];case 205:return e=b.getUint16(s),s+=2,e;case 206:return e=b.getUint32(s),s+=4,e;case 207:return C.int64AsNumber?(e=b.getUint32(s)*4294967296,e+=b.getUint32(s+4)):e=b.getBigUint64(s),s+=8,e;case 208:return b.getInt8(s++);case 209:return e=b.getInt16(s),s+=2,e;case 210:return e=b.getInt32(s),s+=4,e;case 211:return C.int64AsNumber?(e=b.getInt32(s)*4294967296,e+=b.getUint32(s+4)):e=b.getBigInt64(s),s+=8,e;case 212:if(e=d[s++],e==114)return It(d[s++]&63);{let r=$[e];if(r)return r.read?(s++,r.read(O())):r.noBuffer?(s++,r()):r(d.subarray(s,++s));throw new Error("Unknown extension "+e)}case 213:return e=d[s],e==114?(s++,It(d[s++]&63,d[s++])):re(2);case 214:return re(4);case 215:return re(8);case 216:return re(16);case 217:return e=d[s++],H>=s?Y.slice(s-V,(s+=e)-V):Ur(e);case 218:return e=b.getUint16(s),s+=2,H>=s?Y.slice(s-V,(s+=e)-V):Er(e);case 219:return e=b.getUint32(s),s+=4,H>=s?Y.slice(s-V,(s+=e)-V):Ir(e);case 220:return e=b.getUint16(s),s+=2,bt(e);case 221:return e=b.getUint32(s),s+=4,bt(e);case 222:return e=b.getUint16(s),s+=2,_t(e);case 223:return e=b.getUint32(s),s+=4,_t(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}const kr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function $e(t,e){function r(){if(r.count++>2){let i=t.read=new Function("r","return function(){return {"+t.map(l=>kr.test(l)?l+":r()":"["+JSON.stringify(l)+"]:r()").join(",")+"}}")(O);return t.highByte===0&&(t.read=St(e,t.read)),i()}let n={};for(let i=0,l=t.length;i<l;i++){let o=t[i];n[o]=O()}return n}return r.count=0,t.highByte===0?St(e,r):r}const St=(t,e)=>function(){let r=d[s++];if(r===0)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),i=S[n]||mt()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=$e(i,t)),i.read()};function mt(){let t=Pt(()=>(d=null,C.getStructures()));return S=C._mergeStructures(t,S)}var Fe=ke,Ur=ke,Er=ke,Ir=ke;function ke(t){let e;if(t<16&&(e=Ne(t)))return e;if(t>64&&Le)return Le.decode(d.subarray(s,s+=t));const r=s+t,n=[];for(e="";s<r;){const i=d[s++];if((i&128)==0)n.push(i);else if((i&224)==192){const l=d[s++]&63;n.push((i&31)<<6|l)}else if((i&240)==224){const l=d[s++]&63,o=d[s++]&63;n.push((i&31)<<12|l<<6|o)}else if((i&248)==240){const l=d[s++]&63,o=d[s++]&63,h=d[s++]&63;let w=(i&7)<<18|l<<12|o<<6|h;w>65535&&(w-=65536,n.push(w>>>10&1023|55296),w=56320|w&1023),n.push(w)}else n.push(i);n.length>=4096&&(e+=T.apply(String,n),n.length=0)}return n.length>0&&(e+=T.apply(String,n)),e}function bt(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=O();return e}function _t(t){if(C.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[Et()]=O();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(O(),O());return e}}var T=String.fromCharCode;function kt(t){let e=s,r=new Array(t);for(let n=0;n<t;n++){const i=d[s++];if((i&128)>0){s=e;return}r[n]=i}return T.apply(String,r)}function Ne(t){if(t<4)if(t<2){if(t===0)return"";{let e=d[s++];if((e&128)>1){s-=1;return}return T(e)}}else{let e=d[s++],r=d[s++];if((e&128)>0||(r&128)>0){s-=2;return}if(t<3)return T(e,r);let n=d[s++];if((n&128)>0){s-=3;return}return T(e,r,n)}else{let e=d[s++],r=d[s++],n=d[s++],i=d[s++];if((e&128)>0||(r&128)>0||(n&128)>0||(i&128)>0){s-=4;return}if(t<6){if(t===4)return T(e,r,n,i);{let l=d[s++];if((l&128)>0){s-=5;return}return T(e,r,n,i,l)}}else if(t<8){let l=d[s++],o=d[s++];if((l&128)>0||(o&128)>0){s-=6;return}if(t<7)return T(e,r,n,i,l,o);let h=d[s++];if((h&128)>0){s-=7;return}return T(e,r,n,i,l,o,h)}else{let l=d[s++],o=d[s++],h=d[s++],w=d[s++];if((l&128)>0||(o&128)>0||(h&128)>0||(w&128)>0){s-=8;return}if(t<10){if(t===8)return T(e,r,n,i,l,o,h,w);{let y=d[s++];if((y&128)>0){s-=9;return}return T(e,r,n,i,l,o,h,w,y)}}else if(t<12){let y=d[s++],k=d[s++];if((y&128)>0||(k&128)>0){s-=10;return}if(t<11)return T(e,r,n,i,l,o,h,w,y,k);let I=d[s++];if((I&128)>0){s-=11;return}return T(e,r,n,i,l,o,h,w,y,k,I)}else{let y=d[s++],k=d[s++],I=d[s++],U=d[s++];if((y&128)>0||(k&128)>0||(I&128)>0||(U&128)>0){s-=12;return}if(t<14){if(t===12)return T(e,r,n,i,l,o,h,w,y,k,I,U);{let A=d[s++];if((A&128)>0){s-=13;return}return T(e,r,n,i,l,o,h,w,y,k,I,U,A)}}else{let A=d[s++],R=d[s++];if((A&128)>0||(R&128)>0){s-=14;return}if(t<15)return T(e,r,n,i,l,o,h,w,y,k,I,U,A,R);let q=d[s++];if((q&128)>0){s-=15;return}return T(e,r,n,i,l,o,h,w,y,k,I,U,A,R,q)}}}}}function Ve(t){return C.copyBuffers?Uint8Array.prototype.slice.call(d,s,s+=t):d.subarray(s,s+=t)}function re(t){let e=d[s++];if($[e])return $[e](d.subarray(s,s+=t));throw new Error("Unknown extension type "+e)}var Ut=new Array(4096);function Et(){let t=d[s++];if(t>=160&&t<192){if(t=t-160,H>=s)return Y.slice(s-V,(s+=t)-V);if(!(H==0&&X<180))return Fe(t)}else return s--,O();let e=(t<<5^(t>1?b.getUint16(s):t>0?d[s]:0))&4095,r=Ut[e],n=s,i=s+t-3,l,o=0;if(r&&r.bytes==t){for(;n<i;){if(l=b.getUint32(n),l!=r[o++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(l=d[n++],l!=r[o++]){n=1879048192;break}if(n===i)return s=n,r.string;i-=3,n=s}for(r=[],Ut[e]=r,r.bytes=t;n<i;)l=b.getUint32(n),r.push(l),n+=4;for(i+=3;n<i;)l=d[n++],r.push(l);let h=t<16?Ne(t):kt(t);return h!=null?r.string=h:r.string=Fe(t)}const It=(t,e)=>{var r=O();let n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let i=S[t];return i&&i.isShared&&((S.restoreStructures||(S.restoreStructures=[]))[t]=i),S[t]=r,r.read=$e(r,n),r.read()};var Ot=typeof self=="object"?self:global;$[0]=()=>{};$[0].noBuffer=!0;$[101]=()=>{let t=O();return(Ot[t[0]]||Error)(t[1])};$[105]=t=>{let e=b.getUint32(s-4);K||(K=new Map);let r=d[s],n;r>=144&&r<160||r==220||r==221?n=[]:n={};let i={target:n};K.set(e,i);let l=O();return i.used?Object.assign(n,l):(i.target=l,l)};$[112]=t=>{let e=b.getUint32(s-4),r=K.get(e);return r.used=!0,r.target};$[115]=()=>new Set(O());const Bt=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");$[116]=t=>{let e=t[0],r=Bt[e];if(!r)throw new Error("Could not find typed array for code "+e);return new Ot[r](Uint8Array.prototype.slice.call(t,1).buffer)};$[120]=()=>{let t=O();return new RegExp(t[0],t[1])};$[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=s;s+=e-4,L=[O(),O()],L.position0=0,L.position1=0;let n=s;s=r;try{return O()}finally{s=n}};$[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Pt(t){let e=X,r=s,n=V,i=H,l=Y,o=K,h=L,w=new Uint8Array(d.slice(0,X)),y=S,k=S.slice(0,S.length),I=C,U=ne,A=t();return X=e,s=r,V=n,H=i,Y=l,K=o,L=h,d=w,ne=U,S=y,S.splice(0,S.length,...k),C=I,b=new DataView(d.buffer,d.byteOffset,d.byteLength),A}function qe(){d=null,K=null,S=null}const We=new Array(147);for(let t=0;t<256;t++)We[t]=+("1e"+Math.floor(45.15-t*.30103));var Ue=new ue({useRecords:!1});const Or=Ue.unpack;Ue.unpackMultiple;Ue.unpack;let Br=new Float32Array(1);new Uint8Array(Br.buffer,0,4);let Ee;try{Ee=new TextEncoder}catch{}let He,At;const Ie=typeof Buffer!="undefined",Je=Ie?Buffer.allocUnsafeSlow:Uint8Array,Tt=Ie?Buffer:Uint8Array,jt=Ie?4294967296:2144337920;let f,P,a=0,J,Z=null;const Pr=/[\u0080-\uFFFF]/,ce=Symbol("record-id");class Ar extends ue{constructor(e){super(e);this.offset=0;let r,n,i,l,o,h=0,w=Tt.prototype.utf8Write?function(u,v,c){return f.utf8Write(u,v,c)}:Ee&&Ee.encodeInto?function(u,v){return Ee.encodeInto(u,f.subarray(v)).written}:!1,y=this;e||(e={});let k=e&&e.sequential,I=e.structures||e.saveStructures,U=e.maxSharedStructures;if(U==null&&(U=I?32:0),U>8160)throw new Error("Maximum maxSharedStructure is 8160");let A=e.maxOwnStructures;A==null&&(A=I?32:64),k&&!e.saveStructures&&(this.structures=[]);let R=U>32||A+U>64,q=U+64,Q=U+A+64;if(Q>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let F=[],ee=0,W=0;this.pack=this.encode=function(u,v){if(f||(f=new Je(8192),P=new DataView(f.buffer,0,8192),a=0),J=f.length-10,J-a<2048?(f=new Je(f.length),P=new DataView(f.buffer,0,f.length),J=f.length-10,a=0):a=a+7&2147483640,r=a,o=y.structuredClone?new Map:null,y.bundleStrings?(Z=["",""],f[a++]=214,f[a++]=98,Z.position=a-r,a+=4):Z=null,n=y.structures,n){n.uninitialized&&(n=y._mergeStructures(y.getStructures()));let c=n.sharedLength||0;if(c>U)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let g=0;g<c;g++){let x=n[g];if(!x)continue;let p,_=n.transitions;for(let m=0,N=x.length;m<N;m++){let M=x[m];p=_[M],p||(p=_[M]=Object.create(null)),_=p}_[ce]=g+64}h=c}k||(n.nextId=c+64)}i&&(i=!1),l=n||[];try{if(D(u),Z){P.setUint32(Z.position+r,a-Z.position-r);let c=Z;Z=null,D(c[0]),D(c[1])}if(y.offset=a,o&&o.idsToInsert){a+=o.idsToInsert.length*6,a>J&&ae(a),y.offset=a;let c=jr(f.subarray(r,a),o.idsToInsert);return o=null,c}return v&Dr?(f.start=r,f.end=a,f):f.subarray(r,a)}finally{if(n){if(W<10&&W++,ee>1e4)n.transitions=null,W=0,ee=0,F.length>0&&(F=[]);else if(F.length>0&&!k){for(let c=0,g=F.length;c<g;c++)F[c][ce]=0;F=[]}if(i&&y.saveStructures){let c=n.sharedLength||U;n.length>c&&(n=n.slice(0,c));let g=f.subarray(r,a);return y.saveStructures(n,h)===!1?(y._mergeStructures(y.getStructures()),y.pack(u)):(h=c,g)}}v&Mr&&(a=r)}};const D=u=>{a>J&&(f=ae(a));var v=typeof u,c;if(v==="string"){let g=u.length;if(Z&&g>=8&&g<4096){let _=Pr.test(u);Z[_?0:1]+=u,f[a++]=193,D(_?-g:g);return}let x;g<32?x=1:g<256?x=2:g<65536?x=3:x=5;let p=g*3;if(a+p>J&&(f=ae(a+p)),g<64||!w){let _,m,N,M=a+x;for(_=0;_<g;_++)m=u.charCodeAt(_),m<128?f[M++]=m:m<2048?(f[M++]=m>>6|192,f[M++]=m&63|128):(m&64512)==55296&&((N=u.charCodeAt(_+1))&64512)==56320?(m=65536+((m&1023)<<10)+(N&1023),_++,f[M++]=m>>18|240,f[M++]=m>>12&63|128,f[M++]=m>>6&63|128,f[M++]=m&63|128):(f[M++]=m>>12|224,f[M++]=m>>6&63|128,f[M++]=m&63|128);c=M-a-x}else c=w(u,a+x,p);c<32?f[a++]=160|c:c<256?(x<2&&f.copyWithin(a+2,a+1,a+1+c),f[a++]=217,f[a++]=c):c<65536?(x<3&&f.copyWithin(a+3,a+2,a+2+c),f[a++]=218,f[a++]=c>>8,f[a++]=c&255):(x<5&&f.copyWithin(a+5,a+3,a+3+c),f[a++]=219,P.setUint32(a,c),a+=4),a+=c}else if(v==="number")if(u>>>0===u)u<64?f[a++]=u:u<256?(f[a++]=204,f[a++]=u):u<65536?(f[a++]=205,f[a++]=u>>8,f[a++]=u&255):(f[a++]=206,P.setUint32(a,u),a+=4);else if(u>>0===u)u>=-32?f[a++]=256+u:u>=-128?(f[a++]=208,f[a++]=u+256):u>=-32768?(f[a++]=209,P.setInt16(a,u),a+=2):(f[a++]=210,P.setInt32(a,u),a+=4);else{let g;if((g=this.useFloat32)>0&&u<4294967296&&u>=-2147483648){f[a++]=202,P.setFloat32(a,u);let x;if(g<4||(x=u*We[(f[a]&127)<<1|f[a+1]>>7])>>0===x){a+=4;return}else a--}f[a++]=203,P.setFloat64(a,u),a+=8}else if(v==="object")if(!u)f[a++]=192;else{if(o){let x=o.get(u);if(x){if(!x.id){let p=o.idsToInsert||(o.idsToInsert=[]);x.id=p.push(x)}f[a++]=214,f[a++]=112,P.setUint32(a,x.id),a+=4;return}else o.set(u,{offset:a-r})}let g=u.constructor;if(g===Object)et(u,!0);else if(g===Array){c=u.length,c<16?f[a++]=144|c:c<65536?(f[a++]=220,f[a++]=c>>8,f[a++]=c&255):(f[a++]=221,P.setUint32(a,c),a+=4);for(let x=0;x<c;x++)D(u[x])}else if(g===Map){c=u.size,c<16?f[a++]=128|c:c<65536?(f[a++]=222,f[a++]=c>>8,f[a++]=c&255):(f[a++]=223,P.setUint32(a,c),a+=4);for(let[x,p]of u)D(x),D(p)}else{for(let x=0,p=He.length;x<p;x++){let _=At[x];if(u instanceof _){let m=He[x];if(m.write){m.type&&(f[a++]=212,f[a++]=m.type,f[a++]=0),D(m.write.call(this,u));return}let N=f,M=P,ur=a;f=null;let le;try{le=m.pack.call(this,u,tt=>(f=N,N=null,a+=tt,a>J&&ae(a),{target:f,targetView:P,position:a-tt}),D)}finally{N&&(f=N,P=M,a=ur,J=f.length-10)}le&&(le.length+a>J&&ae(le.length+a),a=Tr(le,f,a,m.type));return}}et(u,!u.hasOwnProperty)}}else if(v==="boolean")f[a++]=u?195:194;else if(v==="bigint"){if(u<BigInt(1)<<BigInt(63)&&u>=-(BigInt(1)<<BigInt(63)))f[a++]=211,P.setBigInt64(a,u);else if(u<BigInt(1)<<BigInt(64)&&u>0)f[a++]=207,P.setBigUint64(a,u);else if(this.largeBigIntToFloat)f[a++]=203,P.setFloat64(a,Number(u));else throw new RangeError(u+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");a+=8}else if(v==="undefined")this.encodeUndefinedAsNil?f[a++]=192:(f[a++]=212,f[a++]=0,f[a++]=0);else if(v==="function")D(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+v)},et=this.useRecords===!1?this.variableMapSize?u=>{let v=Object.keys(u),c=v.length;c<16?f[a++]=128|c:c<65536?(f[a++]=222,f[a++]=c>>8,f[a++]=c&255):(f[a++]=223,P.setUint32(a,c),a+=4);let g;for(let x=0;x<c;x++)D(g=v[x]),D(u[g])}:(u,v)=>{f[a++]=222;let c=a-r;a+=2;let g=0;for(let x in u)(v||u.hasOwnProperty(x))&&(D(x),D(u[x]),g++);f[c+++r]=g>>8,f[c+r]=g&255}:u=>{let v=Object.keys(u),c,g=l.transitions||(l.transitions=Object.create(null)),x=0;for(let _=0,m=v.length;_<m;_++){let N=v[_];c=g[N],c||(c=g[N]=Object.create(null),x++),g=c}let p=g[ce];if(p)p>=96&&R?(f[a++]=((p-=96)&31)+96,f[a++]=p>>5):f[a++]=p;else{p=l.nextId,p||(p=64),p<q&&this.shouldShareStructure&&!this.shouldShareStructure(v)?(p=l.nextOwnId,p<Q||(p=q),l.nextOwnId=p+1):(p>=Q&&(p=q),l.nextId=p+1);let _=v.highByte=p>=96&&R?p-96>>5:-1;g[ce]=p,l[p-64]=v,p<q?(v.isShared=!0,l.sharedLength=p-63,i=!0,_>=0?(f[a++]=(p&31)+96,f[a++]=_):f[a++]=p):(_>=0?(f[a++]=213,f[a++]=114,f[a++]=(p&31)+96,f[a++]=_):(f[a++]=212,f[a++]=114,f[a++]=p),x&&(ee+=W*x),F.length>=A&&(F.shift()[ce]=0),F.push(g),D(v))}for(let _=0,m=v.length;_<m;_++)D(u[v[_]])},ae=u=>{let v;if(u>16777216){if(u-r>jt)throw new Error("Packed buffer would be larger than maximum buffer size");v=Math.min(jt,Math.round(Math.max((u-r)*(u>67108864?1.25:2),4194304)/4096)*4096)}else v=(Math.max(u-r<<2,f.length-1)>>12)+1<<12;let c=new Je(v);return P=new DataView(c.buffer,0,v),f.copy?f.copy(c,0,r,u):c.set(f.slice(r,u)),a-=r,r=0,J=c.length-10,f=c}}useBuffer(e){f=e,P=new DataView(f.buffer,f.byteOffset,f.byteLength),a=0}}At=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,wt];He=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:l,position:o}=e(6);i[o++]=214,i[o++]=255,l.setUint32(o,n)}else if(n>0&&n<17179869184){let{target:i,targetView:l,position:o}=e(10);i[o++]=215,i[o++]=255,l.setUint32(o,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),l.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:i,targetView:l,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:l,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,l.setUint32(o,t.getMilliseconds()*1e6),l.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){let n=Array.from(t),{target:i,position:l}=e(this.structuredClone?3:0);this.structuredClone&&(i[l++]=212,i[l++]=115,i[l++]=0),r(n)}},{pack(t,e,r){let{target:n,position:i}=e(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=101,n[i++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:n,position:i}=e(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=120,n[i++]=0),r([t.source,t.flags])}},{pack(t,e){this.structuredClone?Dt(t,16,e):Mt(Ie?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==Tt&&this.structuredClone?Dt(t,Bt.indexOf(r.name),e):Mt(t,e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];function Dt(t,e,r,n){let i=t.byteLength;if(i+1<256){var{target:l,position:o}=r(4+i);l[o++]=199,l[o++]=i+1}else if(i+1<65536){var{target:l,position:o}=r(5+i);l[o++]=200,l[o++]=i+1>>8,l[o++]=i+1&255}else{var{target:l,position:o,targetView:h}=r(7+i);l[o++]=201,h.setUint32(o,i+1),o+=4}l[o++]=116,l[o++]=e,l.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o)}function Mt(t,e){let r=t.byteLength;var n,i;if(r<256){var{target:n,position:i}=e(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=e(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=r&255}else{var{target:n,position:i,targetView:l}=e(r+5);n[i++]=198,l.setUint32(i,r),i+=4}n.set(t,i)}function Tr(t,e,r,n){let i=t.length;switch(i){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:i<256?(e[r++]=199,e[r++]=i):i<65536?(e[r++]=200,e[r++]=i>>8,e[r++]=i&255):(e[r++]=201,e[r++]=i>>24,e[r++]=i>>16&255,e[r++]=i>>8&255,e[r++]=i&255)}return e[r++]=n,e.set(t,r),r+=i,r}function jr(t,e){let r,n=e.length*6,i=t.length-n;for(e.sort((l,o)=>l.offset>o.offset?1:-1);r=e.pop();){let l=r.offset,o=r.id;t.copyWithin(l+n,l,i),n-=6;let h=l+n;t[h++]=214,t[h++]=105,t[h++]=o>>24,t[h++]=o>>16&255,t[h++]=o>>8&255,t[h++]=o&255,i=l}return t}let Ct=new Ar({useRecords:!1});Ct.pack;Ct.pack;const Dr=512,Mr=1024,Ze="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Rt=Ze.split(""),zt=new Array(123);for(let t=0;t<Ze.length;t++)zt[Ze.charCodeAt(t)]=t;const Lt=t=>{if(t<0)return`-${ntob(-t)}`;let e=t>>>0,r=t/4294967296>>>0,n="";for(;r>0;)n=Rt[63&e]+n,e>>>=6,e|=(63&r)<<26,r>>>=6;let i="";do i=Rt[63&e]+i,e>>>=6;while(e>0);return i+n},$t=t=>{let e=0;const r=t.charAt(0)==="-"?1:0;for(let n=r;n<t.length;n++)e=e*64+zt[t.charCodeAt(n)];return r?-e:e};var Ft="https://i-ver.oss-cn-beijing.aliyuncs.com/",Nt,Cr=async t=>{var e,r;return t=await t,r=[],e=r.push.bind(r),t.on("data",e),new Promise((n,i)=>(t.on("end",()=>{n(Buffer.concat(r))}),t.on("error",i)))},Rr=t=>Cr(Vt(t));Nt=t=>{var e;return e=E.net.request(t),e.end(),new Promise((r,n)=>(e.on("error",i=>{n(i)}),e.on("response",i=>{if(i.statusCode!==200){n(i);return}r(i)})))};var Vt=t=>Nt(t),de={};de.version="1.0.0";de.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};de.decode=function(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")};de.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)};var Ge=de,qt=JSON.parse(te.readFileSync(z.join(__dirname,"package.json"),"utf8"));var ie,Wt,Oe,Be,Ke,Pe,xe,Ae,Ht,Jt,Qe,Te,Zt,Xe,Gt,Ye;Jt=gr.promisify(at.brotliDecompress);var zr=()=>(E.app.relaunch(),E.app.exit());ie=z.join(st.ROOT,"v");te.mkdirSync(ie,{recursive:!0});Wt="sha512";Te=t=>Rr(Ft+t);Gt=t=>{var e,r,n;t=t.split("."),e=Buffer.allocUnsafe(2*t.length),n=0;for(r of t)e.writeUIntBE(r-0,n,2),n+=2;return e.readUintBE(0,6)};Zt=t=>{var e;return e=pr.createHash(Wt),new Promise(r=>te.createReadStream(t).on("data",e.update.bind(e)).on("end",()=>{r(e.digest().slice(0,8))}))};Ae=(()=>{var t;return{v:t}=ye.default,t&&$t(t)})();Pe=Gt(qt.version);xe=0;Ye=async()=>{var t;return t=Lt(parseInt(new Date/1e3)),xe=await Te("v?"+t),xe};Ht=async t=>{var e,r,n,i,l,o,h,w,y,k,I,U,A,R,q,Q,F,ee;if(t||(t=xe||await Ye()),k=t.readUintBE(0,6),Pe!==Ae){if(n=Lt(k),e=z.join(ie,n),k===Ae)return e;for(F=Ge.encode(await Te(Ge.encode(t))),[r,i,h]=Or(await Jt(await Te(F))),A=W=>fe.mkdir(z.join(e,W),{recursive:!0}),await Promise.all(r.map(A)),q=z.dirname(__dirname),R=y=0,I=i.length;y<I;R=++y)if(w=i[R],l=z.join(e,w),o=h[R],Q=async W=>Buffer.compare(o,await Zt(W))===0,!(te.existsSync(l)&&await Q(l))){if(await A(z.dirname(w)),U=z.join(q,w),te.existsSync(U)&&await Q(U)){await fe.copyFile(U,l);continue}if(ee=te.createWriteStream(l),(await Vt(Ft+Ge.encode(o))).pipe(at.createBrotliDecompress()).pipe(ee),await new Promise(W=>{ee.on("finish",W)}),!await Q(l))return}return ye.default.v=n,Ae=k,e}};var Kt=async()=>{var t,e,r;try{t=await Ye()}catch(n){return e=n,console.trace(e),0}return r=Pe<t.readUintBE(0,6),r?t:0},Lr=()=>qt.version;Qe=async()=>{var t;(t=await Kt())&&await Qt(t)};setInterval(Qe,864e5);Oe=Be=Ke=void 0;Xe=()=>Be=new Promise(t=>Ke=t);Xe();var $r=()=>Be,Qt=(...t)=>(Oe||(Oe=Ht(...t).then(async e=>{e&&(Ke([xe,JSON.parse(await fe.readFile(z.join(e,"package.json"),"utf8")).description]),Xe())}).finally(()=>{Oe=!1})),Be);setTimeout(async()=>{var t,e,r,n;if(te.existsSync(ie)){n=await fe.readdir(ie,{withFileTypes:!0});for(e of n)e.isDirectory()&&({name:r}=e,$t(r)<Pe&&await fe.rm(z.join(ie,r),{recursive:!0,force:!0}))}if(t=parseInt(new Date/864e5),t!==ye.default.update_check)return ye.default.update_check=t,await Qe()},15e3);var Fr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",relaunch:zr,update_check:Kt,ver_now:Lr,update_promise:$r,update:Qt}),Xt={ID:""},Yt=new Proxy({},{get:(t,e)=>()=>{var r,n,i;return{width:n,height:r}=E.screen.getPrimaryDisplay().size,i=oe[e]({width:n,height:r,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1}),i.setAlwaysOnTop(!0,"screen-saver"),i.setPosition(0,0),i}}),er=t=>{if(!!t&&!t.isDestroyed()){t.close();try{t.destroy()}catch{}}},se,tr,rr,B;({recbar:rr}=oe);B=void 0;se=void 0;({draw:tr}=Yt);var Nr=()=>{se||(se=tr(),nr())},nr=()=>{he(),se.focus()},Vr=()=>{er(se),se=void 0},ir=()=>{var t,e,r;return e={width:568,height:48,roundedCorners:!1,transparent:!0,shadow:!1,resizable:!1},{width:r,height:t}=E.screen.getPrimaryDisplay().workArea,B=rr(e),B.setPosition((r-e.width)/2,t-28-e.height),B.on("close",()=>B=void 0),B.on("system-context-menu",(n,i)=>{n.preventDefault()}),he(),new Promise(n=>B.webContents.on("did-finish-load",()=>{he(),B.focus(),n(B)}))},he=()=>{B.setAlwaysOnTop(!0,"screen-saver")},qr=()=>{var t,e,r;e=B.getPosition(),[r,t]=B.size,B.setSize(r,t),B.setPosition(e[0]-r+42,e[1]-t+42),B.setHasShadow(!0)},Wr=()=>{var t,e,r;t=B.getPosition(),B.size=e=B.getSize(),r=36,B.setSize(r,r),r+=6,B.setPosition(t[0]+e[0]-r,t[1]+e[1]-r),B.setHasShadow(!1)},Hr=()=>{be("show")},Jr=()=>{be("showInactive")},Zr=()=>{B.hide()},Gr=async()=>{var t,e;e=await E.desktopCapturer.getSources({types:["screen"],thumbnailSize:{width:0,height:0}});for(t of e)return t.id},Kr=t=>{var e;e=`https://oss.console.aliyun.com/bucket/oss-cn-zhangjiakou/i-v/object?path=${Xt.ID}/${t}/`,E.shell.openExternal(e),E.BrowserWindow.getAllWindows().forEach(r=>r.hide())},Qr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",draw:Nr,draw_top:nr,draw_x:Vr,\u5DE5\u5177\u6761:ir,top:he,expand:qr,left:Wr,cancel:Hr,end:Jr,hide:Zr,screen_source:Gr,stop:Kr}),Xr=t=>{Xt.ID=t},Yr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ID:Xr}),sr,pe,j,ar;({camera:sr}=oe);j=void 0;pe=void 0;var ge=()=>{j&&!j.isDestroyed()&&(pe=j.getPosition()),er(j)},en=t=>{var e,r;r=j.getSize(),e=j.getPosition(),j.setSize(t,t),j.setPosition(Math.max(e[0]-(t-r[0])/2,0),Math.max(e[1]-(t-r[1]),0))},lr=ar=(t,e)=>{j&&!j.isDestroyed()||(j=sr({width:t,height:e,shadow:!1,center:!0,roundedCorners:!1,resizable:!1,transparent:!0}),j.setAlwaysOnTop(!0,"screen-saver"),j.focus())},fr=t=>{var e,r,n,i,l;j&&!j.isDestroyed()||(t!==void 0&&(pe=void 0),n=200,ar(n,n),pe?[ge,l]=pe:({width:i,height:e}=E.screen.getPrimaryDisplay().size,t?(r=30,ge=Math.round((i-546*1.57)/2+r+21),l=Math.round(e/2+546/2-n-r-21)):(r=62,ge=r,l=e-r-n)),j.setPosition(ge,l))},tn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get x(){return ge},size:en,default:lr,circle:fr});var or,we;({area:or}=Yt);we=void 0;var rn=()=>{we=or(),we.on("close",()=>we=void 0)},nn=()=>{we.setIgnoreMouseEvents(!0,{forward:!0}),pt(),he()},je;je={camera:()=>{lr(800,500)},screen:(t,e,r)=>{},all:(t,e,r)=>{}};(()=>{var t,e,r,n,i;n=(l,o)=>function(h,w,y){var k,I;k=l!=="camera",I=y===1&&k,I?rn():(pt(),o.apply(this,arguments)),k&&w&&fr(I),ir()},e=Object.entries(je);for(i of e)[t,r]=i,je[t]=n(t,r)})();var sn=Object.freeze(je),an=(t,e,r,n)=>{be(),sn[t](e,r,n)},ln=()=>st.ROOT,fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",userData:ln,close:be,count_down:_r,auto_update:Fr,recbar:Qr,USER:Yr,camera:tn,area:nn,rec:an});(()=>{var t,e,r,n,i,l,o;r=yr.default.platform(),me(),r==="darwin"&&(n=E.app.dock)!=null&&n.hide(),t=(h,w)=>{var y,k,I,U;w instanceof Function&&E.ipcMain.handle(h.join("."),(A,R)=>w(...R)),I=Object.entries(w);for(U of I)[k,y]=U,t([...h,k],y)},i=Object.entries(fn);for(o of i)[e,l]=o,t([e],l);mr(),br()})();vr(E.app,{"window-all-closed":()=>{if(process.platform!=="darwin")return E.app.quit()},"second-instance":me,activate:me});E.app.requestSingleInstanceLock()||(E.app.quit(),process.exit(0));
