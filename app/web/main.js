var H=Object.defineProperty;var z=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var q=(e,a,o)=>a in e?H(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,E=(e,a)=>{for(var o in a||(a={}))L.call(a,o)&&q(e,o,a[o]);if(z)for(var o of z(a))G.call(a,o)&&q(e,o,a[o]);return e};import{x as c,o as u,z as S,A as C,q as s,B as A,F as y,D as k,E as V,C as D,b as O,G as j,H as B,s as N,I as R,d as T,l as W,u as $,k as J,m as b,v as K}from"./vendor.js";import{_ as w}from"./index.js";import{c as n}from"./record.js";import"./on.js";import{m as P}from"./media_by_id.js";import{s as Q}from"./start.js";var X={setup:()=>{}};const x=e=>(S("data-v-4232c9ac"),e=e(),C(),e),Y=x(()=>s("div",{class:"logo"},null,-1)),Z=x(()=>s("nav",null,[s("a",{class:"home"}),s("a",{class:"config"}),s("a",{class:"user"})],-1)),ee=[Y,Z];function oe(e,a){return u(),c("header",null,ee)}var ae=w(X,[["render",oe],["__scopeId","data-v-4232c9ac"]]),se={setup:()=>{var e,a,o,r,_,d;for(r=["all \u5C4F\u5E55+\u6444\u50CF\u5934\u5F55\u5236","screen \u5C4F\u5E55\u5F55\u5236","camera \u6444\u50CF\u5934\u5F55\u5236"],d=a=0,o=r.length;a<o;d=++a)e=r[d],_=e.indexOf(" "),r[d]=[e.slice(0,_),e.slice(1+_)];return A(()=>{switch(n.src){case"screen":n.video="";break;default:n.video||(n.video=localStorage.video)}}),{li:r,config:n,go:m=>{n.src=m}}}};const te=e=>(S("data-v-053a004a"),e=e(),C(),e),re={class:"method"},ie=["onClick"],ne=te(()=>s("b",{class:"ico"},null,-1));function le(e,a){return u(),c("div",re,[(u(!0),c(y,null,k(e.li,([o,r])=>(u(),c("a",{class:V([o,e.config.src==o?"now":""]),onClick:_=>e.go(o)},[ne,s("i",null,D(r),1)],10,ie))),256))])}var de=w(se,[["render",le],["__scopeId","data-v-053a004a"]]),ce={setup:()=>({config:n,disabled:O(()=>n.src==="camera"),li:"\u6574\u4E2A\u684C\u9762 \u6307\u5B9A\u533A\u57DF".split(" ")})};const ue=e=>(S("data-v-213e215c"),e=e(),C(),e),_e={class:"bk"},ve=ue(()=>s("h2",null,"\u5F55\u5236\u533A\u57DF",-1)),fe={class:"select"},pe=["disabled"],me=["value"];function he(e,a){return u(),c("div",_e,[ve,s("div",fe,[j(s("select",{disabled:e.disabled,"onUpdate:modelValue":a[0]||(a[0]=o=>e.config.area=o)},[(u(!0),c(y,null,k(e.li,(o,r)=>(u(),c("option",{value:r},D(o),9,me))),256))],8,pe),[[B,e.config.area]])])])}var ge=w(ce,[["render",he],["__scopeId","data-v-213e215c"]]),ye={setup:()=>{var e,a,o,r,_,d,m;return d={audio:N([]),video:N([])},{mediaDevices:r}=navigator,_=async()=>{var l,i,t,v,f,p,g,h,I,M,U;p={},g=await r.enumerateDevices();for(M of g)({kind:v,label:f,deviceId:l}=M),l==="default"&&(f=f.replace("Default - ","\u9ED8\u8BA4 ")),v.endsWith("input")&&(v=v.slice(0,-5),(p[v]=p[v]||[]).push([l,f]));for(t in d)d[t].value=p[t]||[];for(t in d){if({value:I}=d[t],I.length){if(h=n[t],h){for(U of I)if([i]=U,h===i)return}h!==""&&(h=I[0][0])}else h=0;n[t]=h}},o=void 0,a=void 0,e=()=>{a&&(clearInterval(o),a(),a=void 0)},R(e),m=T(0),A(()=>{var l,i,t;i=["audio","video"];for(l of i)t=n[l],t&&(localStorage[l]=t)}),A(async()=>{var l,i,t,v,f,p,g;e(),{audio:t}=n,!!t&&(g=await P.audio(t),l=new AudioContext,p=l.createMediaStreamSource(g),i=l.createAnalyser(),i.minDecibels=-90,i.maxDecibels=-10,i.fftSize=32,a=()=>(p.disconnect(i),l.close()),v=i.frequencyBinCount,f=new Uint8Array(v),o=setInterval(()=>{i.getByteFrequencyData(f),m.value=Math.round(Math.min(1,Math.max(...f)/200)*100)},100),p.connect(i))}),(async()=>{await _()})(),E({refresh:_,config:n,x:l=>{var i,t;t=n[l],t?t="":t=localStorage[l]||"",l==="video"&&({src:i}=n,t?i==="screen"&&(n.src="all"):i==="all"&&(n.src="screen")),n[l]=t},vol:m},d)}};const F=e=>(S("data-v-28ea9000"),e=e(),C(),e),$e={class:"bk"},be=F(()=>s("h2",null,"\u8BBE\u5907\u8BBE\u7F6E",-1)),we={class:"video"},Ie={class:"select"},Se={label:"\u8F93\u5165\u6E90"},Ce=["value"],ke=F(()=>s("optgroup",{label:"\u2500\u2500\u2500"},[s("option",{value:""},"\u7981\u7528")],-1)),De={class:"audio"},Ae={class:"select"},Ve={label:"\u8F93\u5165\u6E90"},je=["value"],Be=F(()=>s("optgroup",{label:"\u2500\u2500\u2500"},[s("option",{value:""},"\u7981\u7528")],-1));function Fe(e,a){return u(),c("div",$e,[be,s("li",we,[s("label",{class:V({e:e.config.video}),onClick:a[0]||(a[0]=o=>e.x("video")),for:"driveVideo"},null,2),s("div",Ie,[j(s("select",{id:"driveVideo",onFocus:a[1]||(a[1]=(...o)=>e.refresh&&e.refresh(...o)),"onUpdate:modelValue":a[2]||(a[2]=o=>e.config.video=o)},[s("optgroup",Se,[(u(!0),c(y,null,k(e.video,([o,r])=>(u(),c("option",{value:o},D(r),9,Ce))),256))]),ke],544),[[B,e.config.video]])])]),s("li",De,[s("label",{class:V({e:e.config.audio}),style:W("--vol:"+e.vol+"%"),onClick:a[3]||(a[3]=o=>e.x("audio")),for:"driveAudio"},null,6),s("div",Ae,[j(s("select",{id:"driveAudio",onFocus:a[4]||(a[4]=(...o)=>e.refresh&&e.refresh(...o)),"onUpdate:modelValue":a[5]||(a[5]=o=>e.config.audio=o)},[s("optgroup",Ve,[(u(!0),c(y,null,k(e.audio,([o,r])=>(u(),c("option",{value:o},D(r),9,je))),256))]),Be],544),[[B,e.config.audio]])])])])}var Me=w(ye,[["render",Fe],["__scopeId","data-v-28ea9000"]]),Ue={components:{src:de,rHead:ae,rArea:ge,drive:Me,start:Q},setup:()=>{}};const ze=K("\u5F55\u5236\u89C6\u9891");function qe(e,a){const o=b("r-head"),r=b("src"),_=b("r-area"),d=b("drive"),m=b("start");return u(),c(y,null,[$(o),s("main",null,[$(r),$(_),$(d),$(m,null,{default:J(()=>[ze]),_:1})])],64)}var Re=w(Ue,[["render",qe],["__scopeId","data-v-36e732a0"]]);export{Re as default};
