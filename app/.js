var L=Object.defineProperty;var U=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var z=(e,a,o)=>a in e?L(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,q=(e,a)=>{for(var o in a||(a={}))G.call(a,o)&&z(e,o,a[o]);if(U)for(var o of U(a))J.call(a,o)&&z(e,o,a[o]);return e};import{c as r}from"./4.js";import{w as K,o as c,k as u,F as g,G as $,E as j,u as t,D as w,z as k,A as D,b as O,I as A,J as V,s as E,K as R,d as T,C as N,m as W,q as S,v as I,l as x,y as H}from"./d.js";import{_ as C}from"./9.js";import{i as P}from"./0.js";import{m as Q}from"./1.js";import{b as X}from"./g.js";import{s as Y}from"./3.js";import"./-.js";import"./$.js";import"./e.js";var Z={setup:()=>{var e,a,o,i,v,d;for(i=["all \u5C4F\u5E55+\u6444\u50CF\u5934\u5F55\u5236","screen \u5C4F\u5E55\u5F55\u5236","camera \u6444\u50CF\u5934\u5F55\u5236"],d=a=0,o=i.length;a<o;d=++a)e=i[d],v=e.indexOf(" "),i[d]=[e.slice(0,v),e.slice(1+v)];return K(()=>r.src,()=>{switch(r.src){case"screen":r.video="";break;default:r.video||(r.video=localStorage.video)}}),{li:i,config:r,go:h=>{r.src=h}}}};const ee=e=>(k("data-v-76f673c9"),e=e(),D(),e),oe={class:"method"},ae=["onClick"],se=ee(()=>t("b",{class:"ico"},null,-1));function te(e,a){return c(),u("div",oe,[(c(!0),u(g,null,$(e.li,([o,i])=>(c(),u("a",{class:j([o,e.config.src==o?"now":""]),onClick:v=>e.go(o)},[se,t("i",null,w(i),1)],10,ae))),256))])}var re=C(Z,[["render",te],["__scopeId","data-v-76f673c9"]]),ie={setup:()=>({config:r,disabled:O(()=>r.src==="camera"),li:"\u6574\u4E2A\u684C\u9762 \u6307\u5B9A\u533A\u57DF".split(" ")})};const ne=e=>(k("data-v-213e215c"),e=e(),D(),e),le={class:"bk"},de=ne(()=>t("h2",null,"\u5F55\u5236\u533A\u57DF",-1)),ce={class:"select"},ue=["disabled"],ve=["value"];function fe(e,a){return c(),u("div",le,[de,t("div",ce,[A(t("select",{disabled:e.disabled,"onUpdate:modelValue":a[0]||(a[0]=o=>e.config.area=o)},[(c(!0),u(g,null,$(e.li,(o,i)=>(c(),u("option",{value:i},w(o),9,ve))),256))],8,ue),[[V,e.config.area]])])])}var _e=C(ie,[["render",fe],["__scopeId","data-v-213e215c"]]),pe={setup:()=>{var e,a,o,i,v,d,h;return d={audio:E([]),video:E([])},{mediaDevices:i}=navigator,v=async()=>{var l,n,s,f,_,p,b,m,y,F,M;p={},b=await i.enumerateDevices();for(F of b)({kind:f,label:_,deviceId:l}=F),l==="default"&&(_=_.replace("Default - ","\u9ED8\u8BA4 ")),f.endsWith("input")&&(f=f.slice(0,-5),(p[f]=p[f]||[]).push([l,_]));for(s in d)d[s].value=p[s]||[];for(s in d){if({value:y}=d[s],y.length){if(m=r[s],m){for(M of y)if([n]=M,m===n)return}m!==""&&(m=y[0][0])}else m=0;r[s]=m}},o=void 0,a=void 0,e=()=>{a&&(clearInterval(o),a(),a=void 0)},R(e),h=T(0),N(()=>{var l,n,s;n=["audio","video"];for(l of n)s=r[l],s&&(localStorage[l]=s)}),N(async()=>{var l,n,s,f,_,p,b;e(),{audio:s}=r,!!s&&(b=await Q.audio(s),l=new AudioContext,p=l.createMediaStreamSource(b),n=l.createAnalyser(),n.minDecibels=-90,n.maxDecibels=-10,n.fftSize=32,a=()=>(p.disconnect(n),l.close()),f=n.frequencyBinCount,_=new Uint8Array(f),o=setInterval(()=>{n.getByteFrequencyData(_),h.value=Math.round(Math.min(1,Math.max(..._)/200)*100)},100),p.connect(n))}),(async()=>{await v()})(),q({refresh:v,config:r,x:l=>{var n,s;s=r[l],s?s="":s=localStorage[l]||"",l==="video"&&({src:n}=r,s?n==="screen"&&(r.src="all"):n==="all"&&(r.src="screen")),r[l]=s},vol:h},d)}};const B=e=>(k("data-v-1476b424"),e=e(),D(),e),me={class:"bk"},he=B(()=>t("h2",null,"\u8BBE\u5907\u8BBE\u7F6E",-1)),be={class:"video"},ge={class:"select"},ye={label:"\u8F93\u5165\u6E90"},$e=["value"],we=B(()=>t("optgroup",{label:"\u2500\u2500\u2500"},[t("option",{value:""},"\u7981\u7528")],-1)),Se={class:"audio"},Ie={class:"select"},Ce={label:"\u8F93\u5165\u6E90"},je=["value"],ke=B(()=>t("optgroup",{label:"\u2500\u2500\u2500"},[t("option",{value:""},"\u7981\u7528")],-1));function De(e,a){return c(),u("div",me,[he,t("li",be,[t("label",{class:j({e:e.config.video}),onClick:a[0]||(a[0]=o=>e.x("video")),for:"driveVideo"},null,2),t("div",ge,[A(t("select",{id:"driveVideo",onFocus:a[1]||(a[1]=(...o)=>e.refresh&&e.refresh(...o)),"onUpdate:modelValue":a[2]||(a[2]=o=>e.config.video=o)},[t("optgroup",ye,[(c(!0),u(g,null,$(e.video,([o,i])=>(c(),u("option",{value:o},w(i),9,$e))),256))]),we],544),[[V,e.config.video]])])]),t("li",Se,[t("label",{class:j({e:e.config.audio}),style:W("--vol:"+e.vol+"%"),onClick:a[3]||(a[3]=o=>e.x("audio")),for:"driveAudio"},null,6),t("div",Ie,[A(t("select",{id:"driveAudio",onFocus:a[4]||(a[4]=(...o)=>e.refresh&&e.refresh(...o)),"onUpdate:modelValue":a[5]||(a[5]=o=>e.config.audio=o)},[t("optgroup",Ce,[(c(!0),u(g,null,$(e.audio,([o,i])=>(c(),u("option",{value:o},w(i),9,je))),256))]),ke],544),[[V,e.config.audio]])])])])}var Ae=C(pe,[["render",De],["__scopeId","data-v-1476b424"]]),Ve={components:{src:re,rArea:_e,drive:Ae,btn:X},setup:()=>({start:Y})};(async()=>{for(;;)await P.auto_update.update_promise(),location.hash!=="#main/config"&&(location.hash="main/update")})();const Be=H("\u5F55\u5236\u89C6\u9891");function Fe(e,a){const o=S("src"),i=S("r-area"),v=S("drive"),d=S("btn");return c(),u(g,null,[I(o),t("main",null,[I(i),I(v)]),I(d,{onClick:e.start},{default:x(()=>[Be]),_:1},8,["onClick"])],64)}var Re=C(Ve,[["render",Fe],["__scopeId","data-v-2ece105d"]]);export{Re as default};
