"use strict";var Jt=Object.defineProperty;var Je=Object.getOwnPropertySymbols;var Zt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable;var Ze=(t,e,r)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ge=(t,e)=>{for(var r in e||(e={}))Zt.call(e,r)&&Ze(t,r,e[r]);if(Je)for(var r of Je(e))Gt.call(e,r)&&Ze(t,r,e[r]);return t};var Kt=require("os"),E=require("electron"),D=require("path"),Qt=require("crypto"),Ke=require("zlib"),Xt=require("util"),Y=require("fs"),ce=require("fs/promises"),xe=require("./7edd76f7.js"),Yt=require("./bdb0de64.js");function Qe(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var er=Qe(Kt),Xe=Qe(D),tr=(t,e)=>{var r,n;for(r in e)n=e[r],t.on(r,n);return t},Ye,et,tt;Ye=Xe.default.join(__dirname,"../w/index.html"),et=(t,e)=>{t.loadFile(Ye,{hash:e})};tt=Xe.default.join(__dirname,"../p/p.js");var ae=new Proxy({},{get:(t,e)=>r=>{var n;return r=Ge({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,webPreferences:{preload:tt}},r),n=new E.BrowserWindow(r),et(n,e),n.once("ready-to-show",()=>n.show()),n}});var rt;({main:rt}=ae);var de=()=>{var t,e;return t=E.BrowserWindow.getAllWindows(),t.length?(e=t[0],e.isMinimized()&&e.restore(),e.show(),e.focus()):rt({resizable:!1,height:585,width:426})};var nt,it,st,rr,Be;({Menu:nt,Tray:it,app:st,globalShortcut:rr}=require("electron"));Be=void 0;var nr=()=>{var t;Be=new it(D.join(__dirname,"../w/tray/trayTemplate.png")),t=nt.buildFromTemplate([{label:"\u663E\u793A\u754C\u9762",click:de,accelerator:"CmdOrCtrl+Shift+R"},{type:"separator"},{accelerator:"CmdOrCtrl+Shift+Q",label:"\u9000\u51FA",click:()=>st.quit()}]),Be.setContextMenu(t)};var at;at=t=>{var e,r,n,s,f,u,h,y;t&&(t.devToolsWebContents||({webContents:f}=t,e=new E.BrowserWindow({minimizable:!1,maximizable:!1}),[s,r]=t.getSize(),[h,y]=t.getPosition(),{width:u,height:n}=E.screen.getPrimaryDisplay().workArea,f.setDevToolsWebContents(e.webContents),f.openDevTools({mode:"detach"}),s>r?(y=0,s=0,r+=20,n-=r):(h=0,r=0,u-=s),e.setPosition(s,r),t.setPosition(h,y),e.setSize(u,n),t.focus()))};var ir=()=>{E.globalShortcut.register("CmdOrCtrl+Alt+I",()=>at(E.BrowserWindow.getFocusedWindow()))};var Ee=t=>{E.BrowserWindow.getAllWindows().forEach(e=>{var r,n;if(n=e.webContents.getURL(),n&&({hash:r}=new URL(n),r.startsWith("#main"))){t?e.show():e.hide();return}e.close(),e.destroy()})};var ft,te;({count_down:ft}=ae);te=void 0;var sr=()=>{var t;t=240,te=ft({width:t,height:t,transparent:!0,resizable:!1,hasShadow:!1}),te.setAlwaysOnTop(!0,"pop-up-menu")},ar={close:()=>{te!=null&&te.close(),te=void 0}};var lt,he;({area:lt}=ae);he=void 0;var fr=()=>{var t,e;({width:e,height:t}=E.screen.getPrimaryDisplay().size),he=lt({width:e,height:t,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1}),he.setAlwaysOnTop(!0,"screen-saver"),he.setPosition(0,0)};var ut,I;({recbar:ut}=ae);I=void 0;var ot=()=>{var t,e,r;return e={width:568,height:48,resizable:!1},{width:r,height:t}=E.screen.getPrimaryDisplay().workArea,I=ut(e),I.setPosition((r-e.width)/2,t-28-e.height),I.on("system-context-menu",(n,s)=>{n.preventDefault()}),Oe(),new Promise(n=>I.webContents.on("did-finish-load",()=>{Oe(),n(I)}))},Oe=()=>{I.setAlwaysOnTop(!0,"screen-saver"),I.focus()},lr=()=>{var t,e,r;e=I.getPosition(),[r,t]=I.size,I.setSize(r,t),I.setPosition(e[0]-r+42,e[1]-t+42),I.setHasShadow(!0)},ur=()=>{var t,e,r;t=I.getPosition(),I.size=e=I.getSize(),r=36,I.setSize(r,r),r+=6,I.setPosition(t[0]+e[0]-r,t[1]+e[1]-r),I.setHasShadow(!1)},or=()=>{Ee(!0)},cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",\u5DE5\u5177\u6761:ot,top:Oe,expand:lr,left:ur,stop:or}),ge,xr,ct;({camera:ct,area:xr}=ae);ge={camera:(t,e)=>{var r;return r=ct({width:800,height:500,center:!0,roundedCorners:!1,resizable:!1}),r.setAlwaysOnTop(!0),r},screen:(t,e,r)=>{},all:(t,e,r)=>{}};(()=>{var t,e,r,n,s;n=(f,u)=>function(h,y,w){w===1&&f!=="camera"?fr():(sr(),u.apply(this,arguments)),ot()},e=Object.entries(ge);for(s of e)[t,r]=s,ge[t]=n(t,r)})();var dr=Object.freeze(ge),hr=(t,e,r,n)=>{Ee(),dr[t](e,r,n)},Ae;try{Ae=new TextDecoder}catch{}var x,K,i=0,M={},b,Q,q=0,W=0,z,Z,L=[],v,xt={useRecords:!1,mapsAsObjects:!0};class dt{}const ht=new dt;ht.name="MessagePack 0xC1";var re=!1;class fe{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,r){if(x)return Bt(()=>(Ce(),this?this.unpack(e,r):fe.prototype.unpack.call(xt,e,r)));K=r>-1?r:e.length,i=0,W=0,Q=null,z=null,x=e;try{v=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw x=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof fe){if(M=this,this.structures)return b=this.structures,pe();(!b||b.length>0)&&(b=[])}else M=xt,(!b||b.length>0)&&(b=[]);return pe()}unpackMultiple(e,r){let n,s=0;try{re=!0;let f=e.length,u=this?this.unpack(e,f):ye.unpack(e,f);if(r){for(r(u);i<f;)if(s=i,r(pe())===!1)return}else{for(n=[u];i<f;)s=i,n.push(pe());return n}}catch(f){throw f.lastPosition=s,f.values=n,f}finally{re=!1,Ce()}}_mergeStructures(e,r){e=e||[];for(let n=0,s=e.length;n<s;n++){let f=e[n];f&&(f.isShared=!0,n>=32&&(f.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in r||[])if(n>=0){let s=e[n],f=r[n];f&&(s&&((e.restoreStructures||(e.restoreStructures=[]))[n]=s),e[n]=f)}return this.structures=e}decode(e,r){return this.unpack(e,r)}}function pe(){try{if(!M.trusted&&!re){let e=b.sharedLength||0;e<b.length&&(b.length=e)}let t=B();if(i==K)b.restoreStructures&&gt(),b=null,x=null,Z&&(Z=null);else if(i>K){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}else if(!re)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw b.restoreStructures&&gt(),Ce(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function gt(){for(let t in b.restoreStructures)b[t]=b.restoreStructures[t];b.restoreStructures=null}function B(){let t=x[i++];if(t<160)if(t<128){if(t<64)return t;{let e=b[t&63]||M.getStructures&&wt()[t&63];return e?(e.read||(e.read=je(e,t&63)),e.read()):t}}else if(t<144)if(t-=128,M.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[vt()]=B();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(B(),B());return e}else{t-=144;let e=new Array(t);for(let r=0;r<t;r++)e[r]=B();return e}else if(t<192){let e=t-160;if(W>=i)return Q.slice(i-q,(i+=e)-q);if(W==0&&K<140){let r=e<16?Pe(e):bt(e);if(r!=null)return r}return Ie(e)}else{let e;switch(t){case 192:return null;case 193:return z?(e=B(),e>0?z[1].slice(z.position1,z.position1+=e):z[0].slice(z.position0,z.position0-=e)):ht;case 194:return!1;case 195:return!0;case 196:return Te(x[i++]);case 197:return e=v.getUint16(i),i+=2,Te(e);case 198:return e=v.getUint32(i),i+=4,Te(e);case 199:return ee(x[i++]);case 200:return e=v.getUint16(i),i+=2,ee(e);case 201:return e=v.getUint32(i),i+=4,ee(e);case 202:if(e=v.getFloat32(i),M.useFloat32>2){let r=Me[(x[i]&127)<<1|x[i+1]>>7];return i+=4,(r*e+(e>0?.5:-.5)>>0)/r}return i+=4,e;case 203:return e=v.getFloat64(i),i+=8,e;case 204:return x[i++];case 205:return e=v.getUint16(i),i+=2,e;case 206:return e=v.getUint32(i),i+=4,e;case 207:return M.int64AsNumber?(e=v.getUint32(i)*4294967296,e+=v.getUint32(i+4)):e=v.getBigUint64(i),i+=8,e;case 208:return v.getInt8(i++);case 209:return e=v.getInt16(i),i+=2,e;case 210:return e=v.getInt32(i),i+=4,e;case 211:return M.int64AsNumber?(e=v.getInt32(i)*4294967296,e+=v.getUint32(i+4)):e=v.getBigInt64(i),i+=8,e;case 212:if(e=x[i++],e==114)return kt(x[i++]&63);{let r=L[e];if(r)return r.read?(i++,r.read(B())):r.noBuffer?(i++,r()):r(x.subarray(i,++i));throw new Error("Unknown extension "+e)}case 213:return e=x[i],e==114?(i++,kt(x[i++]&63,x[i++])):ee(2);case 214:return ee(4);case 215:return ee(8);case 216:return ee(16);case 217:return e=x[i++],W>=i?Q.slice(i-q,(i+=e)-q):pr(e);case 218:return e=v.getUint16(i),i+=2,W>=i?Q.slice(i-q,(i+=e)-q):wr(e);case 219:return e=v.getUint32(i),i+=4,W>=i?Q.slice(i-q,(i+=e)-q):yr(e);case 220:return e=v.getUint16(i),i+=2,yt(e);case 221:return e=v.getUint32(i),i+=4,yt(e);case 222:return e=v.getUint16(i),i+=2,mt(e);case 223:return e=v.getUint32(i),i+=4,mt(e);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}const gr=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function je(t,e){function r(){if(r.count++>2){let s=t.read=new Function("r","return function(){return {"+t.map(f=>gr.test(f)?f+":r()":"["+JSON.stringify(f)+"]:r()").join(",")+"}}")(B);return t.highByte===0&&(t.read=pt(e,t.read)),s()}let n={};for(let s=0,f=t.length;s<f;s++){let u=t[s];n[u]=B()}return n}return r.count=0,t.highByte===0?pt(e,r):r}const pt=(t,e)=>function(){let r=x[i++];if(r===0)return e();let n=t<32?-(t+(r<<5)):t+(r<<5),s=b[n]||wt()[n];if(!s)throw new Error("Record id is not defined for "+n);return s.read||(s.read=je(s,t)),s.read()};function wt(){let t=Bt(()=>(x=null,M.getStructures()));return b=M._mergeStructures(t,b)}var Ie=we,pr=we,wr=we,yr=we;function we(t){let e;if(t<16&&(e=Pe(t)))return e;if(t>64&&Ae)return Ae.decode(x.subarray(i,i+=t));const r=i+t,n=[];for(e="";i<r;){const s=x[i++];if((s&128)==0)n.push(s);else if((s&224)==192){const f=x[i++]&63;n.push((s&31)<<6|f)}else if((s&240)==224){const f=x[i++]&63,u=x[i++]&63;n.push((s&31)<<12|f<<6|u)}else if((s&248)==240){const f=x[i++]&63,u=x[i++]&63,h=x[i++]&63;let y=(s&7)<<18|f<<12|u<<6|h;y>65535&&(y-=65536,n.push(y>>>10&1023|55296),y=56320|y&1023),n.push(y)}else n.push(s);n.length>=4096&&(e+=P.apply(String,n),n.length=0)}return n.length>0&&(e+=P.apply(String,n)),e}function yt(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=B();return e}function mt(t){if(M.mapsAsObjects){let e={};for(let r=0;r<t;r++)e[vt()]=B();return e}else{let e=new Map;for(let r=0;r<t;r++)e.set(B(),B());return e}}var P=String.fromCharCode;function bt(t){let e=i,r=new Array(t);for(let n=0;n<t;n++){const s=x[i++];if((s&128)>0){i=e;return}r[n]=s}return P.apply(String,r)}function Pe(t){if(t<4)if(t<2){if(t===0)return"";{let e=x[i++];if((e&128)>1){i-=1;return}return P(e)}}else{let e=x[i++],r=x[i++];if((e&128)>0||(r&128)>0){i-=2;return}if(t<3)return P(e,r);let n=x[i++];if((n&128)>0){i-=3;return}return P(e,r,n)}else{let e=x[i++],r=x[i++],n=x[i++],s=x[i++];if((e&128)>0||(r&128)>0||(n&128)>0||(s&128)>0){i-=4;return}if(t<6){if(t===4)return P(e,r,n,s);{let f=x[i++];if((f&128)>0){i-=5;return}return P(e,r,n,s,f)}}else if(t<8){let f=x[i++],u=x[i++];if((f&128)>0||(u&128)>0){i-=6;return}if(t<7)return P(e,r,n,s,f,u);let h=x[i++];if((h&128)>0){i-=7;return}return P(e,r,n,s,f,u,h)}else{let f=x[i++],u=x[i++],h=x[i++],y=x[i++];if((f&128)>0||(u&128)>0||(h&128)>0||(y&128)>0){i-=8;return}if(t<10){if(t===8)return P(e,r,n,s,f,u,h,y);{let w=x[i++];if((w&128)>0){i-=9;return}return P(e,r,n,s,f,u,h,y,w)}}else if(t<12){let w=x[i++],_=x[i++];if((w&128)>0||(_&128)>0){i-=10;return}if(t<11)return P(e,r,n,s,f,u,h,y,w,_);let A=x[i++];if((A&128)>0){i-=11;return}return P(e,r,n,s,f,u,h,y,w,_,A)}else{let w=x[i++],_=x[i++],A=x[i++],U=x[i++];if((w&128)>0||(_&128)>0||(A&128)>0||(U&128)>0){i-=12;return}if(t<14){if(t===12)return P(e,r,n,s,f,u,h,y,w,_,A,U);{let j=x[i++];if((j&128)>0){i-=13;return}return P(e,r,n,s,f,u,h,y,w,_,A,U,j)}}else{let j=x[i++],R=x[i++];if((j&128)>0||(R&128)>0){i-=14;return}if(t<15)return P(e,r,n,s,f,u,h,y,w,_,A,U,j,R);let $=x[i++];if(($&128)>0){i-=15;return}return P(e,r,n,s,f,u,h,y,w,_,A,U,j,R,$)}}}}}function Te(t){return M.copyBuffers?Uint8Array.prototype.slice.call(x,i,i+=t):x.subarray(i,i+=t)}function ee(t){let e=x[i++];if(L[e])return L[e](x.subarray(i,i+=t));throw new Error("Unknown extension type "+e)}var St=new Array(4096);function vt(){let t=x[i++];if(t>=160&&t<192){if(t=t-160,W>=i)return Q.slice(i-q,(i+=t)-q);if(!(W==0&&K<180))return Ie(t)}else return i--,B();let e=(t<<5^(t>1?v.getUint16(i):t>0?x[i]:0))&4095,r=St[e],n=i,s=i+t-3,f,u=0;if(r&&r.bytes==t){for(;n<s;){if(f=v.getUint32(n),f!=r[u++]){n=1879048192;break}n+=4}for(s+=3;n<s;)if(f=x[n++],f!=r[u++]){n=1879048192;break}if(n===s)return i=n,r.string;s-=3,n=i}for(r=[],St[e]=r,r.bytes=t;n<s;)f=v.getUint32(n),r.push(f),n+=4;for(s+=3;n<s;)f=x[n++],r.push(f);let h=t<16?Pe(t):bt(t);return h!=null?r.string=h:r.string=Ie(t)}const kt=(t,e)=>{var r=B();let n=t;e!==void 0&&(t=t<32?-((e<<5)+t):(e<<5)+t,r.highByte=e);let s=b[t];return s&&s.isShared&&((b.restoreStructures||(b.restoreStructures=[]))[t]=s),b[t]=r,r.read=je(r,n),r.read()};var Ut=typeof self=="object"?self:global;L[0]=()=>{};L[0].noBuffer=!0;L[101]=()=>{let t=B();return(Ut[t[0]]||Error)(t[1])};L[105]=t=>{let e=v.getUint32(i-4);Z||(Z=new Map);let r=x[i],n;r>=144&&r<160||r==220||r==221?n=[]:n={};let s={target:n};Z.set(e,s);let f=B();return s.used?Object.assign(n,f):(s.target=f,f)};L[112]=t=>{let e=v.getUint32(i-4),r=Z.get(e);return r.used=!0,r.target};L[115]=()=>new Set(B());const _t=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");L[116]=t=>{let e=t[0],r=_t[e];if(!r)throw new Error("Could not find typed array for code "+e);return new Ut[r](Uint8Array.prototype.slice.call(t,1).buffer)};L[120]=()=>{let t=B();return new RegExp(t[0],t[1])};L[98]=t=>{let e=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=i;i+=e-4,z=[B(),B()],z.position0=0,z.position1=0;let n=i;i=r;try{return B()}finally{i=n}};L[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function Bt(t){let e=K,r=i,n=q,s=W,f=Q,u=Z,h=z,y=new Uint8Array(x.slice(0,K)),w=b,_=b.slice(0,b.length),A=M,U=re,j=t();return K=e,i=r,q=n,W=s,Q=f,Z=u,z=h,x=y,re=U,b=w,b.splice(0,b.length,..._),M=A,v=new DataView(x.buffer,x.byteOffset,x.byteLength),j}function Ce(){x=null,Z=null,b=null}const Me=new Array(147);for(let t=0;t<256;t++)Me[t]=+("1e"+Math.floor(45.15-t*.30103));var ye=new fe({useRecords:!1});const mr=ye.unpack;ye.unpackMultiple;ye.unpack;let br=new Float32Array(1);new Uint8Array(br.buffer,0,4);let me;try{me=new TextEncoder}catch{}let Re,Et;const be=typeof Buffer!="undefined",De=be?Buffer.allocUnsafeSlow:Uint8Array,Ot=be?Buffer:Uint8Array,At=be?4294967296:2144337920;let l,O,a=0,H,J=null;const Sr=/[\u0080-\uFFFF]/,le=Symbol("record-id");class vr extends fe{constructor(e){super(e);this.offset=0;let r,n,s,f,u,h=0,y=Ot.prototype.utf8Write?function(o,m,c){return l.utf8Write(o,m,c)}:me&&me.encodeInto?function(o,m){return me.encodeInto(o,l.subarray(m)).written}:!1,w=this;e||(e={});let _=e&&e.sequential,A=e.structures||e.saveStructures,U=e.maxSharedStructures;if(U==null&&(U=A?32:0),U>8160)throw new Error("Maximum maxSharedStructure is 8160");let j=e.maxOwnStructures;j==null&&(j=A?32:64),_&&!e.saveStructures&&(this.structures=[]);let R=U>32||j+U>64,$=U+64,G=U+j+64;if(G>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let F=[],X=0,N=0;this.pack=this.encode=function(o,m){if(l||(l=new De(8192),O=new DataView(l.buffer,0,8192),a=0),H=l.length-10,H-a<2048?(l=new De(l.length),O=new DataView(l.buffer,0,l.length),H=l.length-10,a=0):a=a+7&2147483640,r=a,u=w.structuredClone?new Map:null,w.bundleStrings?(J=["",""],l[a++]=214,l[a++]=98,J.position=a-r,a+=4):J=null,n=w.structures,n){n.uninitialized&&(n=w._mergeStructures(w.getStructures()));let c=n.sharedLength||0;if(c>U)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let p=0;p<c;p++){let d=n[p];if(!d)continue;let g,k=n.transitions;for(let S=0,V=d.length;S<V;S++){let C=d[S];g=k[C],g||(g=k[C]=Object.create(null)),k=g}k[le]=p+64}h=c}_||(n.nextId=c+64)}s&&(s=!1),f=n||[];try{if(T(o),J){O.setUint32(J.position+r,a-J.position-r);let c=J;J=null,T(c[0]),T(c[1])}if(w.offset=a,u&&u.idsToInsert){a+=u.idsToInsert.length*6,a>H&&ie(a),w.offset=a;let c=Ur(l.subarray(r,a),u.idsToInsert);return u=null,c}return m&_r?(l.start=r,l.end=a,l):l.subarray(r,a)}finally{if(n){if(N<10&&N++,X>1e4)n.transitions=null,N=0,X=0,F.length>0&&(F=[]);else if(F.length>0&&!_){for(let c=0,p=F.length;c<p;c++)F[c][le]=0;F=[]}if(s&&w.saveStructures){let c=n.sharedLength||U;n.length>c&&(n=n.slice(0,c));let p=l.subarray(r,a);return w.saveStructures(n,h)===!1?(w._mergeStructures(w.getStructures()),w.pack(o)):(h=c,p)}}m&Br&&(a=r)}};const T=o=>{a>H&&(l=ie(a));var m=typeof o,c;if(m==="string"){let p=o.length;if(J&&p>=8&&p<4096){let k=Sr.test(o);J[k?0:1]+=o,l[a++]=193,T(k?-p:p);return}let d;p<32?d=1:p<256?d=2:p<65536?d=3:d=5;let g=p*3;if(a+g>H&&(l=ie(a+g)),p<64||!y){let k,S,V,C=a+d;for(k=0;k<p;k++)S=o.charCodeAt(k),S<128?l[C++]=S:S<2048?(l[C++]=S>>6|192,l[C++]=S&63|128):(S&64512)==55296&&((V=o.charCodeAt(k+1))&64512)==56320?(S=65536+((S&1023)<<10)+(V&1023),k++,l[C++]=S>>18|240,l[C++]=S>>12&63|128,l[C++]=S>>6&63|128,l[C++]=S&63|128):(l[C++]=S>>12|224,l[C++]=S>>6&63|128,l[C++]=S&63|128);c=C-a-d}else c=y(o,a+d,g);c<32?l[a++]=160|c:c<256?(d<2&&l.copyWithin(a+2,a+1,a+1+c),l[a++]=217,l[a++]=c):c<65536?(d<3&&l.copyWithin(a+3,a+2,a+2+c),l[a++]=218,l[a++]=c>>8,l[a++]=c&255):(d<5&&l.copyWithin(a+5,a+3,a+3+c),l[a++]=219,O.setUint32(a,c),a+=4),a+=c}else if(m==="number")if(o>>>0===o)o<64?l[a++]=o:o<256?(l[a++]=204,l[a++]=o):o<65536?(l[a++]=205,l[a++]=o>>8,l[a++]=o&255):(l[a++]=206,O.setUint32(a,o),a+=4);else if(o>>0===o)o>=-32?l[a++]=256+o:o>=-128?(l[a++]=208,l[a++]=o+256):o>=-32768?(l[a++]=209,O.setInt16(a,o),a+=2):(l[a++]=210,O.setInt32(a,o),a+=4);else{let p;if((p=this.useFloat32)>0&&o<4294967296&&o>=-2147483648){l[a++]=202,O.setFloat32(a,o);let d;if(p<4||(d=o*Me[(l[a]&127)<<1|l[a+1]>>7])>>0===d){a+=4;return}else a--}l[a++]=203,O.setFloat64(a,o),a+=8}else if(m==="object")if(!o)l[a++]=192;else{if(u){let d=u.get(o);if(d){if(!d.id){let g=u.idsToInsert||(u.idsToInsert=[]);d.id=g.push(d)}l[a++]=214,l[a++]=112,O.setUint32(a,d.id),a+=4;return}else u.set(o,{offset:a-r})}let p=o.constructor;if(p===Object)We(o,!0);else if(p===Array){c=o.length,c<16?l[a++]=144|c:c<65536?(l[a++]=220,l[a++]=c>>8,l[a++]=c&255):(l[a++]=221,O.setUint32(a,c),a+=4);for(let d=0;d<c;d++)T(o[d])}else if(p===Map){c=o.size,c<16?l[a++]=128|c:c<65536?(l[a++]=222,l[a++]=c>>8,l[a++]=c&255):(l[a++]=223,O.setUint32(a,c),a+=4);for(let[d,g]of o)T(d),T(g)}else{for(let d=0,g=Re.length;d<g;d++){let k=Et[d];if(o instanceof k){let S=Re[d];if(S.write){S.type&&(l[a++]=212,l[a++]=S.type,l[a++]=0),T(S.write.call(this,o));return}let V=l,C=O,Ht=a;l=null;let se;try{se=S.pack.call(this,o,He=>(l=V,V=null,a+=He,a>H&&ie(a),{target:l,targetView:O,position:a-He}),T)}finally{V&&(l=V,O=C,a=Ht,H=l.length-10)}se&&(se.length+a>H&&ie(se.length+a),a=kr(se,l,a,S.type));return}}We(o,!o.hasOwnProperty)}}else if(m==="boolean")l[a++]=o?195:194;else if(m==="bigint"){if(o<BigInt(1)<<BigInt(63)&&o>=-(BigInt(1)<<BigInt(63)))l[a++]=211,O.setBigInt64(a,o);else if(o<BigInt(1)<<BigInt(64)&&o>0)l[a++]=207,O.setBigUint64(a,o);else if(this.largeBigIntToFloat)l[a++]=203,O.setFloat64(a,Number(o));else throw new RangeError(o+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");a+=8}else if(m==="undefined")this.encodeUndefinedAsNil?l[a++]=192:(l[a++]=212,l[a++]=0,l[a++]=0);else if(m==="function")T(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+m)},We=this.useRecords===!1?this.variableMapSize?o=>{let m=Object.keys(o),c=m.length;c<16?l[a++]=128|c:c<65536?(l[a++]=222,l[a++]=c>>8,l[a++]=c&255):(l[a++]=223,O.setUint32(a,c),a+=4);let p;for(let d=0;d<c;d++)T(p=m[d]),T(o[p])}:(o,m)=>{l[a++]=222;let c=a-r;a+=2;let p=0;for(let d in o)(m||o.hasOwnProperty(d))&&(T(d),T(o[d]),p++);l[c+++r]=p>>8,l[c+r]=p&255}:o=>{let m=Object.keys(o),c,p=f.transitions||(f.transitions=Object.create(null)),d=0;for(let k=0,S=m.length;k<S;k++){let V=m[k];c=p[V],c||(c=p[V]=Object.create(null),d++),p=c}let g=p[le];if(g)g>=96&&R?(l[a++]=((g-=96)&31)+96,l[a++]=g>>5):l[a++]=g;else{g=f.nextId,g||(g=64),g<$&&this.shouldShareStructure&&!this.shouldShareStructure(m)?(g=f.nextOwnId,g<G||(g=$),f.nextOwnId=g+1):(g>=G&&(g=$),f.nextId=g+1);let k=m.highByte=g>=96&&R?g-96>>5:-1;p[le]=g,f[g-64]=m,g<$?(m.isShared=!0,f.sharedLength=g-63,s=!0,k>=0?(l[a++]=(g&31)+96,l[a++]=k):l[a++]=g):(k>=0?(l[a++]=213,l[a++]=114,l[a++]=(g&31)+96,l[a++]=k):(l[a++]=212,l[a++]=114,l[a++]=g),d&&(X+=N*d),F.length>=j&&(F.shift()[le]=0),F.push(p),T(m))}for(let k=0,S=m.length;k<S;k++)T(o[m[k]])},ie=o=>{let m;if(o>16777216){if(o-r>At)throw new Error("Packed buffer would be larger than maximum buffer size");m=Math.min(At,Math.round(Math.max((o-r)*(o>67108864?1.25:2),4194304)/4096)*4096)}else m=(Math.max(o-r<<2,l.length-1)>>12)+1<<12;let c=new De(m);return O=new DataView(c.buffer,0,m),l.copy?l.copy(c,0,r,o):c.set(l.slice(r,o)),a-=r,r=0,H=c.length-10,l=c}}useBuffer(e){l=e,O=new DataView(l.buffer,l.byteOffset,l.byteLength),a=0}}Et=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,dt];Re=[{pack(t,e,r){let n=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:s,targetView:f,position:u}=e(6);s[u++]=214,s[u++]=255,f.setUint32(u,n)}else if(n>0&&n<17179869184){let{target:s,targetView:f,position:u}=e(10);s[u++]=215,s[u++]=255,f.setUint32(u,t.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),f.setUint32(u+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),r(this.onInvalidDate());let{target:s,targetView:f,position:u}=e(3);s[u++]=212,s[u++]=255,s[u++]=255}else{let{target:s,targetView:f,position:u}=e(15);s[u++]=199,s[u++]=12,s[u++]=255,f.setUint32(u,t.getMilliseconds()*1e6),f.setBigInt64(u+4,BigInt(Math.floor(n)))}}},{pack(t,e,r){let n=Array.from(t),{target:s,position:f}=e(this.structuredClone?3:0);this.structuredClone&&(s[f++]=212,s[f++]=115,s[f++]=0),r(n)}},{pack(t,e,r){let{target:n,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=101,n[s++]=0),r([t.name,t.message])}},{pack(t,e,r){let{target:n,position:s}=e(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=120,n[s++]=0),r([t.source,t.flags])}},{pack(t,e){this.structuredClone?jt(t,16,e):It(be?Buffer.from(t):new Uint8Array(t),e)}},{pack(t,e){let r=t.constructor;r!==Ot&&this.structuredClone?jt(t,_t.indexOf(r.name),e):It(t,e)}},{pack(t,e){let{target:r,position:n}=e(1);r[n]=193}}];function jt(t,e,r,n){let s=t.byteLength;if(s+1<256){var{target:f,position:u}=r(4+s);f[u++]=199,f[u++]=s+1}else if(s+1<65536){var{target:f,position:u}=r(5+s);f[u++]=200,f[u++]=s+1>>8,f[u++]=s+1&255}else{var{target:f,position:u,targetView:h}=r(7+s);f[u++]=201,h.setUint32(u,s+1),u+=4}f[u++]=116,f[u++]=e,f.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),u)}function It(t,e){let r=t.byteLength;var n,s;if(r<256){var{target:n,position:s}=e(r+2);n[s++]=196,n[s++]=r}else if(r<65536){var{target:n,position:s}=e(r+3);n[s++]=197,n[s++]=r>>8,n[s++]=r&255}else{var{target:n,position:s,targetView:f}=e(r+5);n[s++]=198,f.setUint32(s,r),s+=4}n.set(t,s)}function kr(t,e,r,n){let s=t.length;switch(s){case 1:e[r++]=212;break;case 2:e[r++]=213;break;case 4:e[r++]=214;break;case 8:e[r++]=215;break;case 16:e[r++]=216;break;default:s<256?(e[r++]=199,e[r++]=s):s<65536?(e[r++]=200,e[r++]=s>>8,e[r++]=s&255):(e[r++]=201,e[r++]=s>>24,e[r++]=s>>16&255,e[r++]=s>>8&255,e[r++]=s&255)}return e[r++]=n,e.set(t,r),r+=s,r}function Ur(t,e){let r,n=e.length*6,s=t.length-n;for(e.sort((f,u)=>f.offset>u.offset?1:-1);r=e.pop();){let f=r.offset,u=r.id;t.copyWithin(f+n,f,s),n-=6;let h=f+n;t[h++]=214,t[h++]=105,t[h++]=u>>24,t[h++]=u>>16&255,t[h++]=u>>8&255,t[h++]=u&255,s=f}return t}let Pt=new vr({useRecords:!1});Pt.pack;Pt.pack;const _r=512,Br=1024,ze="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Tt=ze.split(""),Ct=new Array(123);for(let t=0;t<ze.length;t++)Ct[ze.charCodeAt(t)]=t;const Mt=t=>{if(t<0)return`-${ntob(-t)}`;let e=t>>>0,r=t/4294967296>>>0,n="";for(;r>0;)n=Tt[63&e]+n,e>>>=6,e|=(63&r)<<26,r>>>=6;let s="";do s=Tt[63&e]+s,e>>>=6;while(e>0);return s+n},Rt=t=>{let e=0;const r=t.charAt(0)==="-"?1:0;for(let n=r;n<t.length;n++)e=e*64+Ct[t.charCodeAt(n)];return r?-e:e};var Dt="https://i-ver.oss-cn-beijing.aliyuncs.com/",Er=t=>{var e,r;return r=[],e=r.push.bind(r),t.on("data",e),new Promise((n,s)=>(t.on("end",()=>{n(Buffer.concat(r))}),t.on("error",s)))},Or=async t=>Er(await zt(t)),zt=t=>{var e;return e=E.net.request(t),e.end(),new Promise((r,n)=>e.on("response",s=>{if(s.statusCode!==200){n(s);return}r(s)}))},ue={};ue.version="1.0.0";ue.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};ue.decode=function(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")};ue.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)};var Le=ue;var ne,Lt,Se,ve,Fe,Ve,ke,oe,Ue,Ft,Vt,qe,_e,qt,$e,$t,Ne;Vt=Xt.promisify(Ke.brotliDecompress);var Ar=()=>(E.app.relaunch(),E.app.exit());ne=D.join(Yt.ROOT,"v");Y.mkdirSync(ne,{recursive:!0});Lt="sha512";Ve=(()=>{var t;return{version:t}=JSON.parse(Y.readFileSync(D.join(D.dirname(__dirname),"package.json"),"utf8")),t})();_e=t=>Or(Dt+t);$t=t=>{var e,r,n;t=t.split("."),e=Buffer.allocUnsafe(2*t.length),n=0;for(r of t)e.writeUIntBE(r-0,n,2),n+=2;return e.readUintBE(0,6)};qt=t=>{var e;return e=Qt.createHash(Lt),new Promise(r=>Y.createReadStream(t).on("data",e.update.bind(e)).on("end",()=>{r(e.digest().slice(0,8))}))};Ue=(()=>{var t;return{v:t}=xe.default,t&&Rt(t)})();ke=$t(Ve);oe=0;Ne=async()=>{var t;return t=Mt(parseInt(new Date/1e3)),oe=await _e("v?"+t),oe};Ft=async t=>{var e,r,n,s,f,u,h,y,w,_,A,U,j,R,$,G,F,X;if(t||(t=oe||await Ne()),_=t.readUintBE(0,6),ke!==Ue){if(n=Mt(_),e=D.join(ne,n),_===Ue)return e;for(F=Le.encode(await _e(Le.encode(t))),[r,s,h]=mr(await Vt(await _e(F))),j=N=>ce.mkdir(D.join(e,N),{recursive:!0}),await Promise.all(r.map(j)),$=D.dirname(__dirname),R=w=0,A=s.length;w<A;R=++w)if(y=s[R],f=D.join(e,y),u=h[R],G=async N=>Buffer.compare(u,await qt(N))===0,!(Y.existsSync(f)&&await G(f))){if(await j(D.dirname(y)),U=D.join($,y),Y.existsSync(U)&&await G(U)){await ce.copyFile(U,f);continue}if(X=Y.createWriteStream(f),(await zt(Dt+Le.encode(u))).pipe(Ke.createBrotliDecompress()).pipe(X),await new Promise(N=>{X.on("finish",N)}),!await G(f))return}return xe.default.v=n,Ue=_,e}};var Nt=async()=>{var t,e;return t=await Ne(),e=ke<t.readUintBE(0,6),e?t:0},jr=()=>Ve;qe=async()=>{var t;(t=await Nt())&&await Wt(t)};setInterval(qe,864e5);Se=ve=Fe=void 0;$e=()=>ve=new Promise(t=>Fe=t);$e();var Ir=()=>ve,Wt=(...t)=>(Se||(Se=Ft(...t).then(async e=>{e&&(Fe([oe,JSON.parse(await ce.readFile(D.join(e,"package.json"),"utf8")).description]),$e())}).finally(()=>{Se=!1})),ve);setTimeout(async()=>{var t,e,r,n;if(await E.app.whenReady(),Y.existsSync(ne)){n=await ce.readdir(ne,{withFileTypes:!0});for(e of n)e.isDirectory()&&({name:r}=e,Rt(r)<ke&&await rm(D.join(ne,r),{recursive:!0,force:!0}))}if(t=parseInt(new Date/864e5),t!==xe.default.update_check)return xe.default.update_check=t,await qe()},3e3);var Pr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",relaunch:Ar,update_check:Nt,ver_now:jr,update_promise:Ir,update:Wt}),Tr=()=>E.app.getPath("userData"),Cr=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",userData:Tr,close:Ee,rec:hr,count_down:ar,auto_update:Pr,recbar:cr});(async()=>{var t,e,r,n,s,f,u;r=er.default.platform(),await E.app.whenReady(),de(),r==="darwin"&&(n=E.app.dock)!=null&&n.hide(),t=(h,y)=>{var w,_,A,U;y instanceof Function&&E.ipcMain.handle(h.join("."),(j,R)=>y(...R)),A=Object.entries(y);for(U of A)[_,w]=U,t([...h,_],w)},s=Object.entries(Cr);for(u of s)[e,f]=u,t([e],f);nr(),ir()})();tr(E.app,{"window-all-closed":()=>{if(process.platform!=="darwin")return E.app.quit()},"second-instance":de,activate:de});E.app.requestSingleInstanceLock()||(E.app.quit(),process.exit(0));
