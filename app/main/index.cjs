"use strict";var E=Object.defineProperty;var S=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var x=(e,r,a)=>r in e?E(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,C=(e,r)=>{for(var a in r||(r={}))Q.call(r,a)&&x(e,a,r[a]);if(S)for(var a of S(r))G.call(r,a)&&x(e,a,r[a]);return e};var J=require("os"),o=require("electron"),T=require("path");function j(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var K=j(J),O=j(T),N=(e,r)=>{var a,t;for(a in r)t=r[a],e.on(a,t);return e},k,m,W;o.app.isPackaged?(k=O.default.join(__dirname,"../web/index.html"),m=(e,r)=>{e.loadFile(k,{hash:r})}):(W="http://127.0.0.1:54910/",m=(e,r)=>e.loadURL(W+"#"+r));var f=new Proxy({},{get:(e,r)=>a=>{var t;return a=C({skipTaskbar:!0,frame:!1,minimizable:!1,maximizable:!1,maximizable:!1,webPreferences:{preload:O.default.join(__dirname,"../preload/index.cjs")}},a),t=new o.BrowserWindow(a),m(t,r),t.once("ready-to-show",()=>t.show()),t}});var D;({main:D}=f);var v=()=>{var e,r;return e=o.BrowserWindow.getAllWindows(),e.length?(r=e[0],r.isMinimized()&&r.restore(),r.show(),r.focus()):D({resizable:!1,height:585,width:426})};var q,A,$,V,g;({Menu:q,Tray:A,app:$,globalShortcut:V}=require("electron"));g=void 0;var X=()=>{var e;g=new A(T.join(__dirname,"../web/tray/trayTemplate.png")),e=q.buildFromTemplate([{label:"\u663E\u793A\u754C\u9762",click:v,accelerator:"CmdOrCtrl+Shift+R"},{type:"separator"},{accelerator:"CmdOrCtrl+Shift+Q",label:"\u9000\u51FA",click:()=>$.quit()}]),g.setContextMenu(e)};var M;M=e=>{var r,a,t,n,l,d,s,u;e&&(e.devToolsWebContents||({webContents:l}=e,r=new o.BrowserWindow({minimizable:!1,maximizable:!1}),[n,a]=e.getSize(),[s,u]=e.getPosition(),{width:d,height:t}=o.screen.getPrimaryDisplay().workArea,l.setDevToolsWebContents(r.webContents),l.openDevTools({mode:"detach"}),n>a?(u=0,n=0,a+=20,t-=a):(s=0,a=0,d-=n),r.setPosition(n,a),e.setPosition(s,u),r.setSize(d,t),e.focus()))};var Y=()=>{o.globalShortcut.register("CmdOrCtrl+Alt+I",()=>M(o.BrowserWindow.getFocusedWindow()))};var b=e=>{o.BrowserWindow.getAllWindows().forEach(r=>{r.webContents.getURL().endsWith("#main")?e?r.show():r.hide():(r.close(),r.destroy())})};var R,c;({count_down:R}=f);c=void 0;var Z=()=>{var e;e=240,c=R({width:e,height:e,transparent:!0,resizable:!1,hasShadow:!1}),c.setAlwaysOnTop(!0,"pop-up-menu")},ee={close:()=>{c!=null&&c.close(),c=void 0}};var B,h;({area:B}=f);h=void 0;var re=()=>{var e,r;({width:r,height:e}=o.screen.getPrimaryDisplay().size),h=B({width:r,height:e,roundedCorners:!1,transparent:!0,resizable:!1,hasShadow:!1}),h.setAlwaysOnTop(!0,"screen-saver"),h.setPosition(0,0)};var F,i;({recbar:F}=f);i=void 0;var L=()=>{var e,r,a;return r={width:568,height:48,resizable:!1},{width:a,height:e}=o.screen.getPrimaryDisplay().workArea,i=F(r),i.setPosition((a-r.width)/2,e-28-r.height),i.on("system-context-menu",(t,n)=>{t.preventDefault()}),y(),new Promise(t=>i.webContents.on("did-finish-load",()=>{y(),t(i)}))},y=()=>{i.setAlwaysOnTop(!0,"screen-saver"),i.focus()},ae=()=>{var e,r,a;r=i.getPosition(),[a,e]=i.size,i.setSize(a,e),i.setPosition(r[0]-a+42,r[1]-e+42),i.setHasShadow(!0)},te=()=>{var e,r,a;e=i.getPosition(),i.size=r=i.getSize(),a=36,i.setSize(a,a),a+=6,i.setPosition(e[0]+r[0]-a,e[1]+r[1]-a),i.setHasShadow(!1)},oe=()=>{b(!0)},ie=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",\u5DE5\u5177\u6761:L,top:y,expand:ae,left:te,stop:oe}),w,ne,I;({camera:I,area:ne}=f);w={camera:(e,r)=>{var a;return a=I({width:800,height:500,center:!0,roundedCorners:!1,resizable:!1}),a.setAlwaysOnTop(!0),a},screen:(e,r,a)=>{},all:(e,r,a)=>{}};(()=>{var e,r,a,t,n;t=(l,d)=>function(s,u,p){p===1&&l!=="camera"?re():(Z(),d.apply(this,arguments)),L()},r=Object.entries(w);for(n of r)[e,a]=n,w[e]=t(e,a)})();var se=Object.freeze(w),le=(e,r,a,t)=>{b(),se[e](r,a,t)},de=()=>o.app.getPath("userData"),ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",userData:de,close:b,rec:le,count_down:ee,recbar:ie});var H;({isPackaged:H}=o.app);(async()=>{var e,r,a,t,n,l,d;H||await Promise.resolve().then(function(){return require("./register.js")}).then(function(s){return s.register}),a=K.default.platform(),await o.app.whenReady(),v(),a==="darwin"&&(t=o.app.dock)!=null&&t.hide(),e=(s,u)=>{var p,_,z,P;u instanceof Function&&o.ipcMain.handle(s.join("."),(ce,U)=>u(...U)),z=Object.entries(u);for(P of z)[_,p]=P,e([...s,_],p)},n=Object.entries(ue);for(d of n)[r,l]=d,e([r],l);X(),Y()})();N(o.app,{"window-all-closed":()=>{if(process.platform!=="darwin")return o.app.quit()},"second-instance":v,activate:v});o.app.requestSingleInstanceLock()||(o.app.quit(),process.exit(0));
