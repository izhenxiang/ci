import{i as Se}from"./19696688.js";import{b as R,w as O,d as te,e as ne,f as se,g as oe,i as V,t as ie,h as k,j as ue,p as B,s as q,n as Oe,k as de,o as We,c as xe,l as fe,m as Ee,q as Ne,u as je,v as $e}from"./b2a71417.js";import{s as Ce}from"./14fa0606.js";import{_ as Te}from"./index.js";import"./242a5e10.js";var he=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ge(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),t}var ce={},Ve=Object.defineProperty,Be=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,ve=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,pe=(e,t,a)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,me=(e,t)=>{for(var a in t||(t={}))Ye.call(t,a)&&pe(e,a,t[a]);if(ve)for(var a of ve(t))Xe.call(t,a)&&pe(e,a,t[a]);return e},be=(e,t)=>Be(e,Ie(t));const ye=Symbol("Vue3DraggableResizable");function we(e){const t=window.getComputedStyle(e);return{width:parseFloat(t.getPropertyValue("width")),height:parseFloat(t.getPropertyValue("height"))}}function _e(e){return(t,a,i)=>{!t||(typeof a=="string"&&(a=[a]),a.forEach(n=>t[e](n,i,{passive:!1})))}}const G=_e("addEventListener"),N=_e("removeEventListener");function ze(e){if(e&&e.length>0){const t=[];return e.forEach(a=>{re.includes(a)&&!t.includes(a)&&t.push(a)}),t}else return[]}function Ue(){return String(Math.random()).substr(2)+String(Date.now())}function Fe(e,t,a){if(e.disabled.value)return null;const i={row:[],col:[]},{parentWidth:n,parentHeight:s}=t;i.row.push(...e.adsorbRows),i.col.push(...e.adsorbCols),e.adsorbParent.value&&(i.row.push(0,s.value,s.value/2),i.col.push(0,n.value,n.value/2));const o=e.getPositionStore(a);return Object.values(o).forEach(({x:l,y:r,w:d,h})=>{i.row.push(r,r+h,r+h/2),i.col.push(l,l+d,l+d/2)}),{row:i.row.reduce((l,r)=>be(me({},l),{[r]:{min:r-5,max:r+5,value:r}}),{}),col:i.col.reduce((l,r)=>be(me({},l),{[r]:{min:r-5,max:r+5,value:r}}),{})}}var qe=Object.defineProperty,He=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,Me=(e,t,a)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Pe=(e,t)=>{for(var a in t||(t={}))Ge.call(t,a)&&Me(e,a,t[a]);if(He)for(var a of He(t))Je.call(t,a)&&Me(e,a,t[a]);return e};function D(e){const t=te(e);return[t,i=>(t.value=i,i)]}function Ke(e,t){const[a,i]=D(e.initW),[n,s]=D(e.initH),[o,u]=D(e.x),[l,r]=D(e.y),[d,h]=D(e.active),[b,v]=D(!1),[M,z]=D(!1),[W,y]=D(""),[j,m]=D(1/0),[U,F]=D(1/0),[x,L]=D(e.minW),[P,I]=D(e.minH),$=R(()=>n.value/a.value);return O(a,f=>{t("update:w",f)},{immediate:!0}),O(n,f=>{t("update:h",f)},{immediate:!0}),O(l,f=>{t("update:y",f)}),O(o,f=>{t("update:x",f)}),O(d,(f,Y)=>{t("update:active",f),!Y&&f?t("activated"):Y&&!f&&t("deactivated")}),O(()=>e.active,f=>{h(f)}),{id:Ue(),width:a,height:n,top:l,left:o,enable:d,dragging:b,resizing:M,resizingHandle:W,resizingMaxHeight:U,resizingMaxWidth:j,resizingMinWidth:x,resizingMinHeight:P,aspectRatio:$,setEnable:h,setDragging:v,setResizing:z,setResizingHandle:y,setResizingMaxHeight:F,setResizingMaxWidth:m,setResizingMinWidth:L,setResizingMinHeight:I,setWidth:f=>i(Math.floor(f)),setHeight:f=>s(Math.floor(f)),setTop:f=>r(Math.floor(f)),setLeft:f=>u(Math.floor(f))}}function Qe(e){const t=te(0),a=te(0);return ne(()=>{if(e.value&&e.value.parentElement){const{width:i,height:n}=we(e.value.parentElement);t.value=i,a.value=n}}),{parentWidth:t,parentHeight:a}}function Ze(e,t,a){const{width:i,height:n,left:s,top:o,resizingMaxWidth:u,resizingMaxHeight:l,resizingMinWidth:r,resizingMinHeight:d}=a,{setWidth:h,setHeight:b,setTop:v,setLeft:M}=a,{parentWidth:z,parentHeight:W}=t,y={minWidth:R(()=>r.value),minHeight:R(()=>d.value),maxWidth:R(()=>{let m=1/0;return e.parent&&(m=Math.min(z.value,u.value)),m}),maxHeight:R(()=>{let m=1/0;return e.parent&&(m=Math.min(W.value,l.value)),m}),minLeft:R(()=>e.parent?0:-1/0),minTop:R(()=>e.parent?0:-1/0),maxLeft:R(()=>e.parent?z.value-i.value:1/0),maxTop:R(()=>e.parent?W.value-n.value:1/0)},j={setWidth(m){return e.disabledW?i.value:h(Math.min(y.maxWidth.value,Math.max(y.minWidth.value,m)))},setHeight(m){return e.disabledH?n.value:b(Math.min(y.maxHeight.value,Math.max(y.minHeight.value,m)))},setTop(m){return e.disabledY?o.value:v(Math.min(y.maxTop.value,Math.max(y.minTop.value,m)))},setLeft(m){return e.disabledX?s.value:M(Math.min(y.maxLeft.value,Math.max(y.minLeft.value,m)))}};return Pe(Pe({},y),j)}const le=["mousedown","touchstart"],J=["mouseup","touchend"],K=["mousemove","touchmove"];function ee(e){return"touches"in e?[e.touches[0].pageX,e.touches[0].pageY]:[e.pageX,e.pageY]}function ke(e,t,a,i,n,s,o){const{left:u,top:l,width:r,height:d,dragging:h,id:b}=t,{setDragging:v,setEnable:M,setResizing:z,setResizingHandle:W}=t,{setTop:y,setLeft:j}=a;let m=0,U=0,F=0,x=0,L=null;const P=document.documentElement,I=p=>{var S;const H=p.target;((S=e.value)==null?void 0:S.contains(H))||(M(!1),v(!1),z(!1),W(""))},$=()=>{v(!1),N(P,J,$),N(P,K,f),L=null,s&&(s.updatePosition(b,{x:u.value,y:l.value,w:r.value,h:d.value}),s.setMatchedLine(null))},f=p=>{if(p.preventDefault(),!(h.value&&e.value))return;const[H,S]=ee(p),Q=H-F,Z=S-x;let E=m+Q,C=U+Z;if(L!==null){const T={col:[E,E+r.value/2,E+r.value],row:[C,C+d.value/2,C+d.value]},A={row:T.row.map((w,c)=>{let g=null;return Object.values(L.row).forEach(_=>{w>=_.min&&w<=_.max&&(g=_.value)}),g!==null&&(c===0?C=g:c===1?C=Math.floor(g-d.value/2):c===2&&(C=Math.floor(g-d.value))),g}).filter(w=>w!==null),col:T.col.map((w,c)=>{let g=null;return Object.values(L.col).forEach(_=>{w>=_.min&&w<=_.max&&(g=_.value)}),g!==null&&(c===0?E=g:c===1?E=Math.floor(g-r.value/2):c===2&&(E=Math.floor(g-r.value))),g}).filter(w=>w!==null)};s.setMatchedLine(A)}n("dragging",{x:j(E),y:y(C)})},Y=p=>{!i.value||(v(!0),m=u.value,U=l.value,F=ee(p)[0],x=ee(p)[1],G(P,K,f),G(P,J,$),s&&!s.disabled.value&&(L=Fe(s,o,b)))};return O(h,(p,H)=>{!H&&p?(n("drag-start",{x:u.value,y:l.value}),M(!0),v(!0)):(n("drag-end",{x:u.value,y:l.value}),v(!1))}),ne(()=>{const p=e.value;!p||(p.style.left=u+"px",p.style.top=l+"px",G(P,le,I),G(p,le,Y))}),se(()=>{!e.value||(N(P,le,I),N(P,J,$),N(P,K,f))}),{containerRef:e}}function et(e,t,a,i,n){const{setWidth:s,setHeight:o,setLeft:u,setTop:l}=t,{width:r,height:d,left:h,top:b,aspectRatio:v}=e,{setResizing:M,setResizingHandle:z,setResizingMaxWidth:W,setResizingMaxHeight:y,setResizingMinWidth:j,setResizingMinHeight:m}=e,{parentWidth:U,parentHeight:F}=a;let x=0,L=0,P=0,I=0,$=0,f=0,Y=1,p="",H="";const S=document.documentElement,Q=T=>{T.preventDefault();let[A,w]=ee(T),c=A-$,g=w-f,_=c,X=g;i.lockAspectRatio&&(c=Math.abs(c),g=c*Y,(_<0||H==="m"&&X<0)&&(c=-c,g=-g)),p==="t"?(o(L-g),l(I-(d.value-L))):p==="b"&&o(L+g),H==="l"?(s(x-c),u(P-(r.value-x))):H==="r"&&s(x+c),n("resizing",{x:h.value,y:b.value,w:r.value,h:d.value})},Z=()=>{n("resize-end",{x:h.value,y:b.value,w:r.value,h:d.value}),z(""),M(!1),W(1/0),y(1/0),j(i.minW),m(i.minH),N(S,K,Q),N(S,J,Z)},E=(T,A)=>{if(!i.resizable)return;T.stopPropagation(),z(A),M(!0),p=A[0],H=A[1],v.value&&(["tl","tm","ml","bl"].includes(A)?(p="t",H="l"):(p="b",H="r"));let w=i.minH,c=i.minW;if(w/c>v.value?c=w/v.value:w=c*v.value,j(c),m(w),parent){let _=p==="t"?b.value+d.value:F.value-b.value,X=H==="l"?h.value+r.value:U.value-h.value;i.lockAspectRatio&&(_/X<v.value?X=_/v.value:_=X*v.value),y(_),W(X)}x=r.value,L=d.value,P=h.value,I=b.value;const g=ee(T);$=g[0],f=g[1],Y=v.value,n("resize-start",{x:h.value,y:b.value,w:r.value,h:d.value}),G(S,K,Q),G(S,J,Z)};return se(()=>{N(S,J,Z),N(S,K,Q)}),{handlesFiltered:R(()=>i.resizable?ze(i.handles):[]),resizeHandleDown:E}}function tt(e,t){const{setWidth:a,setHeight:i,setLeft:n,setTop:s}=t;O(()=>e.w,o=>{a(o)}),O(()=>e.h,o=>{i(o)}),O(()=>e.x,o=>{n(o)}),O(()=>e.y,o=>{s(o)})}var at=Object.defineProperty,Le=Object.getOwnPropertySymbols,nt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,Re=(e,t,a)=>t in e?at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ae=(e,t)=>{for(var a in t||(t={}))nt.call(t,a)&&Re(e,a,t[a]);if(Le)for(var a of Le(t))it.call(t,a)&&Re(e,a,t[a]);return e};const re=["tl","tm","tr","ml","mr","bl","bm","br"],lt={initW:{type:Number,default:null},initH:{type:Number,default:null},w:{type:Number,default:0},h:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},disabledX:{type:Boolean,default:!1},disabledY:{type:Boolean,default:!1},disabledW:{type:Boolean,default:!1},disabledH:{type:Boolean,default:!1},minW:{type:Number,default:20},minH:{type:Number,default:20},active:{type:Boolean,default:!1},parent:{type:Boolean,default:!1},handles:{type:Array,default:re,validator:e=>ze(e).length===e.length},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},lockAspectRatio:{type:Boolean,default:!1}},rt=["activated","deactivated","drag-start","resize-start","dragging","resizing","drag-end","resize-end","update:w","update:h","update:x","update:y","update:active"],st=oe({name:"Vue3DraggableResizable",props:lt,emits:rt,setup(e,{emit:t}){const a=Ke(e,t),i=V("identity");let n=null;i===ye&&(n={updatePosition:V("updatePosition"),getPositionStore:V("getPositionStore"),disabled:V("disabled"),adsorbParent:V("adsorbParent"),adsorbCols:V("adsorbCols"),adsorbRows:V("adsorbRows"),setMatchedLine:V("setMatchedLine")});const s=te(),o=Qe(s),u=Ze(e,o,a);ke(s,a,u,ie(e,"draggable"),t,n,o);const l=et(a,u,o,e,t);return tt(e,u),ae(ae(ae(ae({containerRef:s,containerProvider:n},a),o),u),l)},computed:{style(){return{width:this.width+"px",height:this.height+"px",top:this.top+"px",left:this.left+"px"}},klass(){return{[this.classNameActive]:this.enable,[this.classNameDragging]:this.dragging,[this.classNameResizing]:this.resizing,[this.classNameDraggable]:this.draggable,[this.classNameResizable]:this.resizable}}},mounted(){if(!this.containerRef)return;this.containerRef.ondragstart=()=>!1;const{width:e,height:t}=we(this.containerRef);this.setWidth(this.initW===null?this.w||e:this.initW),this.setHeight(this.initH===null?this.h||t:this.initH),this.containerProvider&&this.containerProvider.updatePosition(this.id,{x:this.left,y:this.top,w:this.width,h:this.height})},render(){return k("div",{ref:"containerRef",class:["vdr-container",this.klass],style:this.style},[this.$slots.default&&this.$slots.default(),...this.handlesFiltered.map(e=>k("div",{class:["vdr-handle","vdr-handle-"+e,this.classNameHandle,`${this.classNameHandle}-${e}`],style:{display:this.enable?"block":"none"},onMousedown:t=>this.resizeHandleDown(t,e),onTouchstart:t=>this.resizeHandleDown(t,e)}))])}});var ot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ALL_HANDLES:re,default:st}),ut=ge(ot),dt=oe({name:"DraggableContainer",props:{disabled:{type:Boolean,default:!1},adsorbParent:{type:Boolean,default:!0},adsorbCols:{type:Array,default:null},adsorbRows:{type:Array,default:null},referenceLineVisible:{type:Boolean,default:!0},referenceLineColor:{type:String,default:"#f00"}},setup(e){const t=ue({}),a=(l,r)=>{t[l]=r},i=l=>{const r=Object.assign({},t);return l&&delete r[l],r},n=ue({matchedLine:null}),s=R(()=>n.matchedLine&&n.matchedLine.row||[]),o=R(()=>n.matchedLine&&n.matchedLine.col||[]),u=l=>{n.matchedLine=l};return B("identity",ye),B("updatePosition",a),B("getPositionStore",i),B("setMatchedLine",u),B("disabled",ie(e,"disabled")),B("adsorbParent",ie(e,"adsorbParent")),B("adsorbCols",e.adsorbCols||[]),B("adsorbRows",e.adsorbRows||[]),{matchedRows:s,matchedCols:o}},methods:{renderReferenceLine(){return this.referenceLineVisible?[...this.matchedCols.map(e=>k("div",{style:{width:"0",height:"100%",top:"0",left:e+"px",borderLeft:`1px dashed ${this.referenceLineColor}`,position:"absolute"}})),...this.matchedRows.map(e=>k("div",{style:{width:"100%",height:"0",left:"0",top:e+"px",borderTop:`1px dashed ${this.referenceLineColor}`,position:"absolute"}}))]:[]}},render(){return k("div",{style:{width:"100%",height:"100%",position:"relative"}},[this.$slots.default&&this.$slots.default(),...this.renderReferenceLine()])}}),ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dt}),De=ge(ft);(function(e){var t=he&&he.__createBinding||(Object.create?function(s,o,u,l){l===void 0&&(l=u),Object.defineProperty(s,l,{enumerable:!0,get:function(){return o[u]}})}:function(s,o,u,l){l===void 0&&(l=u),s[l]=o[u]});e.__esModule=!0;var a=ut,i=De;a.default.install=function(s){return s.component(a.default.name,a.default),s.component(i.default.name,i.default),s};var n=De;t(e,n,"default","DraggableContainer"),e.default=a.default})(ce);var ht=Ae(ce),gt={components:{Vue3DraggableResizable:ht,start:Ce},setup:()=>{var e,t,a,i,n,s,o,u,l;return n=q(),t=outerHeight*2,i=outerWidth*2,s=546,o=846,u=q((outerWidth-o)/2),l=q((outerHeight-s)/2),s=q(s),o=q(o),e=q(!0),ne(()=>{n=n.value.$el}),a=()=>{var r,d,h,b,v,M,z;h=-23,{offsetTop:M,offsetHeight:b,offsetWidth:z,offsetLeft:v}=n,d=outerHeight-h,b>d&&(b=d,s.value=d),d=outerWidth-h,z>d&&(z=d,o.value=d),M<h?l.value=h:(r=outerHeight-h-b,M>r&&(l.value=r)),v<h?u.value=h:(r=outerWidth-h-z,v>r&&(u.value=r))},{drag:n,border:a,end:()=>{a(),Se.recbar.top()},start:()=>{},deactivated:function(){Oe(()=>{e.value=!0})},x:u,y:l,h:s,w:o,bw:i,bh:t,active:e}}};const ct=$e("\u5F00\u59CB\u5F55\u5236");function vt(e,t){const a=de("start"),i=de("Vue3DraggableResizable");return We(),xe(i,{draggable:!0,initH:e.h,initW:e.w,minH:330,minW:330,resizable:!0,style:Ee("--bh:"+e.bh+"px;--top:-"+e.bh+"px;--bw:"+e.bw+"px;--left:-"+e.bw+"px"),onActivated:t[0]||(t[0]=n=>e.print("activated")),onDeactivated:e.deactivated,onDragEnd:e.end,onDragStart:e.border,onDragging:e.border,onResizeEnd:e.end,onResizeStart:e.border,onResizing:e.border,ref:"drag",active:e.active,"onUpdate:active":t[1]||(t[1]=n=>e.active=n),h:e.h,"onUpdate:h":t[2]||(t[2]=n=>e.h=n),w:e.w,"onUpdate:w":t[3]||(t[3]=n=>e.w=n),x:e.x,"onUpdate:x":t[4]||(t[4]=n=>e.x=n),y:e.y,"onUpdate:y":t[5]||(t[5]=n=>e.y=n)},{default:fe(()=>[Ne("main",null,[je(a,null,{default:fe(()=>[ct]),_:1})])]),_:1},8,["initH","initW","style","onDeactivated","onDragEnd","onDragStart","onDragging","onResizeEnd","onResizeStart","onResizing","active","h","w","x","y"])}var _t=Te(gt,[["render",vt],["__scopeId","data-v-2c40ae8a"]]);export{_t as default};
